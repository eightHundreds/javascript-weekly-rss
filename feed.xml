<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>web.dev</title>
        <link>undefined</link>
        <description>undefined</description>
        <lastBuildDate>Fri, 04 Aug 2023 15:10:17 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <item>
            <title><![CDATA[七月网络平台新功能]]></title>
            <link>https://web.dev/web-platform-07-2023/</link>
            <guid>https://web.dev/web-platform-07-2023/</guid>
            <content:encoded><![CDATA[<h2 id="stable-browser-releases">Stable browser releases <a class="headline-link" href="https://web.dev/web-platform-07-2023/#stable-browser-releases">#</a></h2>
<p>In July 2023 <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/115" rel="noopener">Firefox 115</a> and <a href="https://developer.chrome.com/blog/new-in-chrome-115/" rel="noopener">Chrome 115</a> became stable. This post takes a look at what that means for the web platform.</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text"><p class="cluster color-state-bad-text"><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">   <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z"></path> </svg></span><strong>Caution</strong></p><div class=" flow"> We include browser compatibility data pulled from MDN in these posts which may not have been updated yet for very recent browser releases. The post will show the correct information as soon as it appears in the <a href="https://github.com/mdn/browser-compat-data/releases">browser-compat-data release</a>. </div></aside>
<h3 id="multiple-values-for-the-css-display-property">Multiple values for the CSS <code>display</code> property <a class="headline-link" href="https://web.dev/web-platform-07-2023/#multiple-values-for-the-css-display-property">#</a></h3>
<p>Chrome 115 includes multiple values for the CSS <code>display</code> property. This means that <code>display: flex</code> becomes <code>display: block flex</code> and <code>display: block</code> becomes <code>display: block flow</code>. The single values are maintained as legacy keywords, these values are now available in the three major engines.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="firefox">
<span class="visually-hidden">Firefox 70, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
70
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari 15, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
15
</span>
</li><p></p>
  </ul>
</div>
<h3 id="scroll-driven-animations">Scroll-driven animations <a class="headline-link" href="https://web.dev/web-platform-07-2023/#scroll-driven-animations">#</a></h3>
<p>Also in Chrome 115 are the <code>ScrollTimeline</code> and <code>ViewTimeline</code> extensions to the Web Animations specification. These enable <a href="https://developer.chrome.com/articles/scroll-driven-animations/" rel="noopener">scroll-driven animations</a> via CSS and JavaScript.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="firefox">
<span class="visually-hidden">Firefox, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
</div>
<h3 id="privacy-sandbox-apis">Privacy Sandbox APIs <a class="headline-link" href="https://web.dev/web-platform-07-2023/#privacy-sandbox-apis">#</a></h3>
<p>The Privacy Sandbox <a href="https://developer.chrome.com/blog/privacy-sandbox-launch/" rel="noopener">relevance and measurement APIs</a> shipped in Chrome 115. This includes the Topics, Protected Audience, Attribution Reporting, Private Aggregation, Shared Storage, and Fenced Frames APIs.</p>
<p>To understand more about these APIs check out the <a href="https://developer.chrome.com/blog/privacy-sandbox-demos/" rel="noopener">Privacy Sandbox demos</a>.</p>
<h3 id="the-animation-composition-property">The <code>animation-composition</code> property <a class="headline-link" href="https://web.dev/web-platform-07-2023/#the-animation-composition-property">#</a></h3>
<p>Firefox 115 supports the CSS <a href="https://developer.mozilla.org/docs/Web/CSS/animation-composition" rel="noopener"><code>animation-composition</code></a> property. Making <code>animation-composition</code> supported in all three major engines. Learn more in the article <a href="https://developer.chrome.com/articles/css-animation-composition/" rel="noopener">Specify how multiple animation effects should composite with animation-composition</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 104, Behind a flag</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="flag" title="Behind a flag" aria-label="Behind a flag">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 112, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
112
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari 16, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
16
</span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/animation-composition#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="array-methods">Array methods <a class="headline-link" href="https://web.dev/web-platform-07-2023/#array-methods">#</a></h3>
<p>Also reaching interoperability with Firefox 115 are a set of methods for <code>Array</code> and <code>TypedArray</code>.  <code>Array.toReversed()</code>, <code>Array.toSorted()</code>, <code>Array.toSpliced()</code>, <code>Array.with()</code>, <code>TypedArrays.toReversed()</code>, <code>TypedArrays.toSorted()</code>, and <code>TypedArrays.with()</code> return a new array with elements that have been shallow copied.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 110, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      110
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 110, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
110
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari 16, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
16
</span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/toReversed#browser_compatibility" target="_blank">Source</a>
</div>
<h2 id="beta-browser-releases">Beta browser releases <a class="headline-link" href="https://web.dev/web-platform-07-2023/#beta-browser-releases">#</a></h2>
<p>Beta browser versions give you a preview of things that will be in the next stable version of the browser. It's a great time to test new features, or removals, that could impact your site before the world gets that release. New betas are <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/116" rel="noopener">Firefox 116</a> and <a href="https://developer.chrome.com/blog/chrome-116-beta/" rel="noopener">Chrome 116</a>. The <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 17</a>  and <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 16.6</a> betas are still ongoing. These releases bring many great features to the platform. Check out the release notes for all of the details, here are just a few highlights.</p>
<p>Firefox 116 supports the <a href="https://developer.mozilla.org/docs/Web/API/Audio_Output_Devices_API" rel="noopener">Audio Output Devices API</a> on all platforms except for Android. This API allows web applications to redirect audio output to a permitted Bluetooth headset, speakerphone, or other device, instead of having to use the browser or underlying OS default.</p>
<p>Chrome 116 includes CSS Motion Path allowing any graphical object to be animated it along a path specified by the developer. This allows a number of powerful new transform possibilities, such as positioning using polar coordinates (with the <code>ray()</code> function) rather than the standard rectangular coordinates used by the <code>translate()</code> function, or animating an element along a defined path. This makes it easier to define complex and beautiful 2d spatial transitions. A path can be specified as <code>circle()</code>, <code>ellipse()</code>, <code>rect()</code>, <code>inset()</code>, <code>xywh()</code>, <code>polygon()</code>, <code>ray()</code> and <code>url()</code>.</p>
<p>Also in Chrome 116 is the <a href="https://developer.chrome.com/docs/web-platform/document-picture-in-picture/" rel="noopener">Document Picture-in-Picture API</a>. This enables an always-on-top window that can be populated with arbitrary HTMLElements. This is an expansion upon the existing HTMLVideoElement API that only allows for an HTMLVideoElement to be put into a Picture-in-Picture (PiP) window.</p>
<p><em>Photo by <a href="https://unsplash.com/@ninjason" rel="noopener">Jason Leung</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[使用 CSS 使版式适应用户偏好]]></title>
            <link>https://web.dev/adapting-typography-to-user-preferences-with-css/</link>
            <guid>https://web.dev/adapting-typography-to-user-preferences-with-css/</guid>
            <content:encoded><![CDATA[<p>Bringing the user into the design process has been an exciting time for users,
designers and developers. Users can land on your experience and seamlessly begin
consuming content, their preferences richly integrated into the design result.</p>
<p>This blog post explores using CSS media queries with a variable font to tailor
the reading experience even further. Font grade and weight can be customized
with <code>font-variation-settings</code>, allowing microtuning given various preferences
and contexts, like a preference for dark mode or high contrast. We can take
these preferences and tailor a variable font for that user experience.</p>
<ul>
<li>Dark mode gets a slightly reduced gradation.</li>
<li>High contrast gets a bolder font.</li>
<li>Low contrast gets a thinner font.</li>
</ul>
<figure data-size="full">
  <video autoplay="" controls="" loop="" muted="">      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/cgGryLwncKVnBUQ8iQOF.mp4" type="video/mp4" />    </video>
  <figcaption>
    <a href="https://codepen.io/argyleink/pen/mdQrqvj">https://codepen.io/argyleink/pen/mdQrqvj</a>
  </figcaption>
</figure>
<p>Follow along to understand each portion of the CSS and variable font that enable
this meaningful moment!</p>
<h2 id="getting-setup">Getting setup <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#getting-setup">#</a></h2>
<p>To help focus on the CSS and font variation setting values, but also give us
something to read and see, here's the markup you can use to preview the work:</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Variable font weight based on contrast preference<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><br /><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><br />  Lorem ipsum dolor sit amet consectetur adipisicing elit.<br />  Officia, quod? Quidem, nemo aliquam, magnam rerum distinctio<br />  itaque nisi nam, cupiditate dolorum ad sint. Soluta nemo<br />  labore aliquid ex, dicta corporis.<br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre>
</div><p>Without adding any CSS, the font size is already adaptive to user preferences.
Here's a video from another demo showing how setting <code>font-size</code> in pixels will
squash any user preferences, and why you should set your font size in rems:</p>
<p><video autoplay="" controls="" loop="" muted="">      <source src="https://storage.googleapis.com/web-dev-uploads/video/vS06HQ1YTsbMKSFTIPl2iogUQP73/8mxSKsYmv6K7zoqDor0F.mp4" type="video/mp4" />    </video></p>
<p>Lastly, to center and support the demo, a little CSS:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo.support</span> <span class="token punctuation">{</span><br />  <span class="token selector">body</span> <span class="token punctuation">{</span><br />    <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span><br />    <span class="token property">place-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span><br />    <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--size-5<span class="token punctuation">)</span><span class="token punctuation">;</span><br />    <span class="token property">gap</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--size-5<span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token selector">h1</span> <span class="token punctuation">{</span><br />    <span class="token property">text-wrap</span><span class="token punctuation">:</span> balance<span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
</div><img alt="A screenshot preview of the demo so far, in both dark and light themes." decoding="async" height="327" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format" srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/upVZBhu250ETgmczvTeh.png?auto=format&w=1600 1600w" width="800" />
<p>This demo setup lets you begin testing and implementing this neat typography UX
feature.</p>
<h2 id="loading-the-roboto-flex-variable-font">Loading the Roboto Flex variable font <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#loading-the-roboto-flex-variable-font">#</a></h2>
<p>The adaptive strategy depends on a variable font with meaningful axes for
customization, specifically you need <code>GRAD</code> and <code>wght</code>. The target adaptive user
preferences in this article are for color scheme and contrast, both of which
will tailor these axes to match the user's desired preference.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> A variable font is not required to achieve this user experience that matches preferences, however, using one achieves the effect without loading multiple weights or versions of a font. See <a href="https://codepen.io/web-dot-dev/pen/zYMmevQ">this demo</a> for an example of this UX without a dependency on a variable font. </div></aside>
<p>Load the variable font using the <code>@font-face</code> API of CSS:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span><br />  <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">"Roboto Flex"</span><span class="token punctuation">;</span><br />  <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'https://assets.codepen.io/2585/RobotoFlex'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'truetype'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span></code></pre>
</div><p>Next, apply the font to some content. The following CSS applies it to
everything:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo.support</span> <span class="token punctuation">{</span><br />  <span class="token selector">body</span> <span class="token punctuation">{</span><br />    <span class="token property">font-family</span><span class="token punctuation">:</span> Roboto Flex<span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
</div><img alt="A screenshot preview of the demo so far, with the font now in Roboto Flex in both dark and light themes." decoding="async" height="327" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format" srcset="https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/vS06HQ1YTsbMKSFTIPl2iogUQP73/hfdJqPvkp2v8HvsH7x4o.png?auto=format&w=1600 1600w" width="800" />
<h2 id="css-custom-properties-and-media-queries-for-the-win">CSS custom properties and media queries for the win <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#css-custom-properties-and-media-queries-for-the-win">#</a></h2>
<p>With the font loaded, you can query for user preferences and adapt the variable
font settings to match.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> If you need a review on some of these styles, check out the <a href="https://web.dev/learn/css/">Learn CSS</a> module on <a href="https://web.dev/learn/design/media-queries/">media queries</a> or this post on <a href="https://web.dev/building-a-color-scheme/">building an adaptive color scheme with custom properties</a>. </div></aside>
<h3 id="settings-when-theres-no-preferences-default">Settings when there's no preferences (default) <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-theres-no-preferences-default">#</a></h3>
<p>The following initial styles will be the default styles, or another way to look
at it, the styles for users without any preferences.</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br />  <span class="token selector">body</span> <span class="token punctuation">{</span><br />    <span class="token property">--base-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span><br />    <span class="token property">--base-grade</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br /><br />    <span class="token property">font-variation-settings</span><span class="token punctuation">:</span><br />      <span class="token string">"wght"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-weight<span class="token punctuation">)</span><span class="token punctuation">,</span><br />      <span class="token string">"GRAD"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-grade<span class="token punctuation">)</span><br />    <span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
</div><h3 id="settings-when-the-preference-is-for-high-contrast">Settings when the preference is for high contrast <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-the-preference-is-for-high-contrast">#</a></h3>
<p>For users who have indicated a preference for high contrast in their system
settings, increase the <code>--base-weight</code> value from <code>400</code> to <code>700</code>:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br />  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> more<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br />    <span class="token selector">body</span> <span class="token punctuation">{</span><br />      <span class="token property">--base-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
</div><p>Now there's more contrast while reading.</p>
<h3 id="settings-when-the-preference-is-for-low-contrast">Settings when the preference is for low contrast <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-the-preference-is-for-low-contrast">#</a></h3>
<p>For users who have indicated a preference for low contrast in their system
settings, decrease the <code>--base-weight</code> value from <code>400</code> to <code>200</code>:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br />  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> less<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br />    <span class="token selector">body</span> <span class="token punctuation">{</span><br />      <span class="token property">--base-weight</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
</div><p>Now there's less contrast while reading.</p>
<h3 id="settings-when-the-preference-is-for-dark-mode">Settings when the preference is for dark mode <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#settings-when-the-preference-is-for-dark-mode">#</a></h3>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br />  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br />    <span class="token selector">body</span> <span class="token punctuation">{</span><br />      <span class="token property">--base-grade</span><span class="token punctuation">:</span> -25<span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
</div><p>Now the perceptual differences of light on dark vs dark on light have been
accounted for.</p>
<h3 id="all-together-now">All together now <a class="headline-link" href="https://web.dev/adapting-typography-to-user-preferences-with-css/#all-together-now">#</a></h3>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br />  <span class="token selector">body</span> <span class="token punctuation">{</span><br />    <span class="token property">--base-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span><br />    <span class="token property">--base-grade</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br /><br />    <span class="token property">font-variation-settings</span><span class="token punctuation">:</span><br />      <span class="token string">"wght"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-weight<span class="token punctuation">)</span><span class="token punctuation">,</span><br />      <span class="token string">"GRAD"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-grade<span class="token punctuation">)</span><br />    <span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> more<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br />    <span class="token selector">body</span> <span class="token punctuation">{</span><br />      <span class="token property">--base-weight</span><span class="token punctuation">:</span> 700<span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> less<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br />    <span class="token selector">body</span> <span class="token punctuation">{</span><br />      <span class="token property">--base-weight</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><br />  <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br />    <span class="token selector">body</span> <span class="token punctuation">{</span><br />      <span class="token property">--base-grade</span><span class="token punctuation">:</span> -25<span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
</div><p>Or, for fun, all together with <a href="https://developer.chrome.com/articles/css-nesting/" rel="noopener">CSS nesting</a>:</p>
<div><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@layer</span> demo</span> <span class="token punctuation">{</span><br />  <span class="token selector">body</span> <span class="token punctuation">{</span><br />    <span class="token property">--base-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span><br />    <span class="token property">--base-grade</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><br /><br />    <span class="token property">font-variation-settings</span><span class="token punctuation">:</span><br />      <span class="token string">"wght"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-weight<span class="token punctuation">)</span><span class="token punctuation">,</span><br />      <span class="token string">"GRAD"</span> <span class="token function">var</span><span class="token punctuation">(</span>--base-grade<span class="token punctuation">)</span><br />    <span class="token punctuation">;</span><br /><br />    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> more<span class="token punctuation">)</span></span>     <span class="token punctuation">{</span> <span class="token property">--base-weight</span><span class="token punctuation">:</span> 700 <span class="token punctuation">}</span><br />    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-contrast</span><span class="token punctuation">:</span> less<span class="token punctuation">)</span></span>     <span class="token punctuation">{</span> <span class="token property">--base-weight</span><span class="token punctuation">:</span> 200 <span class="token punctuation">}</span><br />    <span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">prefers-color-scheme</span><span class="token punctuation">:</span> dark<span class="token punctuation">)</span></span> <span class="token punctuation">{</span> <span class="token property">--base-grade</span><span class="token punctuation">:</span> -25 <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
</div><p>The result is a reading experience that adapts the font to match the user's
preferences. Full source code is available below in the Codepen.</p>
<div class="codepen-embed-wrap" style="height: 500px; width: 100%">
<iframe allow="camera; clipboard-read; clipboard-write; encrypted-media; geolocation; microphone; midi;" loading="lazy" src="https://codepen.io/web-dot-dev/embed/rNQZMzo?height=500&theme-id=light&default-tab=result&editable=true" style="height: 100%; width: 100%; border: 0;" title="Pen rNQZMzo by web-dot-dev on Codepen">See the Pen <a href="https://codepen.io/web-dot-dev/embed/rNQZMzo">Pen rNQZMzo by web-dot-dev on Codepen</a></iframe></div>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[设计 Google 帐户上的密钥的用户体验]]></title>
            <link>https://web.dev/passkey-google-ux/</link>
            <guid>https://web.dev/passkey-google-ux/</guid>
            <content:encoded><![CDATA[<p>Passkeys are a simple and <a href="https://security.googleblog.com/2023/05/so-long-passwords-thanks-for-all-phish.html" rel="noopener">secure cross-device authentication
technology</a>
that enables creating online accounts and signing in to them without entering a
password. To log in to an account, users are simply shown a prompt to to use the
screen lock on their device, such as touching the fingerprint sensor.</p>
<p>Google has been working with the FIDO Alliance for years, alongside Apple and
Microsoft, to bring passkeys to the world. In 2022 we rolled out platform
support for passkeys so that
<a href="https://android-developers.googleblog.com/2022/10/bringing-passkeys-to-android-and-chrome.html" rel="noopener">Android</a>
and
<a href="https://blog.chromium.org/2022/12/introducing-passkeys-in-chrome.html" rel="noopener">Chrome</a>
users can seamlessly sign in to apps and websites across all their devices. In
May 2023, we enabled signing in to <a href="https://blog.google/technology/safety-security/the-beginning-of-the-end-of-the-password/" rel="noopener">Google Accounts with
passkeys</a>,
bringing the security and convenience of passkeys to our users.</p>
<p>Google is in a unique position, as we are both working on the infrastructure for
passkeys and are one of the largest services using them. We are rolling out
passkeys for Google Accounts carefully and deliberately, so we can measure the
results and use that feedback to continue to improve the passkey infrastructure
and the Google account experience.</p>
<h2 id="transitioning-users-to-passkeys">Transitioning users to passkeys <a class="headline-link" href="https://web.dev/passkey-google-ux/#transitioning-users-to-passkeys">#</a></h2>
<p>Passwords have been the standard sign-in method since the advent of personalized
online experiences. How do we introduce the passwordless experience of passkeys?</p>
<p>Research indicates that when it comes to authentication, users value the
convenience the most. They want a smooth and fast transition to the real
experience, which only comes after signing in.</p>
<p>Still, the transition to passkeys requires changing muscle memory and users need
to be convinced it's worth making a switch.</p>
<p>The user experience of passkeys for <a href="http://google.com/" rel="noopener">Google.com</a> has been
strategically designed to emphasize two principles at every step of the
authentication process: ease of use and security.</p>
<h3 id="leading-with-convenience">Leading with convenience <a class="headline-link" href="https://web.dev/passkey-google-ux/#leading-with-convenience">#</a></h3>
<figure>
<img alt="For most users, this will be the first time they see passkeys" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/UI5EioUkpDiMtUAdARnw.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>For most users, this will be the first time they see passkeys.</figcaption>
</figure>
<p>The first passkey screen users see is light and easy-to-digest.  The header is
focusing on the user benefit, saying &quot;Simplify your sign in.&quot;</p>
<p>The body copy explains &quot;With passkeys you can now use your fingerprint, face or
screen lock to verify it's really you&quot;.</p>
<p>The illustration is intended to ground the message in the value proposition made
by the page. The large blue primary action invites the user to proceed. &quot;Not
now&quot; is included as a secondary action to allow users to choose whether or not
to opt in at this time, leaving the user in control. And &quot;Learn more&quot; is offered
for the most curious users who would like to understand passkeys better before
proceeding.</p>
<p>We explored many iterations of the pages used to introduce users to passkeys
during sign in. This included trying content that emphasized the security,
technology, and other aspects of passkeys—yet convenience was really what
resonated most. Google's content strategy, illustration, and interaction design
demonstrates this core principle for our implementation of passkeys.</p>
<h3 id="associating-the-term-passkeys-with-familiar-security-experiences">Associating the term &quot;passkeys&quot; with familiar security experiences <a class="headline-link" href="https://web.dev/passkey-google-ux/#associating-the-term-passkeys-with-familiar-security-experiences">#</a></h3>
<p>Passkeys are a new term for most users so we are intentionally gently exposing
the users to the term to build familiarity. Guided by internal research, we are
strategically associating passkeys with security.</p>
<p>The word &quot;passkey&quot; is included throughout the sign-in flow in the less-prominent
body copy position.  It's consistently nestled amongst the familiar security
experiences that enable passkey use: fingerprint, face scan, or other device
screen lock.</p>
<p>Our research has shown that many users associate biometrics with security. While
passkeys don't require biometrics (a passkey can be used with a device PIN, for
example), we are leaning into the association of passkeys with biometrics to
boost user perception of passkeys' security benefits.</p>
<p>The additional content behind the &quot;Learn more&quot; has lots of valuable information
for users, including reassurance for users that their sensitive, biometric data
stays on their personal device and is never stored or shared when creating or
using passkeys. We took this approach because most users found the convenience
aspect of passkeys appealing, but only a few took into account the biometric
element during testing.</p>
<h3 id="introducing-passkeys-when-its-relevant-to-the-user">Introducing passkeys when it's relevant to the user <a class="headline-link" href="https://web.dev/passkey-google-ux/#introducing-passkeys-when-its-relevant-to-the-user">#</a></h3>
<p>Google's heuristics carefully determine who will see the introductory screen.
Some of the factors are whether a user has two-step verification enabled and
whether they access that account regularly from the same device.</p>
<p>Users who are most likely to succeed with passkeys are selected first, and over
time more users will be introduced (though, anyone can get started at
<a href="http://g.co/passkeys" rel="noopener">g.co/passkeys</a> today).</p>
<p>Select users are prompted to create a passkey after signing in with a username
and password. There are a few reasons we chose this point in the user journey:</p>
<ul>
<li>The user has just signed in, they're aware of their credentials and second
step.</li>
<li>We are confident that the user is on their device–they just signed in, so it's
unlikely they walked away or put their device down.</li>
<li>Statistically, signing in isn't always successful the first time–so a message
around making it easier next time has tangible value.</li>
</ul>
<h3 id="positioning-passkeys-as-an-alternative-to-passwords-and-not-yet-a-replacement">Positioning passkeys as an alternative to passwords and not yet a replacement <a class="headline-link" href="https://web.dev/passkey-google-ux/#positioning-passkeys-as-an-alternative-to-passwords-and-not-yet-a-replacement">#</a></h3>
<p>Initial user research shows that many users still want passwords as a backup
sign-in method. And not all users will have the <a href="https://support.google.com/accounts/answer/13548313?hl=en&amp;sjid=17510595681178318776-NA" rel="noopener">technology necessary to adopt
passkeys</a>.</p>
<p>So while the industry, Google included, is moving towards a &quot;passwordless
future&quot;, Google is intentionally positioning passkeys as a simple and secure
<strong>alternative</strong> to passwords. Google's UI focuses on the benefits of passkeys
and avoids language that implies getting rid of passwords.</p>
<h2 id="the-creation-moment">The creation moment <a class="headline-link" href="https://web.dev/passkey-google-ux/#the-creation-moment">#</a></h2>
<p>When users choose to enroll, they'll see a browser-specific UI modal that
enables them to create a passkey.</p>
<p>The passkey itself is shown with the industry-aligned icon and the information
used to create it. This includes the display name (a friendly name for your
passkey, like your user's real name) and the username (a unique name on your
service–an email address can work great here). When it comes to working with the
passkeys icon, <a href="https://media.fidoalliance.org/wp-content/uploads/2023/05/FIDO-Alliance-UX-Guidelines-for-Passkey-Creation-and-Sign-ins.pdf" rel="noopener">the FIDO alliance recommends using the proven passkeys
icon</a>–and
encourages making it your own with customizations.</p>
<p>Passkeys icon is shown consistently across the user journey to create a
familiarity with what the user will see when using or managing the passkey. The
passkey icon is never presented without context or supporting material.</p>
<figure>
<img alt="When users create their passkey, they&#x27;ll see this page" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>When users create their passkey, they'll see this page.</figcaption>
</figure>
<p>Above, we outlined how the user and the platform work together to create a
passkey. When the user clicks &quot;Continue&quot; they'll be presented with a unique UI
depending on the platform.</p>
<p>With that in mind, we learned through internal research that a confirmation
screen once the passkey is created can be very helpful in terms of comprehension
and closure at this step of the process.</p>
<figure>
<img alt="Once the passkey has been created, users will see this page" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/sNqODRG8qqaGQc8ygbjO.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>Once the passkey has been created, users will see this page.</figcaption>
</figure>
<p>The confirmation screen is a deliberate ‘pause' to bookend the journey of
introducing a user to passkeys and going through the process of creating one of
their own. As it is (likely) the first time a user has engaged with passkeys,
this page aims to provide clear closure to the journey. We chose a standalone
page after trying some other tools like smaller notifications, and even a
post-creation email–simply to provide a structured, stable end to end
experience.</p>
<p>Once the user clicks &quot;Continue&quot; here, they're brought to their destination.</p>
<figure>
<img alt="When users sign in again, they&#x27;ll likely see this page" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/u7ugXsWYbGcylhCWZ21M.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>When users sign in again, they'll likely see this page.</figcaption>
</figure>
<h2 id="signing-in">Signing in <a class="headline-link" href="https://web.dev/passkey-google-ux/#signing-in">#</a></h2>
<p>Next time a user tries to sign in, they'll be greeted with this page. This uses
the same layout, illustration, and primary call to action to evoke the first
‘creation' experience outlined above. Once the user has made a choice to enroll
in passkeys, this page should feel familiar and they will recognize what steps
they need to take to sign in.</p>
<figure>
<img alt="The user will use this WebAuthn UI to sign in" decoding="async" height="600" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/kPbCZqaBDx5AFTZyi54a.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>The user will use this WebAuthn UI to sign in.</figcaption>
</figure>
<p>The same principle of familiarity applies here. Intentionally, this uses the
same iconography, illustration, layout and text. The text within the WebAuthn UI
is kept brief, broad, and re-usable–so everyone can use this both for
authentication and reauthentication.</p>
<h2 id="passkeys-management">Passkeys management <a class="headline-link" href="https://web.dev/passkey-google-ux/#passkeys-management">#</a></h2>
<p>Introducing a whole new page within the Google Account settings pages required
careful consideration to ensure a cohesive, intuitive, and consistent user
experience.</p>
<p>To achieve this, we analyzed the patterns regarding navigation, content,
hierarchy, structure, and established expectations that existed across the
Google Account.</p>
<figure>
<img alt="Passkeys management page in the Google Account" decoding="async" height="655" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format" srcset="https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/YLflGBAPWecgtKJLqCJHSzHqe2J2/C0xuS6j8vd98Y17jckE3.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>Passkeys management page in the Google Account.</figcaption>
</figure>
<h3 id="describe-passkeys-by-ecosystem">Describe passkeys by ecosystem <a class="headline-link" href="https://web.dev/passkey-google-ux/#describe-passkeys-by-ecosystem">#</a></h3>
<p>To create a high level category system that would be logical to understand we
settled on describing passkeys by
<a href="https://developers.google.com/identity/passkeys/supported-environments" rel="noopener">ecosystem</a>.
This way, a user could recognize where a passkey was created and where it is
used. Each identity provider (Google, Apple, and Microsoft) has a name for their
ecosystem, so we chose to use those (Google Password Manager, iCloud keychain,
and Windows Hello respectively).</p>
<p>To support this, we added additional metadata, such as when it was created, when
it was last used, and the specific OS that it was used on. In terms of user
management actions, the API only supports renaming, revoking, and creating.</p>
<p>Renaming allows users to assign personally meaningful names to passkeys, which
could help particular cohorts of users keep track and understand them more
easily.</p>
<p>Revoking a passkey doesn't delete it from the user's personal credential manager
(like Google Password Manager), but renders it unusable until it is set up
again. That's why we chose a cross, instead of a trash or delete icon, to
represent the action of revoking a passkey.</p>
<p>When describing the action of adding a passkey to their account, the phrase
&quot;Create passkey&quot; resonated better with users compared to &quot;Add a passkey.&quot; This
is a subtle language choice to distinguish passkeys from tangible, hardware
security keys (though it should be noted that <a href="https://support.google.com/accounts/answer/13548313?hl=en&amp;sjid=17510595681178318776-NA" rel="noopener">passkeys can be stored on some
hardware security
keys</a>).</p>
<h3 id="providing-additional-content">Providing additional content <a class="headline-link" href="https://web.dev/passkey-google-ux/#providing-additional-content">#</a></h3>
<p>Internal research showed that using passkeys is a relatively seamless and
familiar experience. However as with any new technology, there are lingering
questions and concerns that will come up for some users.</p>
<p>How the technology works behind the screen lock, what makes it more secure, and
the most common &quot;what if&quot; scenarios Google came across in testing are addressed
in <a href="https://support.google.com/accounts/answer/13548313?hl=en&amp;sjid=17510595681178318776-NA" rel="noopener">Google's passkey Help Center
content</a>.
Having support content ready with launch of passkeys is critical for an easy
transition for users on any site.</p>
<h3 id="falling-back-from-passkeys">Falling back from passkeys <a class="headline-link" href="https://web.dev/passkey-google-ux/#falling-back-from-passkeys">#</a></h3>
<p>Reverting to the old system is as simple as clicking &quot;try another way&quot; when a
user is asked to authenticate with a passkey. Additionally, exiting the WebAuthn
UI will start users on a path to try their passkey again, or sign into their
Google Account in traditional ways.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/passkey-google-ux/#conclusion">#</a></h2>
<p>We are still in the early days of passkeys, so when designing the user
experience keep a few principles in mind:</p>
<ul>
<li>Introduce passkeys when it's relevant to the user.</li>
<li>Highlight the benefits of passkeys.</li>
<li>Use opportunities to build familiarity the concept of passkeys.</li>
<li>Position passkeys as an alternative to passwords and not a replacement.</li>
</ul>
<p>The choices we made for passkeys for Google Accounts were informed by best
practices and internal research and we'll continue to evolve the user experience
as we gain new insights from users in the real world.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[金字塔还是螃蟹？找到适合的测试策略]]></title>
            <link>https://web.dev/ta-strategies/</link>
            <guid>https://web.dev/ta-strategies/</guid>
            <content:encoded><![CDATA[<p>Welcome back! In the <a href="https://web.dev/ta-types">last article</a>, we laid down lots of groundwork about how to approach the different testing types and what they contain, and we clarified the testing type definitions. Remember our little meme image from before? We wondered how all those testing types we learned about could work together.</p>
<img alt="A cupboard with two drawers you can open at the same time." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/n3LPuwApNcCRT5S3zaoq.jpeg?auto=format&w=1600 1600w" width="800" />
<p>So next up, we will learn exactly that. This article will give an introduction on how to combine these testing types into a reasonable strategy that matches your project.</p>
<p>I want to share some recommendations on which testing strategies might fit your project, depending on its size. Let’s begin with a short overview—an attempt to generalize based on my own experience, so it can naturally deviate from your use case. I hope this is a good starting point:</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th>
          Application size
        </th>
        <th>
          Team composition
        </th>
        <th>
          Reliance on manual testing
        </th>
        <th>
          Testing strategy
        </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Small</td>
        <td>Developers only</td>
        <td>High</td>
        <td>Testing Ice Cone<br />Testing Crab</td>
      </tr>
      <tr>
        <td>Small</td>
        <td>High</td>
        <td>Developers & QA engineers</td>
        <td>Testing Ice Cone<br />Testing Crab</td>
      </tr>
      <tr>
        <td>Small</td>
        <td>Developers only</td>
        <td>Low</td>
        <td>Test Pyramid</td>
      </tr>
      <tr>
        <td>Large</td>
        <td>Developers only</td>
        <td>High</td>
        <td>Testing Trophy<br />Testing Diamond</td>
      </tr>
      <tr>
        <td>Large</td>
        <td>Developers & QA engineers</td>
        <td>High</td>
        <td>Testing Trophy<br />Testing Crab</td>
      </tr>
      <tr>
        <td>Large</td>
        <td>Developers only</td>
        <td>Low</td>
        <td>Testing Trophy<br />Testing Honeycomb</td>
      </tr>
    </tbody>
  </table>
</div>
<p>How did I come to the conclusions pictured in this table? What are the testing strategies mentioned? Let’s take a closer look to discover the answers.</p>
<h2 id="determine-testing-goals-what-do-we-want-to-achieve-with-these-tests">Determine testing goals: What do we want to achieve with these tests? <a class="headline-link" href="https://web.dev/ta-strategies/#determine-testing-goals-what-do-we-want-to-achieve-with-these-tests">#</a></h2>
<p>Before we can start building a good strategy, we need to find out where we want to go. What is our goal with testing? When do we consider that our application has been sufficiently tested?</p>
<p>Achieving high test coverage is often viewed as the ultimate goal for developers when it comes to testing. But is it always the best approach? In my opinion, there's a more critical factor to consider when deciding a testing strategy—serving our users’ needs.</p>
<p>As well as our role as developers, we all also use many other applications and devices. In this respect, we are the users and rely on all these systems to “just work”—that means we rely on countless developers to do their best to make their applications work. To turn this back around, as developers, we want to live up to this trust. So our first goal—whatever the project size—should always be to ship working software and thus serve our users. This means we must focus on our users' needs, especially in our tests. <a href="https://kentcdodds.com/about" rel="noopener">Kent C. Dodds</a> sums it up very well in <a href="https://kentcdodds.com/blog/static-vs-unit-vs-integration-vs-e2e-tests" rel="noopener">his post</a>:</p>
<blockquote>
  <p>
    The more your tests resemble the way your software is used, the more confidence they can give you.
  </p>
  <cite>
    by Kent C. Dodds
  </cite>
</blockquote>
<p>And I think this nails it. He describes it as becoming more confident in our tests. The closer we get to the users via choosing the corresponding testing type, the more confident we can trust our tests to have valid results. Or in other words, the higher up we climb the pyramid, the more confident we get. But wait, what is the pyramid? Don’t worry: we’ll cover this next.</p>
<h2 id="determining-test-strategies-how-to-choose-a-testing-strategy">Determining test strategies: How to choose a testing strategy <a class="headline-link" href="https://web.dev/ta-strategies/#determining-test-strategies-how-to-choose-a-testing-strategy">#</a></h2>
<p>Remember, as a first step, we want to determine which parts of our requirements need to be insured to be fulfilled, and how we want to achieve that. The goal behind that is to find out which types of testing to use, and then, with which granularity of testing we can reach the most confidence while also keeping an efficient cost structure. Many people approach this topic by using metaphors. Let’s take a deeper look at the most common ones, starting with the well-known classic.</p>
<img alt="A lot of shapes like pyramid, diamonds, ice cone, honeycombs and a trophy; representing test strategies." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/btUEUtD2bmqNwX2DcH4j.jpeg?auto=format&w=1600 1600w" width="800" />
<h3 id="the-classic-the-test-pyramid">The classic: The test pyramid <a class="headline-link" href="https://web.dev/ta-strategies/#the-classic-the-test-pyramid">#</a></h3>
<p>You will probably encounter the test automation pyramid as your initial metaphor as soon as you look up testing strategies. Mike Cohn introduced this concept in his book <em>Succeeding with Agile</em>. Later, the concept was expanded upon as the &quot;<a href="https://martinfowler.com/articles/practical-test-pyramid.html" rel="noopener">Practical Test Pyramid</a>&quot; by Martin Fowler. The visual representation of this pyramid is as follows:</p>
<img alt="The test pyramid." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/iEtr9phjNjENxQlFfJYv.jpeg?auto=format&w=1600 1600w" width="800" />
<p>As shown in this drawing, the test pyramid consists of three layers:</p>
<ol>
<li>
<p><strong>Unit</strong>. You find these tests on the base layer of the pyramid because they are fast execution and simple to maintain. This is due to their isolation and targeting of the most minor units. See this as an example of a typical <a href="https://github.com/leichteckig/phpmagazin-jest-example/blob/main/product.test.js" rel="noopener">unit test</a> testing a very small product.</p>
</li>
<li>
<p><strong>Integration</strong>. This is in the middle of the pyramid, as it is still acceptable when it comes to speed in execution but brings you the confidence of being closer to the user than unit tests can be. An example of an integration type test is an <a href="https://github.com/cypress-io/cypress-realworld-app/blob/develop/cypress/tests/api/api-users.spec.ts" rel="noopener">API test</a>; <a href="https://github.com/leichteckig/nuxt-leichteckig/blob/main/test/components/MediaGrid.spec.js" rel="noopener">component tests</a> can also be considered this type.</p>
</li>
<li>
<p><strong>E2E tests</strong> (also called <strong>UI tests</strong>). As we have seen, these tests simulate a genuine user and their interaction. These tests need more time to be executed and thus are more expensive—being placed at the top of the pyramid.</p>
</li>
</ol>
<h3 id="confidence-versus-resources">Confidence versus resources <a class="headline-link" href="https://web.dev/ta-strategies/#confidence-versus-resources">#</a></h3>
<p>As briefly covered already, the order of the layers is no coincidence. They show the priorities and the corresponding costs of the layers—thus giving you a clear picture of how many tests you should write from each layer. We have already seen this in the definition of the testing types.</p>
<p>As E2E tests, for example, are closest to our users, they give us the highest confidence that our application is working as intended. However, due to the complete application stack being present, and the computer simulation of a real user, they are potentially also the most expensive. So the confidence is in direct competition with the resources we need to execute the tests.</p>
<img alt="The test pyramid with arrows showing the direction of confidence and resources required for different testing types." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/DT57buwCB4uDyJp61Rzb.jpeg?auto=format&w=1600 1600w" width="800" />
<p>The pyramid tries to solve this competition by advising you to focus more on unit tests and strictly prioritize the cases covered by E2E tests: for example, your most crucial user journeys or the most vulnerable to defects. As Martin Fowler emphasizes, the two most essential points in Cohn’s pyramid are as follows:</p>
<ol>
<li>Write tests with different granularity.</li>
<li>The more high level you get, the fewer tests you should have.</li>
</ol>
<h2 id="pyramid-evolved-adaptations-of-the-test-pyramids">Pyramid evolved! Adaptations of the test pyramids <a class="headline-link" href="https://web.dev/ta-strategies/#pyramid-evolved-adaptations-of-the-test-pyramids">#</a></h2>
<p>For some years, discussions have revolved around the pyramid. The pyramid seems to oversimplify testing strategies, leaves out a lot of testing types, and no longer fits all real-world projects. Consequently, it may mislead us. So, has the pyramid fallen out of shape?
To answer this question, let’s take a look at the following <a href="https://twitter.com/rauchg/status/807626710350839808" rel="noopener">quote</a> from <a href="https://rauchg.com/about" rel="noopener">Guillermo Rauch</a>:</p>
<blockquote>
  <p>
    Write tests. Not too many. Mostly integration.
  </p>
  <cite>
    by Guillermo Rauch
  </cite>
</blockquote>
<p>It’s one of the most commonly cited quotes on this subject, so let’s break it down:</p>
<ul>
<li>Write tests: Not only because it builds trust, but also because it saves time in maintenance.</li>
<li>Not too many: 100% coverage is not always good, because then your testing is unprioritized and there will be a lot of maintenance.</li>
<li>Mostly integration: Here again the emphasis is on integration tests: they have the most business value by giving you a daily high confidence level while maintaining a reasonable execution time.</li>
</ul>
<p>This leads us to overthink the testing pyramid and shift our focus to integration testing. Over the last few years, many adaptations have been raised, so let’s look at the most common ones.</p>
<h3 id="test-diamond">Test diamond <a class="headline-link" href="https://web.dev/ta-strategies/#test-diamond">#</a></h3>
<p>The first adaptation I want to showcase tackles the over-emphasis on unit testing, as seen in the test pyramid. Imagine this situation: you have reached 100% coverage on unit tests. However, in the next refactoring, many of these unit tests will need to be updated, and you might be tempted to skip them. So they erode.</p>
<p>As a result, and together with the higher priority on integration testing, the following shape may arise:</p>
<img alt="The test diamond." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/vSFAkoSqbL4p984xf48k.jpeg?auto=format&w=1600 1600w" width="800" />
<p>The shape of the test pyramid has evolved more into a diamond. You can see the three layers from before, but with a different size and—in the case of the unit layer—with a slightly different shape:</p>
<ul>
<li>Unit: Write unit tests the way we defined them before. However, we’ll consider that they erode, so we’ll prioritize and cover the most critical cases here.</li>
<li>Integration: The integration tests we know, testing the combination of single units.</li>
<li>E2E: This layer handles the UI tests similar to the test pyramid. Take care to only write E2E tests for the most critical test cases.</li>
</ul>
<h3 id="testing-honeycomb">Testing honeycomb <a class="headline-link" href="https://web.dev/ta-strategies/#testing-honeycomb">#</a></h3>
<p>There is another adaptation similar to the test diamond but further specialized for microservices-based software systems. The testing honeycomb is another visual metaphor for the granularity/scope of and amounts of tests to write for a microservices-based software system. It's an adaptation of the traditional test pyramid specifically for <a href="https://notes.paulswail.com/public/Testing+microservices" rel="noopener">testing microservices</a>, introduced by <a href="https://engineering.atspotify.com/2018/01/testing-of-microservices/" rel="noopener">Spotify</a>. Due to their small size, the most considerable complexity in a microservice is not within the service itself, but in how it interacts with others. So a testing strategy for a microservice should primarily focus on integration tests.</p>
<img alt="The testing honeycomb." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/mrM4QK1kEZgvRvltyiMn.jpeg?auto=format&w=1600 1600w" width="800" />
<p>This way, a shape is formed that reminds us of a honeycomb, thus the name. In it, the following layers are used:</p>
<ul>
<li>Integrated tests: The article by Spotify uses a quote from <a href="https://blog.thecodewhisperer.com/permalink/integrated-tests-are-a-scam" rel="noopener">J. B. Rainsberger</a> to define this layer: “A test that will pass or fail based on the correctness of another system.” This means these tests have external dependencies that we need to consider, and vice versa—we could break the tests of other systems. Similar to E2E tests in other metaphors, we should use them carefully for the most essential cases only.</li>
<li>Integration tests: Similar to other adaptations, we should focus on this layer—containing tests to verify the correctness of our service in a more isolated fashion, but still in combination with other services. That means the tests will include some other systems too: focusing on the interaction points, for example, via API tests.</li>
<li>Tests on implementation details: These tests can resemble unit tests—this means on parts of the code that are naturally isolated and thus have their own internal complexity.</li>
</ul>
<p>If you want to find out more about this testing strategy, I advise you to read the post <a href="https://martinfowler.com/articles/2021-test-shapes.html" rel="noopener">comparing the test pyramid to the honeycomb</a> by Martin Fowler, alongside the <a href="https://engineering.atspotify.com/2018/01/testing-of-microservices/" rel="noopener">original article from Spotify</a>.</p>
<h3 id="testing-trophy">Testing trophy <a class="headline-link" href="https://web.dev/ta-strategies/#testing-trophy">#</a></h3>
<p>Alright, we already see a particular focus on integration tests. However, another type we mentioned in the previous article is not testing in theory but is still an important aspect we should consider in a testing strategy. I’m talking about static analysis, which is missing in the test pyramid and in most of the adaptations we have seen until now. There’s one adaptation, though, which takes static analysis into account while maintaining the focus on integration tests. It’s called the testing trophy, originating from the earlier quote by Guillermo Rauch and developed by Kent C. Dodds:</p>
<img alt="The testing trophy." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/ULNWIc7KY4jVjxPW5CdX.jpeg?auto=format&w=1600 1600w" width="800" />
<p>The testing trophy is a metaphor depicting the granularity of tests in a slightly different way, distributing your tests into the following four testing types:</p>
<ul>
<li><strong>Static analysis</strong> plays a vital role in this metaphor. This way, you will catch typos, type errors, and other bugs by merely running the debugging steps already outlined.</li>
<li><strong>Unit tests</strong> should ensure that your smallest unit is appropriately tested, but the testing trophy won’t emphasize them to the same extent as the test pyramid.</li>
<li><strong>Integration</strong> is the main focus as it balances out the cost and the higher confidence in the best way, as with other adaptations.</li>
<li><strong>UI tests</strong>, including E2E and visual tests, are at the top of the testing trophy, similar to their role in the test pyramid.</li>
</ul>
<p>To read more about the testing trophy, I can highly recommend the <a href="https://kentcdodds.com/blog/static-vs-unit-vs-integration-vs-e2e-tests" rel="noopener">blog post by Kent C. Dodds</a> on this subject.</p>
<h2 id="some-more-ui-focused-approaches">Some more UI-focused approaches <a class="headline-link" href="https://web.dev/ta-strategies/#some-more-ui-focused-approaches">#</a></h2>
<p>That’s all well and good. However, no matter if we call our strategy a “pyramid”, “honeycomb,” or “diamond”, there’s still something missing. While test automation is valuable, it's important to remember that manual testing is still essential. Automated testing should alleviate routine tasks, freeing testers to concentrate on crucial areas. Rather than replace manual testing, automation should complement it. Is there a way to integrate manual testing with automation for optimal results?</p>
<h3 id="testing-ice-cone-and-testing-crab">Testing ice cone and testing crab <a class="headline-link" href="https://web.dev/ta-strategies/#testing-ice-cone-and-testing-crab">#</a></h3>
<p>There are indeed two adaptations of the testing pyramid that focus more on these UI-focused ways of testing. Both share the advantage of high confidence, but naturally—due to the slower test execution—they are more costly.</p>
<p>The first one—the test ice cone, also known as the testing pizza if you leave out the manual testing step—looks like the pyramid in reverse.</p>
<img alt="The testing ice cone." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/QdBKM36jvq93jrERrSCP.jpeg?auto=format&w=1600 1600w" width="800" />
<p>As a result, the following layers will be showcased with the following granularity: the greater focus is on manual or UI testing, with the least focus on unit testing. It often happens with projects where the developers started work with only a few thoughts on testing. However, this testing strategy is considered an anti-pattern and rightfully so—because of its high costs in resources and manual work.</p>
<p>Similar to the test ice cone, but with a more drawn-out focus on E2E and visual testing, is the testing crab:</p>
<img alt="The testing crab." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/uY4XiFIldA1JySM9ZbHD.jpeg?auto=format&w=1600 1600w" width="800" />
<p>This testing strategy includes one more aspect: it should verify that our application functions and looks good. So this is the first testing strategy that highlights the importance of <a href="https://docs.cypress.io/guides/tooling/visual-testing" rel="noopener">visual testing</a>, which we also briefly defined in the last article. Integration testing, divided into component and API testing, moves further into the background, and unit testing plays an even more minor role here. You can find further details on this testing strategy in this <a href="https://changelog.com/posts/the-testing-pyramid-should-look-more-like-a-crab" rel="noopener">article on the testing crab</a>.</p>
<p>While being more costly, these two testing strategies have their place: for example, in smaller projects where fewer tests are needed, or less complexity needs to be covered. In this case, a full-blown testing strategy focusing on integration testing might be over-engineered.</p>
<h2 id="practical-advice-lets-strategize">Practical advice: Let’s strategize! <a class="headline-link" href="https://web.dev/ta-strategies/#practical-advice-lets-strategize">#</a></h2>
<p>So we have now learned about the most common testing strategies. We started with the classic—the test pyramid—and got to know its many adaptations. Now we need to evaluate them for our product and decide which might be the best for our use case. As I briefly mentioned at the beginning of this article, the answer to this question should start with everyone’s favorite response (although it’s no less accurate)—<strong>It depends</strong>.</p>
<img alt="It depends." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/u1yCzUoUXkXAHUCgyrz2.jpeg?auto=format&w=1600 1600w" width="800" />
<p>Choosing the most suitable testing strategy from the ones described—and even the ones we have left out—depends on your application. It needs to suit your architecture, your requirements, and last but not least, your users and their requirements. And this might differ from application to application. That’s totally fine: remember—our most important goal is to serve our users, not a textbook definition.</p>
<p>In reality, you can see this very clearly, as teams sometimes need to stop sticking to the textbook definitions of these strategies. Tests themselves are sometimes really difficult to separate out and define individually. Even Martin Fowler himself emphasizes the <a href="https://martinfowler.com/articles/2021-test-shapes.html" rel="noopener">positive aspect of differing definitions</a>, such as in the case of unit tests. As <a href="https://justin.searls.co/about/" rel="noopener">Justin Searls</a> states correctly in <a href="https://twitter.com/searls/status/1393385209089990659" rel="noopener">his tweet</a>:</p>
<blockquote>
  <p>
    […] write expressive tests that establish clear boundaries, run quickly & reliably, and only fail for useful reasons.
  </p>
  <cite>
    by Justin Searls
  </cite>
</blockquote>
<p>Focus on the tests that report actual errors which a user might encounter, and don’t get distracted from your goal. Tests should be designed to benefit the user, not just provide 100% coverage or to debate which percentage of which testing type to write.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> This blog post was written by Ramona, with input and review from <a href="https://web.dev/authors/jecelynyeen/">Jecelyn Yeen</a> (<a href="https://twitter.com/jecfish">Twitter</a>), and <a href="https://www.linkedin.com/in/michael-hablich-2128646/">Michael Hablich</a> (<a href="https://twitter.com/MHablich">Twitter</a>). Special thanks to <a href="https://www.linkedin.com/in/sofia-yemelianova/">Sofia Emelianova</a> for supporting the publication process. </div></aside>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[后退/前进缓存如何帮助 Yahoo!日本新闻 移动收入增加 9%]]></title>
            <link>https://web.dev/yahoo-japan-news-bfcache/</link>
            <guid>https://web.dev/yahoo-japan-news-bfcache/</guid>
            <content:encoded><![CDATA[<blockquote>
<p><a href="https://web.dev/bfcache/">Back/forward cache</a> (or bfcache) is a browser optimization that enables instant back and forward navigation. It significantly improves the browsing experience for users, especially for websites that involve many back and forth navigations.</p>
<p><cite>web.dev article on bfcache </cite></p>
</blockquote>
<p>Yahoo! JAPAN News, one of the most popular news platforms in Japan, drove a concerted effort to improve their bfcache hit rate and saw significant user experience and business improvements as a result. Specifically, the results of the A/B test they conducted showed that pages that use bfcache had a <strong>9% increase in ads revenue</strong>.</p>
<p>This case study will explain how Yahoo! JAPAN News removed the blockers for bfcache, and how bfcache drastically improved the user experience.</p>
<h2 id="removing-blockers-for-bfcache">Removing blockers for bfcache <a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#removing-blockers-for-bfcache">#</a></h2>
<p>bfcache has been available since Chrome 86, and is also available on all modern browsers. However, taking full advantage of bfcache requires removing potential blockers on one's website. Some major blockers that Yahoo! JAPAN News faced were:</p>
<ol>
<li>Use of <code>unload</code> handlers</li>
<li>Use of the <a href="https://developer.mozilla.org/docs/Web/HTTP/Headers/Cache-Control#no-store" rel="noopener"><code>no-store</code> directive</a> on <code>Cache-control</code> headers</li>
</ol>
<p>You can check what major blockers there are for your website by going to <strong>Chrome Dev Tools &gt; Applications &gt; Back/forward Cache</strong> (<a href="https://web.dev/bfcache/#test-to-ensure-your-pages-are-cacheable">more details</a>), or by using the <a href="https://developer.chrome.com/docs/web-platform/bfcache-notrestoredreasons/" rel="noopener"><code>notRestoredReasons</code> API</a> to get a more comprehensive view of blockers based on actual usage in the field.</p>
<p>Here's how Yahoo! JAPAN News has removed their blockers:</p>
<ul>
<li><strong>Unload Handlers:</strong> Use the <code>pagehide</code> event instead of <code>unload</code> event, as the <code>unload</code> event is <a href="https://web.dev/bfcache/#never-use-the-unload-event">very unreliable</a>. Also, <code>permission-policy: unload</code> was <a href="https://chromestatus.com/feature/5579556305502208" rel="noopener">launched in Chrome 115</a> so that the websites can reliably remove <code>unload</code> handlers for specific origins. Chrome is also planning to <a href="https://github.com/fergald/docs/blob/master/explainers/permissions-policy-deprecate-unload.md#logistics-of-deprecation" rel="noopener">gradually deprecate <code>unload</code> handlers</a>.</li>
<li><strong><code>Cache-control: no-store</code></strong> (or CCNS for short): Changing the <code>Cache-control</code> header from <strong><code>no-store</code></strong> to <strong><code>no-cache</code></strong> can enable bfcache. Chrome is also planning to start <a href="https://chromestatus.com/feature/6705326844805120" rel="noopener">caching for bfcache even with a <code>no-store</code> header in certain circumstances</a>.</li>
</ul>
<p>CCNS is intended for pages that should never be cached under any circumstances. This comes with the caveat that any page with CCNS will not be able to benefit from any caching technology, including CDN edge servers and local caches.</p>
<p>If you have a CCNS header, this is a great opportunity to discuss what the right <code>Cache-control</code> strategies are for your website. Here are the main differences between <code>no-store</code> and <code>no-cache</code>.</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th><code>Cache-control: <strong>no-store</strong></code></th>
        <th><code>Cache-control: <strong>no-cache</strong></code></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          <ul>
            <li>The response is not allowed to be stored in caches.</li>
            <li>Consequently, the response is fetched in full on every request.</li>
            <li>This should be used for private responses.</li>
          </ul>
        </td>
        <td>
          <ul>
            <li>The response is allowed to be stored in caches as long as it's revalidated with the server before each use.</li>
            <li>This should be public responses you want revalidated every time (for example, the home page of a news website - though even then a very short caching time can improve performance and offload work from the main servers).</li>
          </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<p>If you are interested in learning more about <code>Cache-control</code> options, <a href="https://web.dev/http-cache/?hl=en#flowchart">this flowchart</a> is a great help.</p>
<h2 id="impact-of-bfcache-in-numbers">Impact of bfcache in numbers <a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#impact-of-bfcache-in-numbers">#</a></h2>
<p>To measure the impact of bfcache, Yahoo! JAPAN News conducted an A/B test for 2 weeks, where they served a version of their pages with their bfcache fixes to one group, and a version with pages ineligible for bfcache to another. They picked the URL paths with a significant amount of traffic so that the test could achieve meaningful results. There were no other visual or functional difference between the 2 versions.</p>
<p>Here's a video comparing the website with bfcache and without bfcache. You can see that the website with bfcache enabled loads significantly faster during a back or forward navigation.</p>
<style>
  .bfcache-video video {
    height: auto;
  }
</style>
<figure class="bfcache-video">
  <video autoplay="" controls="" height="800" loop="" muted="" width="800" style="--vid-width: 800; --vid-height: 800">      <source src="https://storage.googleapis.com/web-dev-uploads/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/2qqiTs9XuedWvtjfKuMu.mp4" type="video/mp4" />    </video>
</figure>
<p>What's really promising is that the group with bfcache enabled had a <strong>significant increase in page views and ads revenue</strong>, especially on mobile devices.</p>
<p>Here are details about the impact observed by Yahoo! JAPAN News with their bfcache A/B test. (Further information can be found in <a href="https://techblog.yahoo.co.jp/entry/2023072430429932/" rel="noopener">their case study article</a>).</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      </thead><td>
        <strong>Metrics</strong>
      </td>
      <td>
        <strong>Uplift % (mobile)</strong>
      </td>
      <td>
        <strong>Uplift % (desktop)</strong>
      </td>
    
    <tbody>
      <tr>
        <td>bfcache hit rate</td>
        <td>
          <strong>+54.03 points</strong> (0.04% → 54.07%)
        </td>
        <td>+47.28 points (0.02% → 47.30%)</td>
      </tr>
      <tr>
        <td>Page views</td>
        <td>
          <strong>+2.26%</strong>
        </td>
        <td>+0.65%</td>
      </tr>
      <tr>
        <td>Ads revenue</td>
        <td>
          <strong>+9.0%</strong>
        </td>
        <td>+0.6%</td>
      </tr>
    </tbody>
  </table>
</div>
<p>When back/forward navigations between pages become instantaneous with bfcache, users tend to stay on pages longer, thus increasing ad views, leading to an increase of ad revenue.</p>
<h2 id="bfcache-enhances-seamless-user-experience-on-the-website">bfcache enhances seamless user experience on the website <a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#bfcache-enhances-seamless-user-experience-on-the-website">#</a></h2>
<p>When pages load instantly, <strong>navigations feel more seamless.</strong></p>
<p>In Yahoo! JAPAN News, one of the major user journey is as follows:</p>
<ol>
<li>Go to the article list</li>
<li>Click on one article to read</li>
<li>Go back to the article list</li>
<li>Click on another article to read</li>
</ol>
<p>Before bfcache, when users finished reading an article (step 2), they had to wait for the article list page to load again. This could be a friction factor for users who just want to go back to the article list to pick out another article to read.</p>
<p>Another source of friction during backward navigation was the scroll position. In practice, the browser tries to restore the scroll position when a backward navigation happens. However, because of dynamically-added ads or other layout changes, the scroll position often gets incorrectly restored, which could cause users to lose their bearings or even leave the page. This is never an issue when a backward navigation is powered by bfcache: the scroll position is immediately and correctly restored.</p>
<figure>
  <img alt="Two filmstrips of a backward navigation from an article to the article listing page. The top is a filmstrip of the process being handled with bfcache which takes 0.3 seconds, whereas the bottom is of the same process being handled without bfcache, which takes 3.3 seconds." decoding="async" height="343" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WlJn1GZnDrSLpEPPHWAn.png?auto=format&w=1600 1600w" width="800" />
</figure>
<p>Now with bfcache, the friction in the user journey is gone—users can instantly navigate back to the article list page and pick another article to read without having to wait for the article list page to load.</p>
<p>The same thing happens when users browse from one article directly to another and back:</p>
<figure>
  <img alt="An animated image showing the backward navigation flow from an article to the article listing page with and without bfcache. With bfcache, the backward navigation is not only faster, but the scroll position is accurately maintained. Without bfcache, these guarantees cannot be made." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pk7QmKzBA49ADdcJGE7q.gif?auto=format&w=1600 1600w" width="800" />
</figure>
<p>In a nutshell, the benefits of using bfcache for Yahoo! JAPAN News includes:</p>
<ul>
<li>Increased pageviews: Users were more likely to navigate within the website when pages were cached with bfcache.</li>
<li>Increased revenue: As a result of increased pageviews per session, ads impression increased, which resulted in a 9% increase in revenue on mobile compared with the test group without bfcache.</li>
</ul>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/yahoo-japan-news-bfcache/#conclusion">#</a></h2>
<p>In short, bfcache not only makes your website instant, but can also reduce friction in overall user experience and increase engagement within your website.</p>
<p>The Chrome team is continually looking at bfcache blockers—especially the two reasons listed in this article as they are common reasons bfcache is not used. In the future, these may not prevent bfcache usage, but there's no need to wait until then. You can benefit from bfcache by looking at your bfcache blockers and avoiding these common, and other less common, patterns.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[三种常见的测试自动化类型]]></title>
            <link>https://web.dev/ta-types/</link>
            <guid>https://web.dev/ta-types/</guid>
            <content:encoded><![CDATA[<p>We've all been there: what is a recurring coding meme that happens all too often in real life?
<img alt="A cupboard with two drawers you cannot open at the same time." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/yl1OSGuWVIOsgLO6odFZ.jpeg?auto=format&w=1600 1600w" width="800" /></p>
<p>This meme sums it up quite nicely: each drawer works perfectly well individually, but in combination with the other drawer, they block each other and fail to function. You want both drawers to work well with each other and be operable at the same time.</p>
<img alt="The same cupboard but with two drawers you can open at the same time." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/2PY6rfmGkB26vX3qIbsj.jpeg?auto=format&w=1600 1600w" width="800" />
<p>Apply this to web development: you wrote some tests, maybe even achieved 100% test coverage, but your application still needs to work once other parts fall into place. The units may work well on their own but not in relation to each other. Writing some tests is crucial but it's only one part of the ideal test setup for your project. As a very first step, you need to determine what parts of the application quality you need to ensure and how you can achieve that.</p>
<p>Simply put, you need a plan before you start writing the actual test code. To approach the topic of how to test practically, let's start with a clean slate and answer two basic questions:</p>
<ul>
<li>How do you want to test?</li>
<li>What do you want to test?</li>
</ul>
<p>This article focuses on the general things you need to know to answer the first question. To start from a common ground, let's first learn what testing modes exist and then focus on the common types of testing. In later articles, we will answer the second question, combine the answers, and find the testing strategy that works best for your project. Let's go! 🙌</p>
<h2 id="start-with-the-basics-general-testing-modes">Start with the basics: General testing modes <a class="headline-link" href="https://web.dev/ta-types/#start-with-the-basics-general-testing-modes">#</a></h2>
<p>When answering the question of how to test, the first point to clarify is very abstract. Should you test manually or let a computer take over? It's important, however, not to fall into binary thinking here.</p>
<h3 id="manual-testing-versus-automated-testing">Manual testing versus automated testing <a class="headline-link" href="https://web.dev/ta-types/#manual-testing-versus-automated-testing">#</a></h3>
<p>If you ask quality assurance engineers to define testing, they will probably break it down into two &quot;modes&quot; first:</p>
<ul>
<li><strong>Manual testing</strong>. This is a typical testing method conducted by actual people. A quality assurance engineer click through the application, check if it works and, at the same time, try to break it. The most common way is exploratory testing, where the engineer investigates the application using their knowledge of the application against a predefined path or checklist.</li>
<li><strong>Automated testing</strong>. This is a type of testing conducted by a computer. Quality assurance engineers implement it to automate away repetitive and monotonous tests.</li>
</ul>
<p>This series of guides will mostly focus on automated testing. However, you shouldn't focus on only one way of testing. Even if automation saves a lot of time and effort, humans and manual testing will always play a vital role. Rather, test automation should free up people to focus on exploratory testing and creative problem-solving. For example, ensuring the quality of user experiences or protecting the high-risk business logic. In other words, automation has your back. ❤️</p>
<h3 id="opaque-box-versus-clear-box">Opaque box versus clear box <a class="headline-link" href="https://web.dev/ta-types/#opaque-box-versus-clear-box">#</a></h3>
<p>So, you have defined the general modes of testing. However, that's not enough yet. To plan the testing strategy, there is one more question to answer: should you know how your application works under the hood or is it better to test without this knowledge? Depending on the answer, there are two procedures to choose from for deriving and selecting test cases:</p>
<ul>
<li><strong>Opaque box testing</strong> (or black box testing). It is based on analyzing a component or system's functional or non-functional requirements (specifications) without considering its internal structure.</li>
<li><strong>Clear box testing</strong> (or white box testing) is a procedure that takes into account the internal structure of said box. In other words, how your application works under the hood.</li>
</ul>
<p>Both procedures can be applied to manual and automated testing. However, some aspects of general testing modes may focus more on one of the two—we will cover that later. For now, let's further break down test automation into types.</p>
<h2 id="test-automation-types-how-do-you-want-to-test">Test automation types: How do you want to test? <a class="headline-link" href="https://web.dev/ta-types/#test-automation-types-how-do-you-want-to-test">#</a></h2>
<p>As you get closer to answering the &quot;how&quot; question, you have already decided to do some manual testing. However, choosing and applying test automation types is a bit more challenging. The types of automation testing are closely related to the metrics you want to create in your projects. So let's take a closer look at the most important ones.</p>
<p>As illustrated in the meme mentioned earlier, you have already come across two types: unit testing and integration testing. End-to-end testing is the third important one to consider. But that isn't all of them still. Let's take a closer look.</p>
<h3 id="unit-testing">Unit testing <a class="headline-link" href="https://web.dev/ta-types/#unit-testing">#</a></h3>
<p>Unit testing is a testing type in which minor testable parts or units of an application are individually and independently tested for proper operation. These units can vary in scope from functions, classes, or interfaces, to services or complete components. Their primary attributes are execution speed, isolation, and comfortable maintainability. If you want to dive deeper into unit testing, head over to this <a href="https://en.wikipedia.org/wiki/Unit_testing" rel="noopener">guide on unit testing</a>.</p>
<img alt="A simplified depiction of unit testing showing input and output." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/kVCbDIZN23OUGwOdpJmm.jpeg?auto=format&w=1600 1600w" width="800" />
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> Possible tools include but aren't limited to <a href="https://vitest.dev/">Vitest</a> and <a href="https://jestjs.io/">Jest</a>. </div></aside>
<h3 id="integration-testing">Integration testing <a class="headline-link" href="https://web.dev/ta-types/#integration-testing">#</a></h3>
<p>Integration testing focuses on interactions between components or systems. In other words, on how well they work together. Typical examples of integration tests are API or component tests.</p>
<img alt="A simplified depiction of integration testing showing how two unit working together." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/1dxHGzPGPDgkMqRMj46o.jpeg?auto=format&w=1600 1600w" width="800" />
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> The tools you may consider using are often the same as those mentioned in the <a href="https://web.dev/ta-types/#unit-testing">unit testing section</a> and can also include frameworks providing component testing, for example, <a href="https://webdriver.io/">WebdriverIO</a> and <a href="https://www.cypress.io/">Cypress</a>. </div></aside>
<h3 id="end-to-end-testing">End-to-end testing <a class="headline-link" href="https://web.dev/ta-types/#end-to-end-testing">#</a></h3>
<p>These tests are often called UI tests and this name explains their function even better. These tests interact with your application's UI, including the complete application stack, and test your application from one end to the other.</p>
<img alt="A simplified depiction of end-to-end testing showing a computer as a robot, looking at a workflow." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/9ZWWlop306SoGFP9rbeH.jpeg?auto=format&w=1600 1600w" width="800" />
<p>They resemble a system test if you refer to the theory of quality assurance. These tests simulate a genuine user and their interactions. End-to-end tests take more runtime because they involve the whole system and more runtime requires more computing power. As a result, this additional effort results in higher maintenance costs.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> The tools you might use for end-to-end testing include but aren't limited to <a href="https://webdriver.io/">WebdriverIO</a>, <a href="https://www.cypress.io/">Cypress</a>, <a href="https://playwright.dev/">Playwright</a>, <a href="https://www.selenium.dev/">Selenium</a>. </div></aside>
<h4 id="visual-ui-testing">Visual UI testing <a class="headline-link" href="https://web.dev/ta-types/#visual-ui-testing">#</a></h4>
<p>An interesting subcategory of UI tests is visual tests. These tests are extended end-to-end tests that provide a means to verify the visible output of an application. Such a test takes a screenshot after a change and another screenshot containing the “status quo” (or golden file), then provides those results to a human reviewer to inspect and check. In other words, it helps find “visual bugs” in the appearance of a page, beyond purely functional bugs and not explicitly written down into assertions.</p>
<h3 id="static-analysis">Static analysis <a class="headline-link" href="https://web.dev/ta-types/#static-analysis">#</a></h3>
<p>There's one more thing to introduce here: static analysis. It isn't a testing type in the textbook sense. However, it will be an essential aspect in quality assurance strategies later on. You can imagine it working like a spell check function: it scans your code for more significant defects and syntax errors without running the program, thus detecting code style issues. This simple measure can prevent many bugs. This is a good point to learn about Static Analysis if you want to get to know it in more detail.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> The tools you might use for static analysis include but aren't limited to <a href="https://eslint.org/">Eslint</a> and <a href="https://stylelint.io/">StyleLint</a>.  </div></aside>
<h2 id="testing-in-all-shapes-how-does-this-all-work-together">Testing in all shapes: How does this all work together? <a class="headline-link" href="https://web.dev/ta-types/#testing-in-all-shapes-how-does-this-all-work-together">#</a></h2>
<p>While searching for answers to all these questions, you might find a possible solution in some analogies. In the web and testing communities specifically, developers tend to use these analogies to give you an idea of how many tests you should use of which type.</p>
<img alt="A lot of shapes like pyramid, diamonds, ice cone, honeycombs and a trophy; representing test strategies." decoding="async" height="450" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format" srcset="https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=200 200w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=228 228w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=260 260w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=296 296w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=338 338w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=385 385w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=439 439w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=500 500w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=571 571w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=650 650w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=741 741w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=845 845w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=964 964w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/dPDCek3EhZgLQPGtEG3y0fTn4v82/a96diycjrTQ2nVRpVgWH.jpeg?auto=format&w=1600 1600w" width="800" />
<p>The following five strategies depicted in this image are the most common ones:</p>
<ul>
<li>Test Pyramid</li>
<li>Test Diamond</li>
<li>Test Ice Cone (also known as Test Pizza)</li>
<li>Test Honeycomb</li>
<li>Test Trophy</li>
</ul>
<p>This is truly a lot of information to process. How should you decide on a matching test strategy based on all this? Don't worry, we've got you covered. In the next article, we will discuss these different strategies in more detail and explain how to choose the best fit for your project. Stay tuned! 🔥</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> This blog post was written by Ramona, with input and review from <a href="https://web.dev/authors/jecelynyeen/">Jecelyn Yeen</a> (<a href="https://twitter.com/jecfish">Twitter</a>), <a href="https://www.linkedin.com/in/michael-hablich-2128646/">Michael Hablich</a> (<a href="https://twitter.com/MHablich">Twitter</a>), and <a href="https://www.linkedin.com/in/sofia-yemelianova/">Sofia Emelianova</a>. </div></aside>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[六月网络平台新功能]]></title>
            <link>https://web.dev/web-platform-06-2023/</link>
            <guid>https://web.dev/web-platform-06-2023/</guid>
            <content:encoded><![CDATA[<h2 id="stable-browser-releases">Stable browser releases <a class="headline-link" href="https://web.dev/web-platform-06-2023/#stable-browser-releases">#</a></h2>
<p>In June 2023 <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/114" rel="noopener">Firefox 114</a> became stable, so it's a single browser issue this month. Check out the beta browser releases section for details of several features that are about to become interoperable once those betas become stable.</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text"><p class="cluster color-state-bad-text"><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">   <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z"></path> </svg></span><strong>Caution</strong></p><div class=" flow"> We include browser compatibility data pulled from MDN in these posts which may not have been updated yet for very recent browser releases. The post will show the correct information as soon as it appears in the <a href="https://github.com/mdn/browser-compat-data/releases">browser-compat-data release</a>. </div></aside>
<h3 id="webtransport-api">WebTransport API <a class="headline-link" href="https://web.dev/web-platform-06-2023/#webtransport-api">#</a></h3>
<p>Firefox 114 includes the <a href="https://developer.mozilla.org/docs/Web/API/WebTransport_API" rel="noopener">WebTransport API</a>, a modern update to WebSockets providing support for multiple streams, unidirectional streams, and out-of-order delivery.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 97, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      97
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox preview, Preview</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="preview" title="Preview" aria-label="Preview">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 97, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
97
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/WebTransport#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="the-svg-crossorigin-attribute">The SVG <code>crossorigin</code> attribute <a class="headline-link" href="https://web.dev/web-platform-06-2023/#the-svg-crossorigin-attribute">#</a></h3>
<p>Firefox 114 also includes the <a href="https://developer.mozilla.org/docs/Web/SVG/Attribute/crossorigin" rel="noopener"><code>crossorigin</code> attribute</a>, on the <code>&lt;image&gt;</code> and <code>&lt;feImage&gt;</code> elements in SVG, provides support for configuration of the Cross-Origin Resource Sharing (CORS) requests for the element's fetched data. This works in the same way as the HTML <a href="https://developer.mozilla.org/docs/Web/HTML/Attributes/crossorigin" rel="noopener"><code>crossorigin</code></a> attribute.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="firefox">
<span class="visually-hidden">Firefox, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
</div>
<h2 id="beta-browser-releases">Beta browser releases <a class="headline-link" href="https://web.dev/web-platform-06-2023/#beta-browser-releases">#</a></h2>
<p>Beta browser versions give you a preview of things that will be in the next stable version of the browser. It's a great time to test new features, or removals, that could impact your site before the world gets that release. New betas are <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/115" rel="noopener">Firefox 115</a>, and <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 17</a> with <a href="https://developer.chrome.com/blog/chrome-115-beta/" rel="noopener">Chrome 115</a> and <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 16.6</a> still ongoing. These releases bring many great features to the platform. Check out the release notes for all of the details, here are just a few highlights.</p>
<p>Firefox 115 supports the CSS <a href="https://developer.mozilla.org/docs/Web/CSS/animation-composition" rel="noopener"><code>animation-composition</code></a> property. Once this version of Firefox becomes stable on July 4th, <code>animation-composition</code> will be supported in all three major engines. Learn more in the article <a href="https://developer.chrome.com/articles/css-animation-composition/" rel="noopener">Specify how multiple animation effects should composite with animation-composition</a>.</p>
<p>Also reaching interoperability with Firefox 115 are a set of methods for <code>Array</code> and <code>TypedArray</code>.  <code>Array.toReversed()</code>, <code>Array.toSorted()</code>, <code>Array.toSpliced()</code>, <code>Array.with()</code>, <code>TypedArrays.toReversed()</code>, <code>TypedArrays.toSorted()</code>, and <code>TypedArrays.with()</code> return a new array with elements that have been shallow copied.</p>
<p>There is a whole stack of new features and fixes in the Safari 17 beta. Safari 17 adds <a href="https://blog.tomayac.com/2023/06/07/web-apps-on-macos-sonoma-14-beta/" rel="noopener">Web Apps</a> to macOS Sonoma. This means you can add a website to the Dock from the File menu or Share Sheet, and it will open in its own window.</p>
<p>Safari 17 also brings some features to interoperable status—<a href="https://developer.mozilla.org/docs/Web/CSS/contain-intrinsic-size" rel="noopener"><code>contain-intrinsic-size</code></a>, <a href="https://developer.mozilla.org/docs/Web/CSS/@counter-style" rel="noopener"><code>@counter-style</code></a>, <a href="https://developer.mozilla.org/docs/Web/CSS/@font-face/size-adjust" rel="noopener">@font-face size-adjust</a>, and the <a href="https://developer.mozilla.org/docs/Web/CSS/@media/overflow-block" rel="noopener"><code>overflow-block</code></a> and <a href="https://developer.mozilla.org/docs/Web/CSS/@media/overflow-inline" rel="noopener"><code>overflow-inline</code></a> media features will be available in all major engines when Safari 17 ships.</p>
<p><em>Photo by <a href="https://unsplash.com/@rodrigospabreu" rel="noopener">Rodrigo Abreu</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[原始私有文件系统]]></title>
            <link>https://web.dev/origin-private-file-system/</link>
            <guid>https://web.dev/origin-private-file-system/</guid>
            <content:encoded><![CDATA[<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" style="enable-background:new 0 0 128 128" xml:space="preserve"><path d="M7.5 123.3c2.2 2.4 11.6-1.9 19-5.3C32 115.4 54 106.3 65 101.6c3-1.2 7.3-2.9 10.4-7 2.8-3.6 10-19-4.6-34.7-15-16-30.4-11.5-36.2-7.5A28.5 28.5 0 0 0 27.3 63c-5.2 11.6-12.7 32.9-15.7 41.3-2.3 6.1-6.4 16.5-4.1 19z" fill="currentColor"></path><path d="M18 86.8s.7 6.5 6.1 14.6c6.3 9.6 15 11.2 15 11.2l-5.8 2.4s-6.5-2-12.7-10.4c-3.8-5.3-5-11.6-5-11.6l2.3-6.2zm-5.6 15.4s1.5 5.6 4.7 9.7c3.8 5 8.6 6.5 8.6 6.5l-4.5 2s-3.3-.8-7-5.5c-2.9-3.5-3.7-7.6-3.7-7.6l1.9-5.1z" fill="currentColor"></path><path d="M10 116.4c-.2-.5-.2-1 0-1.4l25.4-53 4.2 16-26.8 38.7c-.7 1-2.3 1-2.8-.2z" style="opacity:.44" fill="currentColor"></path><path d="M41.6 83.2c12 14 25.5 12.2 30 8.6 4.5-3.5 8.1-15.6-3.7-29.3C55.3 48.2 41.3 52.2 38 55.3s-7.4 15.1 3.5 27.9z" style="fill: var(--color-state-good-bg);"></path><path d="M82.5 89c-4.3-3.7-6.6-3-9.7-1.8a26 26 0 0 1-18.9 0l2.6-6.2c5 1.7 8.7 1 12-1 4-2.4 9.6-5.6 18.3 1.6 3.6 3 7.3 5.1 10 4.2 2-.7 3-3.6 3.6-6l.2-1.3c.4-3.7 1.2-11.6 7.1-15.7 6.4-4.3 13-4.3 13-4.3l1.2 12c-3-.5-5.2.1-7 1-6.7 3.8-.8 18.2-11.3 23-10.1 4.8-18.4-3.3-21-5.6zM45.4 73.7l-4.3-3.9c8-8.9 5.8-15.4 4.3-20.2A26.4 26.4 0 0 1 44 38.8c-3-3.8-4.4-7.8-4.5-8-1.9-5.7-.5-11.2 2.8-16.4C48.7 4 60.5 4 60.5 4l4 10.5c-3-.1-12.8 0-15.8 4.8-3.8 6-1.3 9.6-1.2 10 .8-1 1.5-1.7 2.2-2.3 4.8-4.2 9-4.8 11.6-4.6a11 11 0 0 1 7.6 4.2c2 2.7 3 6.2 2.3 9.4a11 11 0 0 1-5.8 7.4 16 16 0 0 1-13 1.5v.3l.6 2c1.8 5.4 5 14.1-7.6 26.5zm7.4-37.5c.5.4 1.1.8 1.8 1 2 .8 4.4.6 7-.8 1.5-.9 1.7-1.7 1.7-2 .2-.9 0-2-.7-2.8a2.8 2.8 0 0 0-2-1.2c-1.6-.2-3.6.8-5.6 2.6-1 .9-1.7 2-2.3 3.2zm10 39.1-6.2-.1s3-16.7 12.5-19.5c1.8-.5 3.7-1 5.7-1.3l4-.8c.1-1.6-.5-3.6-1.3-5.9-.6-1.7-1.2-3.5-1.5-5.5-.6-3.9.4-7.3 3-9.6 3-2.9 7.9-3.8 13.4-2.5 3.2.7 5.5 2.2 7.6 3.6 2.9 2 4.6 3 8.2.5 4.3-2.9-1.4-14.3-4.4-21l11.3-4.6c1.5 3.3 8.8 20.3 4 30a11.5 11.5 0 0 1-8.1 6.2c-8 1.8-12.6-1.3-16-3.6-1.6-1-3-1.9-4.6-2.3-10.6-3 4.2 12.6-2.7 19.6-4.2 4.2-14.4 5.3-15 5.5-6.6 1.6-10 11.3-10 11.3z" fill="currentColor"></path><path d="M44 38.8c-.2 2.2-.3 3.5.3 6.4 2.7 2 8.7 2 8.7 2l-.6-2v-.3c-6.1-3-8.4-6.1-8.4-6.1zm-12.5 9.8-10.3-5 5.1-7.5 8.2 5.4zm-15.2-14A26 26 0 0 1 5 28.9l5.2-6c1.6 1.2 5 3.5 7.2 3.8l-1.1 7.9zM25.6 21.3 18 18.8a18 18 0 0 0 .7-8.3l7.9-1.3c.6 4 .3 8.2-1 12zM73 15.3l7.9-1.7L83 23.9l-7.8 1.7zM92.5 17.8 87 12c2.8-2.8 3.5-6.3 3.5-6.4L98.4 7c-.1.6-1.1 6.3-6 10.9zM95.5 48.6l7-2.2 2.3 7.7-7 2.1zM97.5 113l-7.9-1c.3-2.7-1.8-6.2-2.4-7l6.4-4.8c.5.6 4.7 6.4 4 12.8zM120.4 102.9c-3-.5-6-.6-9.1-.5l-.3-8c3.5-.2 7 0 10.6.6l-1.2 7.9zM109.6 113.9l5.6-5.7 7.8 7.6-5.6 5.7zM93.1 63.3 99 70l-6.6 5.8-5.8-6.6z" fill="currentColor"></path></svg> </span><strong>Celebration</strong></p><div class=" flow"> The origin private file system allows web apps to store and manipulate files in their very own origin-specific virtual filesystem, including low-level file manipulation, byte-by-byte access, and file streaming. The origin private file system is supported across all major browsers. </div></aside>
<h2 id="browser-support">Browser support <a class="headline-link" href="https://web.dev/origin-private-file-system/#browser-support">#</a></h2>
<p>The origin private file system is supported by modern browsers and is standardized by the Web Hypertext Application Technology Working Group (<a href="https://whatwg.org/" rel="noopener">WHATWG</a>) in the <a href="https://fs.spec.whatwg.org/" rel="noopener">File System Living Standard</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 86, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 86, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.2, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.2
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/StorageManager/getDirectory#browser_compatibility" target="_blank">Source</a>
</div>
<h2 id="motivation">Motivation <a class="headline-link" href="https://web.dev/origin-private-file-system/#motivation">#</a></h2>
<p>When you think of files on your computer, you probably think about a file hierarchy: files organized in folders that you can explore with your operating system's file explorer. For example, on Windows, for a user called Tom, their To Do list might live in <code>C:\Users\Tom\Documents\ToDo.txt</code>. In this example, <code>ToDo.txt</code> is the file name, and <code>Users</code>, <code>Tom</code>, and <code>Documents</code> are folder names. <code>C:\</code> on Windows  represents the root directory of the drive.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> In this article, I use the terms <em>folder</em> and <em>directory</em> interchangeably, disregarding the difference between the file system concept (directory) and the graphical user interface <a href="https://en.wikipedia.org/wiki/Directory_%28computing%29#Folder_metaphor">metaphor</a> (folder). </div></aside>
<h3 id="traditional-way-of-working-with-files-on-the-web">Traditional way of working with files on the web <a class="headline-link" href="https://web.dev/origin-private-file-system/#traditional-way-of-working-with-files-on-the-web">#</a></h3>
<p>To edit the To Do list in a web application, this is the traditional flow:</p>
<ol>
<li>The user <em>uploads</em> the file to a server or <em>opens</em> it on the client with <a href="https://developer.mozilla.org/docs/Web/HTML/Element/input/file" rel="noopener"><code>&lt;input type=&quot;file&quot;&gt;</code></a>.</li>
<li>The user makes their changes, and then <em>downloads</em> the resulting file with an injected <a href="https://developer.mozilla.org/docs/Web/API/HTMLAnchorElement/download" rel="noopener"><code>&lt;a download=&quot;ToDo.txt&gt;</code></a> that you programmatically <a href="https://developer.mozilla.org/docs/Web/API/HTMLElement/click" rel="noopener"><code>click()</code></a> via JavaScript.</li>
<li>For opening folders, you use a special attribute in <a href="https://developer.mozilla.org/docs/Web/API/HTMLInputElement/webkitdirectory" rel="noopener"><code>&lt;input type=&quot;file&quot; webkitdirectory&gt;</code></a>, which, despite its proprietary name, has practically universal browser support.</li>
</ol>
<h3 id="modern-way-of-working-with-files-on-the-web">Modern way of working with files on the web <a class="headline-link" href="https://web.dev/origin-private-file-system/#modern-way-of-working-with-files-on-the-web">#</a></h3>
<p>This flow is not representative of how users think of editing files, and means users end up with downloaded <em>copies</em> of their input files. Therefore,  the File System Access API introduced three picker methods—<a href="https://developer.mozilla.org/docs/Web/API/Window/showOpenFilePicker" rel="noopener"><code>showOpenFilePicker()</code></a>, <a href="https://developer.mozilla.org/docs/Web/API/Window/showSaveFilePicker" rel="noopener"><code>showSaveFilePicker()</code></a>, and <a href="https://developer.mozilla.org/docs/Web/API/Window/showDirectoryPicker" rel="noopener"><code>showDirectoryPicker()</code></a>—that do exactly what their name suggests. They enable a flow as follows:</p>
<ol>
<li>Open <code>ToDo.txt</code> with <code>showOpenFilePicker()</code>, and get a <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle" rel="noopener"><code>FileSystemFileHandle</code></a> object.</li>
<li>From the <code>FileSystemFileHandle</code> object, get a <a href="https://developer.mozilla.org/docs/Web/API/File" rel="noopener"><code>File</code></a> by calling the file handle's <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/getFile" rel="noopener"><code>getFile()</code></a> method.</li>
<li>Modify the file, then call <a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/requestPermission" rel="noopener"><code>requestPermission({mode: 'readwrite'})</code></a> on the handle.</li>
<li>If the user accepts the permission request, save the changes back to the original file.</li>
<li>Alternatively, call <code>showSaveFilePicker()</code> and let the user pick a new file. (If the user picks a previously opened file, its contents will be overwritten.) For repeat saves, you can keep the file handle around, so you don't have to show the file save dialog again.</li>
</ol>
<h3 id="restrictions-of-working-with-files-on-the-web">Restrictions of working with files on the web <a class="headline-link" href="https://web.dev/origin-private-file-system/#restrictions-of-working-with-files-on-the-web">#</a></h3>
<p>Files and folders that are accessible via these methods live in what can be called the <em>user-visible</em> file system. Files saved from the web, and executable files specifically, are marked with the <a href="https://textslashplain.com/2016/04/04/downloads-and-the-mark-of-the-web/" rel="noopener">mark of the web</a>, so there's an additional warning the operating system can show before a potentially dangerous file gets executed. As an additional security feature, files obtained from the web are also protected by <a href="https://safebrowsing.google.com/" rel="noopener">Safe Browsing</a>, which, for the sake of simplicity and in the context of this article, you can think of as a cloud-based virus scan. When you write data to a file using the File System Access API, writes are  not in-place, but use a temporary file. The file itself is not modified unless it passes all these security checks. As you can imagine, this work makes file operations relatively slow, despite improvements applied where possible, for example, <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1413443" rel="noopener">on macOS</a>. Still every <a href="https://developer.mozilla.org/docs/Web/API/FileSystemWritableFileStream/write" rel="noopener"><code>write()</code></a> call is self-contained, so under the hood it opens the file, seeks to the given offset, and finally writes data.</p>
<h3 id="files-as-the-foundation-of-processing">Files as the foundation of processing <a class="headline-link" href="https://web.dev/origin-private-file-system/#files-as-the-foundation-of-processing">#</a></h3>
<p>At the same time, files are an excellent way to record data. For example, <a href="https://www.sqlite.org/" rel="noopener">SQLite</a> stores entire databases in a single file. Another example are <a href="https://en.wikipedia.org/wiki/Mipmap" rel="noopener">mipmaps</a> used in image processing. Mipmaps are pre-calculated, optimized sequences of images, each of which is a progressively lower resolution representation of the previous, which makes many operations like zooming faster. So how can web applications get the benefits of files, but without the performance costs of traditional web-based file processing? The answer is the <em>origin private file system</em>.</p>
<h2 id="the-user-visible-versus-the-origin-private-file-system">The user-visible versus the origin private file system <a class="headline-link" href="https://web.dev/origin-private-file-system/#the-user-visible-versus-the-origin-private-file-system">#</a></h2>
<p>Unlike the user-visible file system browsed via the operating system's file explorer, with files and folders you can read, write, move, and rename, the origin private file system is not meant to be seen by users. Files and folders in the origin private file system, as the name suggests, are private, and more concretely, private to the <a href="https://developer.mozilla.org/docs/Glossary/Origin" rel="noopener">origin</a> of a site. Discover the origin of a page by typing <a href="https://developer.mozilla.org/docs/Web/API/Location/origin" rel="noopener"><code>location.origin</code></a> in the DevTools Console. For example, the origin of the page <code>https://developer.chrome.com/articles/</code> is <code>https://developer.chrome.com</code> (that is, the part <code>/articles</code> is <em>not</em> part of the origin). You can read more about the theory of origins in <a href="https://web.dev/same-site-same-origin/#origin">Understanding &quot;same-site&quot; and &quot;same-origin&quot;</a>. All pages that share the same origin can see the same origin private file system data, so <code>https://developer.chrome.com/docs/extensions/mv3/getstarted/extensions-101/</code> can see the same details as the previous example. Each origin has its own independent origin private file system, which means the origin private file system of <code>https://developer.chrome.com</code> is completely distinct from the one of, say, <a href="https://web.dev/"><code>https://web.dev</code></a>. On Windows, the root directory of the user-visible file system is <code>C:\</code>. The equivalent for the origin private file system is an initially empty root directory per origin accessed by calling the asynchronous method <a href="https://developer.mozilla.org/docs/Web/API/StorageManager/getDirectory" rel="noopener"><code>navigator.storage.getDirectory()</code></a>. For a comparison of the user-visible file system and the origin private file system, see the following diagram. The diagram shows that apart from the root directory, everything else is conceptually the same, with a hierarchy of files and folders to organize and arrange as needed for your data and storage needs.</p>
<img alt="Diagram of the user-visible file system and the origin private file system with two exemplary file hierarchies. The entry point for the user-visible file system is a symbolic harddisk, the entry point for the origin private file system is calling of the method &#x27;navigator.storage.getDirectory&#x27;." decoding="async" height="722" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format" srcset="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/xej6CL5VFJuGJgXPkeKJ.png?auto=format&w=1600 1600w" width="800" />
<h2 id="specifics-of-the-origin-private-file-system">Specifics of the origin private file system <a class="headline-link" href="https://web.dev/origin-private-file-system/#specifics-of-the-origin-private-file-system">#</a></h2>
<p>Just like other storage mechanisms in the browser (for example, <a href="https://developer.mozilla.org/docs/Web/API/Window/localStorage" rel="noopener">localStorage</a> or <a href="https://developer.mozilla.org/docs/Web/API/IndexedDB_API/Using_IndexedDB" rel="noopener">IndexedDB</a>), the origin private file system is subject to browser quota restrictions. When a user <a href="https://support.google.com/chrome/answer/2392709" rel="noopener">clears all browsing data</a> or <a href="https://developer.chrome.com/docs/devtools/storage/cache/#deletecache" rel="noopener">all site data</a>, the origin private file system will be deleted, too. Call <a href="https://developer.mozilla.org/docs/Web/API/StorageManager/estimate" rel="noopener"><code>navigator.storage.estimate()</code></a> and in the resulting response object see the <a href="https://developer.mozilla.org/docs/Web/API/StorageManager/estimate#usage" rel="noopener"><code>usage</code></a> entry to see how much storage your app already consumes, which is broken down by storage mechanism in the <a href="https://developer.mozilla.org/docs/Web/API/StorageManager/estimate#usagedetails" rel="noopener"><code>usageDetails</code></a> object, where you want to look at the <code>fileSystem</code> entry specifically. Since the origin private file system is not visible to the user, there are no permissions prompts and no Safe Browsing checks.</p>
<h2 id="getting-access-to-the-root-directory">Getting access to the root directory <a class="headline-link" href="https://web.dev/origin-private-file-system/#getting-access-to-the-root-directory">#</a></h2>
<p>To get access to the root directory, run the command below. You end up with an empty directory handle, more specifically, a <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle" rel="noopener"><code>FileSystemDirectoryHandle</code></a>.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> opfsRoot <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token function">getDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// A FileSystemDirectoryHandle whose type is "directory"</span><br /><span class="token comment">// and whose name is "".</span><br />console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>opfsRoot<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><h2 id="main-thread-or-web-worker">Main thread or Web Worker <a class="headline-link" href="https://web.dev/origin-private-file-system/#main-thread-or-web-worker">#</a></h2>
<p>There are two ways of using the origin private file system: on the <a href="https://developer.mozilla.org/docs/Glossary/Main_thread" rel="noopener">main thread</a> or in a <a href="https://developer.mozilla.org/docs/Web/API/Worker" rel="noopener">Web Worker</a>. Web Workers cannot block the main thread, which means in this context APIs can be synchronous, a pattern generally disallowed on the main thread. Synchronous APIs can be faster as they avoid having to deal with promises, and file operations are typically synchronous in languages like C that can be compiled to WebAssembly.</p>
<div><pre class="language-c"><code class="language-c"><span class="token comment">// This is synchronous C code.</span><br />FILE <span class="token operator">*</span>f<span class="token punctuation">;</span><br />f <span class="token operator">=</span> <span class="token function">fopen</span><span class="token punctuation">(</span><span class="token string">"example.txt"</span><span class="token punctuation">,</span> <span class="token string">"w+"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token function">fputs</span><span class="token punctuation">(</span><span class="token string">"Some text\n"</span><span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token function">fclose</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><p>If you need the fastest possible file operations and/or you deal with <a href="https://developer.mozilla.org/es/docs/WebAssembly" rel="noopener">WebAssembly</a>, skip down to <a href="https://example.com/" rel="noopener">Using the origin private file system in a Web Worker</a>. Else, you can read on.</p>
<h2 id="using-the-origin-private-file-system-on-the-main-thread">Using the origin private file system on the main thread <a class="headline-link" href="https://web.dev/origin-private-file-system/#using-the-origin-private-file-system-on-the-main-thread">#</a></h2>
<h3 id="creating-new-files-and-folders">Creating new files and folders <a class="headline-link" href="https://web.dev/origin-private-file-system/#creating-new-files-and-folders">#</a></h3>
<p>Once you have a root folder, create files and folders using the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/getFileHandle" rel="noopener"><code>getFileHandle()</code></a> and the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/getDirectoryHandle" rel="noopener"><code>getDirectoryHandle()</code></a> methods respectively. By passing <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/getFileHandle#create" rel="noopener"><code>{create: true}</code></a>, the file or folder will be created if it doesn't exist. Build up a hierarchy of files by calling these functions using a newly created directory as the starting point.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> fileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<br />    <span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'my first file'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> directoryHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<br />    <span class="token punctuation">.</span><span class="token function">getDirectoryHandle</span><span class="token punctuation">(</span><span class="token string">'my first folder'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> nestedFileHandle <span class="token operator">=</span> <span class="token keyword">await</span> directoryHandle<br />    <span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'my first nested file'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> nestedDirectoryHandle <span class="token operator">=</span> <span class="token keyword">await</span> directoryHandle<br />    <span class="token punctuation">.</span><span class="token function">getDirectoryHandle</span><span class="token punctuation">(</span><span class="token string">'my first nested folder'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><img alt="The resulting file hierarchy from the earlier code sample." decoding="async" height="196" loading="lazy" sizes="(min-width: 438px) 438px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format" srcset="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/VtWQ4T2a1gph0kFzhRwN.png?auto=format&w=876 876w" width="438" />
<h3 id="accessing-existing-files-and-folders">Accessing existing files and folders <a class="headline-link" href="https://web.dev/origin-private-file-system/#accessing-existing-files-and-folders">#</a></h3>
<p>If you know their name, access previously created files and folders by calling the <code>getFileHandle()</code> or the <code>getDirectoryHandle()</code> methods, passing in the name of the file or folder.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> existingFileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'my first file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> existingDirectoryHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<br />    <span class="token punctuation">.</span><span class="token function">getDirectoryHandle</span><span class="token punctuation">(</span>'my first folder<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><h3 id="getting-the-file-associated-with-a-file-handle-for-reading">Getting the file associated with a file handle for reading <a class="headline-link" href="https://web.dev/origin-private-file-system/#getting-the-file-associated-with-a-file-handle-for-reading">#</a></h3>
<p>A <code>FileSystemFileHandle</code> represents a file on the file system. To obtain the associated <code>File</code>, use the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/getFile" rel="noopener"><code>getFile()</code></a> method. A <code>File</code> object is a specific kind of <a href="https://developer.mozilla.org/es/docs/Web/API/Blob" rel="noopener"><code>Blob</code></a>, and can be used in any context that a <code>Blob</code> can. In particular, <a href="https://developer.mozilla.org/es/docs/Web/API/FileReader" rel="noopener"><code>FileReader</code></a>, <a href="https://developer.mozilla.org/es/docs/Web/API/URL/createObjectURL" rel="noopener"><code>URL.createObjectURL()</code></a>, <a href="https://developer.mozilla.org/es/docs/Web/API/createImageBitmap" rel="noopener"><code>createImageBitmap()</code></a>, and <a href="https://developer.mozilla.org/docs/Web/API/XMLHttpRequest/send" rel="noopener"><code>XMLHttpRequest.send()</code></a> accept both <code>Blobs</code> and <code>Files</code>. If you will, obtaining a <code>File</code> from a <code>FileSystemFileHandle</code> &quot;frees&quot; the data, so you can access it and make it available to the user-visible file system.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> file<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><h3 id="writing-to-a-file-by-streaming">Writing to a file by streaming <a class="headline-link" href="https://web.dev/origin-private-file-system/#writing-to-a-file-by-streaming">#</a></h3>
<p>Stream data into a file by calling <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/createWritable" rel="noopener"><code>createWritable()</code></a> which creates a <a href="https://developer.mozilla.org/docs/Web/API/FileSystemWritableFileStream" rel="noopener"><code>FileSystemWritableFileStream</code></a> to that you then <a href="https://developer.mozilla.org/docs/Web/API/FileSystemWritableFileStream/write" rel="noopener"><code>write()</code></a> the contents. At the end, you need to <a href="https://developer.mozilla.org/docs/Web/API/WritableStream/close" rel="noopener"><code>close()</code></a> the stream.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token string">'Some text'</span><span class="token punctuation">;</span><br /><span class="token comment">// Get a writable stream.</span><br /><span class="token keyword">const</span> writable <span class="token operator">=</span> <span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">createWritable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Write the contents of the file to the stream.</span><br /><span class="token keyword">await</span> writable<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Close the stream, which persists the contents.</span><br /><span class="token keyword">await</span> writable<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><h3 id="deleting-files-and-folders">Deleting files and folders <a class="headline-link" href="https://web.dev/origin-private-file-system/#deleting-files-and-folders">#</a></h3>
<p>Delete files and folders by calling their file or directory handle's particular <a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/remove" rel="noopener"><code>remove()</code></a> method. To delete a folder including all subfolders, pass the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/remove#recursive" rel="noopener"><code>{recursive: true}</code></a> option.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">await</span> directoryHandle<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">recursive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> The <code>remove()</code> method is currently only implemented in Chrome. You can feature-detect support via <code>'remove' in FileSystemFileHandle.prototype</code>. </div></aside>
<p>As an alternative, if you know the name of the to-be-deleted file or folder in a directory, use the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/removeEntry" rel="noopener"><code>removeEntry()</code></a> method.</p>
<div><pre class="language-js"><code class="language-js">directoryHandle<span class="token punctuation">.</span><span class="token function">removeEntry</span><span class="token punctuation">(</span><span class="token string">'my first nested file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> As a quick tip, <code>await (await navigator.storage.getDirectory()).remove({recursive: true})</code> is the fastest way to clear the entire origin private file system. </div></aside>
<h3 id="moving-and-renaming-files-and-folders">Moving and renaming files and folders <a class="headline-link" href="https://web.dev/origin-private-file-system/#moving-and-renaming-files-and-folders">#</a></h3>
<p>Rename and move files and folders using the <a href="https://github.com/whatwg/fs/pull/10" rel="noopener"><code>move()</code></a> method. Moving and renaming can happen together or in isolation.</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// Rename a file.</span><br /><span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token string">'my first renamed file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Move a file to another directory.</span><br /><span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>nestedDirectoryHandle<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Move a file to another directory and rename it.</span><br /><span class="token keyword">await</span> fileHandle<br />    <span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span>nestedDirectoryHandle<span class="token punctuation">,</span> <span class="token string">'my first renamed and now nested file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> Renaming and moving folders is not implemented yet in Chrome. You also can't move files from the origin private file system to the user-visible file system. You can <a href="https://web.dev/origin-private-file-system/#copying-a-file-from-the-origin-private-file-system-to-the-user-visible-file-system">copy</a> them, though. </div></aside>
<h3 id="resolving-the-path-of-a-file-or-folder">Resolving the path of a file or folder <a class="headline-link" href="https://web.dev/origin-private-file-system/#resolving-the-path-of-a-file-or-folder">#</a></h3>
<p>To learn where a given file or folder is located  in relation to a reference directory, use the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/resolve" rel="noopener"><code>resolve()</code></a> method, passing it a <code>FileSystemHandle</code> as the argument. To obtain the full path of a file or folder in the origin private file system, use the root directory as the reference directory obtained via <code>navigator.storage.getDirectory()</code>.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> relativePath <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>nestedDirectoryHandle<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// `relativePath` is `['my first folder', 'my first nested folder']`.</span></code></pre>
</div><h3 id="checking-if-two-file-or-folder-handles-point-to-the-same-file-or-folder">Checking if two file or folder handles point to the same file or folder <a class="headline-link" href="https://web.dev/origin-private-file-system/#checking-if-two-file-or-folder-handles-point-to-the-same-file-or-folder">#</a></h3>
<p>Sometimes you have two handles and don't know if they point at the same file or folder. To check whether this is the case, use the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemHandle/isSameEntry" rel="noopener"><code>isSameEntry()</code></a> method.</p>
<div><pre class="language-js"><code class="language-js">fileHandle<span class="token punctuation">.</span><span class="token function">isSameEntry</span><span class="token punctuation">(</span>nestedFileHandle<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Returns `false`.</span></code></pre>
</div><h2 id="listing-the-contents-of-a-folder">Listing the contents of a folder <a class="headline-link" href="https://web.dev/origin-private-file-system/#listing-the-contents-of-a-folder">#</a></h2>
<p><code>FileSystemDirectoryHandle</code> is an <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Iteration_protocols#the_async_iterator_and_async_iterable_protocols" rel="noopener">asynchronous iterator</a> that you iterate over with a <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/for-await...of" rel="noopener"><code>for await…of</code></a> loop. As an asynchronous iterator, it also supports the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/entries" rel="noopener"><code>entries()</code></a>, the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/values" rel="noopener"><code>values()</code></a>, and the <a href="https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryHandle/keys" rel="noopener"><code>keys()</code></a> methods, from which you can choose depending on what information you need:</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> handle<span class="token punctuation">]</span> <span class="token keyword">of</span> directoryHandle<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br /><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> handle<span class="token punctuation">]</span> <span class="token keyword">of</span> directoryHandle<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br /><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> handle <span class="token keyword">of</span> directoryHandle<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br /><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> name <span class="token keyword">of</span> directoryHandle<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre>
</div><h2 id="recursively-listing-the-contents-of-a-folder-and-all-subfolders">Recursively listing the contents of a folder and all subfolders <a class="headline-link" href="https://web.dev/origin-private-file-system/#recursively-listing-the-contents-of-a-folder-and-all-subfolders">#</a></h2>
<p>Dealing with asynchronous loops and functions paired with recursion is easy to get wrong. The function below can serve as a starting point for listing the contents of a folder and all its subfolders, including all files and their sizes. You can simplify the function if you don't need the file sizes by, where it says <code>directoryEntryPromises.push</code>, not pushing the <code>handle.getFile()</code> promise, but the <code>handle</code> directly.</p>
<div><pre class="language-js"><code class="language-js">  <span class="token keyword">const</span> getDirectoryEntriesRecursive <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><br />    directoryHandle<span class="token punctuation">,</span><br />    relativePath <span class="token operator">=</span> <span class="token string">'.'</span><span class="token punctuation">,</span><br />  <span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />    <span class="token keyword">const</span> fileHandles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br />    <span class="token keyword">const</span> directoryHandles <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br />    <span class="token keyword">const</span> entries <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br />    <span class="token comment">// Get an iterator of the files and folders in the directory.</span><br />    <span class="token keyword">const</span> directoryIterator <span class="token operator">=</span> directoryHandle<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />    <span class="token keyword">const</span> directoryEntryPromises <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br />    <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> handle <span class="token keyword">of</span> directoryIterator<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />      <span class="token keyword">const</span> nestedPath <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>relativePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>handle<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><br />      <span class="token keyword">if</span> <span class="token punctuation">(</span>handle<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">'file'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />        fileHandles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> handle<span class="token punctuation">,</span> nestedPath <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />        directoryEntryPromises<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br />          handle<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">file</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />            <span class="token keyword">return</span> <span class="token punctuation">{</span><br />              <span class="token literal-property property">name</span><span class="token operator">:</span> handle<span class="token punctuation">.</span>name<span class="token punctuation">,</span><br />              <span class="token literal-property property">kind</span><span class="token operator">:</span> handle<span class="token punctuation">.</span>kind<span class="token punctuation">,</span><br />              <span class="token literal-property property">size</span><span class="token operator">:</span> file<span class="token punctuation">.</span>size<span class="token punctuation">,</span><br />              <span class="token literal-property property">type</span><span class="token operator">:</span> file<span class="token punctuation">.</span>type<span class="token punctuation">,</span><br />              <span class="token literal-property property">lastModified</span><span class="token operator">:</span> file<span class="token punctuation">.</span>lastModified<span class="token punctuation">,</span><br />              <span class="token literal-property property">relativePath</span><span class="token operator">:</span> nestedPath<span class="token punctuation">,</span><br />              handle<br />            <span class="token punctuation">}</span><span class="token punctuation">;</span><br />          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />        <span class="token punctuation">)</span><span class="token punctuation">;</span><br />      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>handle<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">'directory'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />        directoryHandles<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> handle<span class="token punctuation">,</span> nestedPath <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />        directoryEntryPromises<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><br />          <span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />            <span class="token keyword">return</span> <span class="token punctuation">{</span><br />              <span class="token literal-property property">name</span><span class="token operator">:</span> handle<span class="token punctuation">.</span>name<span class="token punctuation">,</span><br />              <span class="token literal-property property">kind</span><span class="token operator">:</span> handle<span class="token punctuation">.</span>kind<span class="token punctuation">,</span><br />              <span class="token literal-property property">relativePath</span><span class="token operator">:</span> nestedPath<span class="token punctuation">,</span><br />              <span class="token literal-property property">entries</span><span class="token operator">:</span><br />                  <span class="token keyword">await</span> <span class="token function">getDirectoryEntriesRecursive</span><span class="token punctuation">(</span>handle<span class="token punctuation">,</span> nestedPath<span class="token punctuation">)</span><span class="token punctuation">,</span><br />              handle<span class="token punctuation">,</span><br />            <span class="token punctuation">}</span><span class="token punctuation">;</span><br />          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br />        <span class="token punctuation">)</span><span class="token punctuation">;</span><br />      <span class="token punctuation">}</span><br />    <span class="token punctuation">}</span><br />    <span class="token keyword">const</span> directoryEntries <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>directoryEntryPromises<span class="token punctuation">)</span><span class="token punctuation">;</span><br />    directoryEntries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">directoryEntry</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />      entries<span class="token punctuation">[</span>directoryEntry<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> directoryEntry<span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />    <span class="token keyword">return</span> entries<span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
</div><h2 id="using-the-origin-private-file-system-in-a-web-worker">Using the origin private file system in a Web Worker <a class="headline-link" href="https://web.dev/origin-private-file-system/#using-the-origin-private-file-system-in-a-web-worker">#</a></h2>
<p>As outlined before, Web Workers can't block the main thread, which is why in this context synchronous methods are allowed.</p>
<h3 id="getting-a-synchronous-access-handle">Getting a synchronous access handle <a class="headline-link" href="https://web.dev/origin-private-file-system/#getting-a-synchronous-access-handle">#</a></h3>
<p>The entry point to the fastest possible file operations is a <a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle" rel="noopener"><code>FileSystemSyncAccessHandle</code></a>, obtained from a regular <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle" rel="noopener"><code>FileSystemFileHandle</code></a> by calling <a href="https://developer.mozilla.org/docs/Web/API/FileSystemFileHandle/createSyncAccessHandle" rel="noopener"><code>createSyncAccessHandle()</code></a>.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> fileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<br />    <span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'my highspeed file.txt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> syncAccessHandle <span class="token operator">=</span> <span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">createSyncAccessHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> It might seem confusing, but you actually get a <em>synchronous</em> <code>FileSystemSyncAccessHandle</code> from a regular <code>FileSystemFileHandle</code>. Also note that the <code>createSyncAccessHandle()</code> method is <em>asynchronous</em>, despite the <code>Sync</code> in its name. </div></aside>
<h3 id="synchronous-in-place-file-methods">Synchronous in-place file methods <a class="headline-link" href="https://web.dev/origin-private-file-system/#synchronous-in-place-file-methods">#</a></h3>
<p>Once you have a synchronous access handle, you get access to fast in-place file methods that are all synchronous.</p>
<ul>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/getSize" rel="noopener"><code>getSize()</code></a>: Returns the size of the file in bytes.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/write" rel="noopener"><code>write()</code></a>: Writes the content of a buffer into the, optionally at a given offset, and returns the number of written bytes. Checking the returned number of written bytes allows callers to detect and handle errors and partial writes.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/read" rel="noopener"><code>read()</code></a>: Reads the contents of the file into a buffer, optionally at a given offset.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/truncate" rel="noopener"><code>truncate()</code></a>: Resizes the file to the given size.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/flush" rel="noopener"><code>flush()</code></a>: Ensures that the contents of the file contain all the modifications done through <code>write()</code>.</li>
<li><a href="https://developer.mozilla.org/docs/Web/API/FileSystemSyncAccessHandle/close" rel="noopener"><code>close()</code></a>: Closes the access handle.</li>
</ul>
<p>Here is an example that uses all the methods mentioned above.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> opfsRoot <span class="token operator">=</span> <span class="token keyword">await</span> navigator<span class="token punctuation">.</span>storage<span class="token punctuation">.</span><span class="token function">getDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> fileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> accessHandle <span class="token operator">=</span> <span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">createSyncAccessHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">const</span> textEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">const</span> textDecoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token comment">// Initialize this variable for the size of the file.</span><br /><span class="token keyword">let</span> size<span class="token punctuation">;</span><br /><span class="token comment">// The current size of the file, initially `0`.</span><br />size <span class="token operator">=</span> accessHandle<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Encode content to write to the file.</span><br /><span class="token keyword">const</span> content <span class="token operator">=</span> textEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">'Some text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Write the content at the beginning of the file.</span><br />accessHandle<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">at</span><span class="token operator">:</span> size<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Flush the changes.</span><br />accessHandle<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// The current size of the file, now `9` (the length of "Some text").</span><br />size <span class="token operator">=</span> accessHandle<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token comment">// Encode more content to write to the file.</span><br /><span class="token keyword">const</span> moreContent <span class="token operator">=</span> textEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">'More content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Write the content at the end of the file.</span><br />accessHandle<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>moreContent<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">at</span><span class="token operator">:</span> size<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Flush the changes.</span><br />accessHandle<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// The current size of the file, now `21` (the length of</span><br /><span class="token comment">// "Some textMore content").</span><br />size <span class="token operator">=</span> accessHandle<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token comment">// Prepare a data view of the length of the file.</span><br /><span class="token keyword">const</span> dataView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataView</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayBuffer</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token comment">// Read the entire file into the data view.</span><br />accessHandle<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>dataView<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Logs `"Some textMore content"`.</span><br />console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>textDecoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>dataView<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token comment">// Read starting at offset 9 into the data view.</span><br />accessHandle<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>dataView<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">at</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token comment">// Logs `"More content"`.</span><br />console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>textDecoder<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>dataView<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token comment">// Truncate the file after 4 bytes.</span><br />accessHandle<span class="token punctuation">.</span><span class="token function">truncate</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> Note that the first parameter for <code>read()</code> and <code>write()</code> is an <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer"><code>ArrayBuffer</code></a> or an <code>ArrayBufferView</code> like a <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/DataView"><code>DataView</code></a>. You cannot directly manipulate the contents of an <code>ArrayBuffer</code>. Instead, you create one of the <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">typed array objects</a> like an <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Int8Array"><code>Int8Array</code></a> or a <code>DataView</code> object which represents the buffer in a specific format, and use that to read and write the contents of the buffer. </div></aside>
<h2 id="copying-a-file-from-the-origin-private-file-system-to-the-user-visible-file-system">Copying a file from the origin private file system to the user-visible file system <a class="headline-link" href="https://web.dev/origin-private-file-system/#copying-a-file-from-the-origin-private-file-system-to-the-user-visible-file-system">#</a></h2>
<p>As mentioned above, moving files from the origin private file system to the user-visible file system isn't possible, but you can copy files. Since <code>showSaveFilePicker()</code> is only exposed on the main thread, but not in the Worker thread, be sure to run the code there.</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// On the main thread, not in the Worker. This assumes</span><br /><span class="token comment">// `fileHandle` is the `FileSystemFileHandle` you obtained</span><br /><span class="token comment">// the `FileSystemSyncAccessHandle` from in the Worker</span><br /><span class="token comment">// thread. Be sure to close the file in the Worker thread first.</span><br /><span class="token keyword">const</span> fileHandle <span class="token operator">=</span> <span class="token keyword">await</span> opfsRoot<span class="token punctuation">.</span><span class="token function">getFileHandle</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token keyword">try</span> <span class="token punctuation">{</span><br />  <span class="token comment">// Obtain a file handle to a new file in the user-visible file system</span><br />  <span class="token comment">// with the same name as the file in the origin private file system.</span><br />  <span class="token keyword">const</span> saveHandle <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">showSaveFilePicker</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br />    <span class="token literal-property property">suggestedName</span><span class="token operator">:</span> fileHandle<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">''</span><br />  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token keyword">const</span> writable <span class="token operator">=</span> <span class="token keyword">await</span> saveHandle<span class="token punctuation">.</span><span class="token function">createWritable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token keyword">await</span> writable<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">await</span> fileHandle<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token keyword">await</span> writable<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>name<span class="token punctuation">,</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span></code></pre>
</div><h2 id="debugging-the-origin-private-file-system">Debugging the origin private file system <a class="headline-link" href="https://web.dev/origin-private-file-system/#debugging-the-origin-private-file-system">#</a></h2>
<p>Until built-in DevTools support is added (see <a href="https://crbug.com/1284595" rel="noopener">crbug/1284595</a>), use the <a href="https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd" rel="noopener">OPFS Explorer</a> Chrome extension to debug the origin private file system. The screenshot above from the section <a href="https://web.dev/origin-private-file-system/#creating-new-files-and-folders">Creating new files and folders</a> is taken straight from the extension by the way.</p>
<img alt="The OPFS Explorer Chrome DevTools extension in the Chrome Web Store." decoding="async" height="612" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format" srcset="https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/8WbTDNrhLsU0El80frMBGE4eMCD3/kmE7qbP61UlLcCxBkMMQ.png?auto=format&w=1600 1600w" width="800" />
<p>After installing the extension, open the Chrome DevTools, select the <strong>OPFS Explorer</strong> tab, and you're then ready to inspect the file hierarchy. Save files from the origin private file system to the user-visible file system by clicking the file name and delete files and folders by clicking the trash can icon.</p>
<h2 id="demo">Demo <a class="headline-link" href="https://web.dev/origin-private-file-system/#demo">#</a></h2>
<p>See the origin private file system in action (if you install the OPFS Explorer extension) in a <a href="https://sqlite-wasm-opfs.glitch.me/" rel="noopener">demo</a> that uses it as a backend for a SQLite database compiled to WebAssembly. Be sure to check out the <a href="https://glitch.com/edit/#!/sqlite-wasm-opfs" rel="noopener">source code on Glitch</a>. Note how the embedded version below does not use the origin private file system backend (because the iframe is cross-origin), but when you open the demo in a separate tab, it does.</p>
<div class="glitch-embed-wrap" style="height: 420px; width: 100%;">
  <iframe allow="camera; clipboard-read; clipboard-write; encrypted-media; geolocation; microphone; midi" loading="lazy" src="https://glitch.com/embed/#!/embed/sqlite-wasm-opfs?attributionHidden=true&sidebarCollapsed=true&previewSize=100" style="height: 100%; width: 100%; border: 0;" title="sqlite-wasm-opfs on Glitch"></iframe>
</div>
<h2 id="conclusions">Conclusions <a class="headline-link" href="https://web.dev/origin-private-file-system/#conclusions">#</a></h2>
<p>The origin private file system, as specified by the WHATWG, has shaped the way we use and interact with files on the web. It has enabled new use cases that were impossible to achieve with the user-visible file system. All major browser vendors—Apple, Mozilla, and Google—are on-board and share a joint vision. The development of the origin private file system is very much a collaborative effort, and feedback from developers and users is essential to its progress. As we continue to refine and improve the standard, feedback on the <a href="https://github.com/whatwg/fs" rel="noopener">whatwg/fs repository</a> in the form of Issues or Pull Requests is welcome.</p>
<h2 id="related-links">Related links <a class="headline-link" href="https://web.dev/origin-private-file-system/#related-links">#</a></h2>
<ul>
<li><a href="https://fs.spec.whatwg.org/" rel="noopener">File System Standard spec</a></li>
<li><a href="https://github.com/whatwg/fs" rel="noopener">File System Standard repo</a></li>
<li><a href="https://webkit.org/blog/12257/the-file-system-access-api-with-origin-private-file-system/" rel="noopener">The File System API with Origin Private File System WebKit post</a></li>
<li><a href="https://chrome.google.com/webstore/detail/opfs-explorer/acndjpgkpaclldomagafnognkcgjignd" rel="noopener">OPFS Explorer extension</a></li>
</ul>
<h2 id="acknowledgements">Acknowledgements <a class="headline-link" href="https://web.dev/origin-private-file-system/#acknowledgements">#</a></h2>
<p>This article was reviewed by <a href="https://github.com/a-sully" rel="noopener">Austin Sully</a>, <a href="https://ca.linkedin.com/in/enoel19" rel="noopener">Etienne Noël</a>, and <a href="https://rachelandrew.co.uk/" rel="noopener">Rachel Andrew</a>. Hero image by <a href="https://unsplash.com/@rumpf" rel="noopener">Christina Rumpf</a> on <a href="https://unsplash.com/photos/XWDMmk-yW7Q" rel="noopener">Unsplash</a>.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[所有主要引擎中的新 CSS 颜色空间和功能]]></title>
            <link>https://web.dev/color-spaces-and-functions/</link>
            <guid>https://web.dev/color-spaces-and-functions/</guid>
            <content:encoded><![CDATA[<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" style="enable-background:new 0 0 128 128" xml:space="preserve"><path d="M7.5 123.3c2.2 2.4 11.6-1.9 19-5.3C32 115.4 54 106.3 65 101.6c3-1.2 7.3-2.9 10.4-7 2.8-3.6 10-19-4.6-34.7-15-16-30.4-11.5-36.2-7.5A28.5 28.5 0 0 0 27.3 63c-5.2 11.6-12.7 32.9-15.7 41.3-2.3 6.1-6.4 16.5-4.1 19z" fill="currentColor"></path><path d="M18 86.8s.7 6.5 6.1 14.6c6.3 9.6 15 11.2 15 11.2l-5.8 2.4s-6.5-2-12.7-10.4c-3.8-5.3-5-11.6-5-11.6l2.3-6.2zm-5.6 15.4s1.5 5.6 4.7 9.7c3.8 5 8.6 6.5 8.6 6.5l-4.5 2s-3.3-.8-7-5.5c-2.9-3.5-3.7-7.6-3.7-7.6l1.9-5.1z" fill="currentColor"></path><path d="M10 116.4c-.2-.5-.2-1 0-1.4l25.4-53 4.2 16-26.8 38.7c-.7 1-2.3 1-2.8-.2z" style="opacity:.44" fill="currentColor"></path><path d="M41.6 83.2c12 14 25.5 12.2 30 8.6 4.5-3.5 8.1-15.6-3.7-29.3C55.3 48.2 41.3 52.2 38 55.3s-7.4 15.1 3.5 27.9z" style="fill: var(--color-state-good-bg);"></path><path d="M82.5 89c-4.3-3.7-6.6-3-9.7-1.8a26 26 0 0 1-18.9 0l2.6-6.2c5 1.7 8.7 1 12-1 4-2.4 9.6-5.6 18.3 1.6 3.6 3 7.3 5.1 10 4.2 2-.7 3-3.6 3.6-6l.2-1.3c.4-3.7 1.2-11.6 7.1-15.7 6.4-4.3 13-4.3 13-4.3l1.2 12c-3-.5-5.2.1-7 1-6.7 3.8-.8 18.2-11.3 23-10.1 4.8-18.4-3.3-21-5.6zM45.4 73.7l-4.3-3.9c8-8.9 5.8-15.4 4.3-20.2A26.4 26.4 0 0 1 44 38.8c-3-3.8-4.4-7.8-4.5-8-1.9-5.7-.5-11.2 2.8-16.4C48.7 4 60.5 4 60.5 4l4 10.5c-3-.1-12.8 0-15.8 4.8-3.8 6-1.3 9.6-1.2 10 .8-1 1.5-1.7 2.2-2.3 4.8-4.2 9-4.8 11.6-4.6a11 11 0 0 1 7.6 4.2c2 2.7 3 6.2 2.3 9.4a11 11 0 0 1-5.8 7.4 16 16 0 0 1-13 1.5v.3l.6 2c1.8 5.4 5 14.1-7.6 26.5zm7.4-37.5c.5.4 1.1.8 1.8 1 2 .8 4.4.6 7-.8 1.5-.9 1.7-1.7 1.7-2 .2-.9 0-2-.7-2.8a2.8 2.8 0 0 0-2-1.2c-1.6-.2-3.6.8-5.6 2.6-1 .9-1.7 2-2.3 3.2zm10 39.1-6.2-.1s3-16.7 12.5-19.5c1.8-.5 3.7-1 5.7-1.3l4-.8c.1-1.6-.5-3.6-1.3-5.9-.6-1.7-1.2-3.5-1.5-5.5-.6-3.9.4-7.3 3-9.6 3-2.9 7.9-3.8 13.4-2.5 3.2.7 5.5 2.2 7.6 3.6 2.9 2 4.6 3 8.2.5 4.3-2.9-1.4-14.3-4.4-21l11.3-4.6c1.5 3.3 8.8 20.3 4 30a11.5 11.5 0 0 1-8.1 6.2c-8 1.8-12.6-1.3-16-3.6-1.6-1-3-1.9-4.6-2.3-10.6-3 4.2 12.6-2.7 19.6-4.2 4.2-14.4 5.3-15 5.5-6.6 1.6-10 11.3-10 11.3z" fill="currentColor"></path><path d="M44 38.8c-.2 2.2-.3 3.5.3 6.4 2.7 2 8.7 2 8.7 2l-.6-2v-.3c-6.1-3-8.4-6.1-8.4-6.1zm-12.5 9.8-10.3-5 5.1-7.5 8.2 5.4zm-15.2-14A26 26 0 0 1 5 28.9l5.2-6c1.6 1.2 5 3.5 7.2 3.8l-1.1 7.9zM25.6 21.3 18 18.8a18 18 0 0 0 .7-8.3l7.9-1.3c.6 4 .3 8.2-1 12zM73 15.3l7.9-1.7L83 23.9l-7.8 1.7zM92.5 17.8 87 12c2.8-2.8 3.5-6.3 3.5-6.4L98.4 7c-.1.6-1.1 6.3-6 10.9zM95.5 48.6l7-2.2 2.3 7.7-7 2.1zM97.5 113l-7.9-1c.3-2.7-1.8-6.2-2.4-7l6.4-4.8c.5.6 4.7 6.4 4 12.8zM120.4 102.9c-3-.5-6-.6-9.1-.5l-.3-8c3.5-.2 7 0 10.6.6l-1.2 7.9zM109.6 113.9l5.6-5.7 7.8 7.6-5.6 5.7zM93.1 63.3 99 70l-6.6 5.8-5.8-6.6z" fill="currentColor"></path></svg> </span><strong>Celebration</strong></p><div class=" flow"> This web feature is now available in all three major browser engines! </div></aside>
<p>CSS now supports color spaces that allow us to access colors outside of the sRGB <a href="https://developer.chrome.com/articles/high-definition-css-color-guide/#what-is-a-color-gamut" rel="noopener">gamut</a>. This means that you can support HD (high definition) displays, using colors from HD gamuts. This support comes with new functions to make better use of color on the web.</p>
<h2 id="accessing-color-spaces-from-css">Accessing color spaces from CSS <a class="headline-link" href="https://web.dev/color-spaces-and-functions/#accessing-color-spaces-from-css">#</a></h2>
<p>We already have a number of functions that allow us to access colors within the sRGB gamut—<code>rgb()</code>, <code>hsl()</code>, and <code>hwb()</code>. Now supported in browsers is the <code>color()</code> function, a normalized way to access colors within any RGB color space. This includes sRGB, Display P3, and Rec2020. You can see some examples in the following CSS:</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.valid-css-color-function-colors</span> <span class="token punctuation">{</span><br />  <span class="token property">--srgb</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>srgb 1 1 1<span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token property">--srgb-linear</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>srgb-linear 100% 100% 100% / 50%<span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token property">--display-p3</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>display-p3 1 1 1<span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token property">--rec2020</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>rec2020 0 0 0<span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token property">--a98-rgb</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>a98-rgb 1 1 1 / 25%<span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token property">--prophoto</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>prophoto-rgb 0% 0% 0%<span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token property">--xyz</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>xyz 1 1 1<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/color#browser_compatibility" target="_blank">Source</a>
</div>
<p>Also supported are several functions allowing access to color spaces other than sRGB using <code>lch()</code>, <code>lab()</code>, <code>oklch()</code>, and <code>oklab()</code>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/lch#browser_compatibility" target="_blank">Source</a>
</div>
<p>You can learn about all of these different color spaces in the <a href="https://developer.chrome.com/articles/high-definition-css-color-guide/" rel="noopener">High definition CSS color guide</a>.</p>
<h2 id="the-color-mix-function">The <code>color-mix()</code> function <a class="headline-link" href="https://web.dev/color-spaces-and-functions/#the-color-mix-function">#</a></h2>
<p>As well as these new color spaces, all engines now support the <code>color-mix()</code> function. This function enables mixing of one color into another, in any of the color spaces. In the following CSS, 25% of blue is mixed into white, in the srgb color space.</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span><br />  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">color-mix</span><span class="token punctuation">(</span>in srgb<span class="token punctuation">,</span> blue 25%<span class="token punctuation">,</span> white<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16.2, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16.2
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/color-mix#browser_compatibility" target="_blank">Source</a>
</div>
<p><a href="https://developer.chrome.com/blog/css-color-mix/" rel="noopener">Learn more about <code>color-mix()</code></a></p>
<p>These new functions and color spaces promise to bring vibrant HD color to the web. For inspiration, make a start by creating some beautiful gradients using the HD gradient generator at <a href="https://gradient.style/" rel="noopener">gradient.style</a>.</p>
<p><em>Hero image by <a href="https://unsplash.com/fr/@yogidan2012" rel="noopener">Daniele Levis Pelusi</a></em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[5月份网络平台新功能]]></title>
            <link>https://web.dev/web-platform-05-2023/</link>
            <guid>https://web.dev/web-platform-05-2023/</guid>
            <content:encoded><![CDATA[<h2 id="stable-browser-releases">Stable browser releases <a class="headline-link" href="https://web.dev/web-platform-05-2023/#stable-browser-releases">#</a></h2>
<p>In May 2023, <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/113" rel="noopener">Firefox 113</a>, <a href="https://developer.chrome.com/blog/new-in-chrome-113/" rel="noopener">Chrome 113</a>, <a href="https://developer.chrome.com/blog/new-in-chrome-114/" rel="noopener">Chrome 114</a>, and <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_5-release-notes" rel="noopener">Safari 16.5</a> became stable. Let's take a look at what this means for the web platform.</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text"><p class="cluster color-state-bad-text"><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">   <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z"></path> </svg></span><strong>Caution</strong></p><div class=" flow"> We include browser compatibility data pulled from MDN in these posts which may not have been updated yet for very recent browser releases. The post will show the correct information as soon as it appears in the <a href="https://github.com/mdn/browser-compat-data/releases">browser-compat-data release</a>. </div></aside>
<h3 id="webgpu">WebGPU <a class="headline-link" href="https://web.dev/web-platform-05-2023/#webgpu">#</a></h3>
<p>Chrome 113 includes <a href="https://developer.chrome.com/blog/webgpu-release/" rel="noopener">WebGPU</a>, the successor to the WebGL and WebGL 2 graphics APIs for the web. It provides modern features such as GPU compute, lower overhead access to GPU hardware, the ability to render to multiple canvases from a single graphics device, and better, more predictable performance.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox preview, Preview</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="preview" title="Preview" aria-label="Preview">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 113, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
113
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/GPU#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="first-party-sets">First-Party Sets <a class="headline-link" href="https://web.dev/web-platform-05-2023/#first-party-sets">#</a></h3>
<p><a href="https://developer.chrome.com/docs/privacy-sandbox/first-party-sets/" rel="noopener">First-Party Sets (FPS)</a> is part of the <a href="https://privacysandbox.com/" rel="noopener">Privacy Sandbox</a>. It is a way for organizations to declare relationships among sites, so that browsers can decide when to allow limited third-party cookie access for sites within a set. FPS began a staged rollout in Chrome 113.</p>
<h3 id="css-media-features-and-more">CSS media features and more <a class="headline-link" href="https://web.dev/web-platform-05-2023/#css-media-features-and-more">#</a></h3>
<p>For CSS, Chrome 113 includes the <code>overflow-inline</code> and <code>overflow-block</code> media features.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 66, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      66
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/@media/overflow-inline#browser_compatibility" target="_blank">Source</a>
</div>
<p>And the <code>update</code> media feature.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 102, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      102
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/@media/update-frequency#browser_compatibility" target="_blank">Source</a>
</div>
<p>Also included is the <code>linear()</code> easing function, which you can learn more about in the article <a href="https://developer.chrome.com/articles/css-linear-easing-function/" rel="noopener">Create complex animation curves in CSS with the <code>linear()</code> easing function</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
</div>
<h3 id="css-color-level-4-features">CSS Color Level 4 features <a class="headline-link" href="https://web.dev/web-platform-05-2023/#css-color-level-4-features">#</a></h3>
<p>Firefox 113 includes the <code>color()</code>, <code>lab()</code>, <code>lch()</code>, <code>oklab()</code>, <code>oklch()</code>, and <code>color-mix()</code> functional notations, along with the forced-color-adjust property. This means that the new color spaces and functions are now supported across all three major engines. You can learn more about these color spaces and functions in the <a href="https://web.dev/articles/high-definition-css-color-guide/">High definition CSS color guide</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16.2, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16.2
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/color_value/color-mix#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="more-control-over-nth-child-selections">More control over <code>:nth-child()</code> selections <a class="headline-link" href="https://web.dev/web-platform-05-2023/#more-control-over-nth-child-selections">#</a></h3>
<p>Firefox 113 also adds the ability to pass a selector list into <code>:nth-child()</code> and <code>nth-last-child()</code>. Learn more about this, and see examples in the post <a href="https://developer.chrome.com/articles/css-nth-child-of-s/" rel="noopener">More control over :nth-child() selections with the of S syntax</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 111, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      111
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 9, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      9
    </span>
    </li>
  </ul>
</div>
<h3 id="compressions-streams-api">Compressions Streams API <a class="headline-link" href="https://web.dev/web-platform-05-2023/#compressions-streams-api">#</a></h3>
<p>Now supported in all three major engines due to inclusion in Firefox 113, the Compressions Streams API enables the compression and decompression of streams. This means that JavaScript applications no longer need to bundle a compression library.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 80, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      80
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 80, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      80
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 16.4, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      16.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/CompressionStream#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="css-nesting">CSS nesting <a class="headline-link" href="https://web.dev/web-platform-05-2023/#css-nesting">#</a></h3>
<p>Safari 16.5 mostly resolved issues, but also adds support for <a href="https://developer.chrome.com/articles/css-nesting/" rel="noopener">CSS Nesting</a>, with the new nesting selector <code>&gt;</code>, used to nest related style rules, in a way that will be familiar to developers who have used pre-processors:</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.nesting</span> <span class="token punctuation">{</span><br />  <span class="token property">color</span><span class="token punctuation">:</span> hotpink<span class="token punctuation">;</span><br /><br />  <span class="token selector">> .is</span> <span class="token punctuation">{</span><br />    <span class="token property">color</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span><br /><br />    <span class="token selector">> .awesome</span> <span class="token punctuation">{</span><br />      <span class="token property">color</span><span class="token punctuation">:</span> deeppink<span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 112, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
112
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari preview, Preview</span>
</span>
<span class="wdi-browser-compat__version" data-compat="preview" title="Preview" aria-label="Preview"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/Nesting_selectors#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="balancing-headlines-with-text-wrap-balance">Balancing headlines with <code>text-wrap: balance</code> <a class="headline-link" href="https://web.dev/web-platform-05-2023/#balancing-headlines-with-text-wrap-balance">#</a></h3>
<p>From Chrome 114 you can use <code>text-wrap: balance</code>. This allows you to balance headlines, avoiding the issue of having a single word on the final line, providing a more pleasing and readable result. You can find out more in <a href="https://developer.chrome.com/blog/css-text-wrap-balance/" rel="noopener">CSS text-wrap: balance</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="firefox">
<span class="visually-hidden">Firefox, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
</div>
<h3 id="chips-cookies-having-independent-partitioned-state">CHIPS: Cookies Having Independent Partitioned State <a class="headline-link" href="https://web.dev/web-platform-05-2023/#chips-cookies-having-independent-partitioned-state">#</a></h3>
<p>As part of the work to <a href="https://developer.chrome.com/docs/privacy-sandbox/third-party-cookie-phase-out/" rel="noopener">phase out third-party cookies</a>, <a href="https://developer.chrome.com/docs/privacy-sandbox/chips/" rel="noopener">CHIPS</a> enables opting-in to third-party cookies being partitioned by top-level site using the new cookie attribute <code>Partitioned</code>. CHIPS is available in Chrome 114.</p>
<h3 id="the-popover-api">The Popover API <a class="headline-link" href="https://web.dev/web-platform-05-2023/#the-popover-api">#</a></h3>
<p>Also in Chrome 114 is the <a href="https://developer.mozilla.org/docs/Web/API/Popover_API" rel="noopener">Popover API</a> making it easier to build transient user interface (UI) elements that are displayed on top of all other web app UI.</p>
<p>These include user-interactive elements like action menus, form element suggestions, content pickers, and teaching UI.</p>
<p>The new popover attribute enables any element to be displayed in the <a href="https://developer.chrome.com/blog/top-layer-devtools/" rel="noopener">top layer</a> automatically. This means no more worrying about positioning, stacking elements, focus or keyboard interactions for the developer.</p>
<p>Learn more in <a href="https://developer.chrome.com/blog/introducing-popover-api/" rel="noopener">Introducing the popover API</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 114, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      114
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 114, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
114
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/ToggleEvent#browser_compatibility" target="_blank">Source</a>
</div>
<h2 id="beta-browser-releases">Beta browser releases <a class="headline-link" href="https://web.dev/web-platform-05-2023/#beta-browser-releases">#</a></h2>
<p>Beta browser versions give you a preview of things that will be in the next stable version of the browser. It's a great time to test new features, or removals, that could impact your site before the world gets that release. New betas are <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/114" rel="noopener">Firefox 114</a>, <a href="https://developer.chrome.com/blog/chrome-115-beta/" rel="noopener">Chrome 115</a>, and <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_6-release-notes" rel="noopener">Safari 16.6</a>. These releases bring many great features to the platform. Check out the release notes for all of the details, here are just a few highlights.</p>
<p>Chrome 115 includes multiple values for the CSS <code>display</code> property. This means that <code>display: flex</code> becomes <code>display: block flex</code> and <code>display: block</code> becomes <code>display: block flow</code>. The single values are maintained as legacy keywords, and once in Chrome Stable this makes the multiple values available accross all engines.</p>
<p>Also in Chrome 115 are the <code>ScrollTimeline</code> and <code>ViewTimeline</code> extensions to the Web Animations specification. These enable <a href="https://developer.chrome.com/articles/scroll-driven-animations/" rel="noopener">scroll-driven animations</a> via CSS and JavaScript.</p>
<p>Firefox 114 includes the <a href="https://developer.mozilla.org/docs/Web/API/WebTransport_API" rel="noopener">WebTransport API</a>, a modern update to WebSockets providing support for multiple streams, unidirectional streams, and out-of-order delivery.</p>
<p><em>Photo by <a href="https://unsplash.com/@photozace" rel="noopener">Photoz ace</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[部署 AVIF 以获得响应更快的网站]]></title>
            <link>https://web.dev/avif-updates-2023/</link>
            <guid>https://web.dev/avif-updates-2023/</guid>
            <content:encoded><![CDATA[<p><a href="https://aomedia.org/avif/" rel="noopener">AVIF</a> is a new image format that is quickly gaining popularity on the web because of its high compression rates, efficient performance, and broad adoption. AVIF is an open, royalty-free image format that is based on the AV1 video codec standardized by the Alliance for Open Media. This blog post will provide an overview of how AVIF is adopted in the ecosystem, and what kind of performance and quality benefits developers can expect from AVIF for still images and animations.</p>
<h2 id="whats-new-with-the-avif-ecosystem">What’s new with the AVIF ecosystem? <a class="headline-link" href="https://web.dev/avif-updates-2023/#whats-new-with-the-avif-ecosystem">#</a></h2>
<p>Since the introduction of AVIF in Chrome, Firefox and Safari, usage of AVIF on the web has been growing steadily; <a href="https://caniuse.com/avif" rel="noopener">almost all browsers</a> support AVIF today.</p>
<p>In Chrome alone, AVIF usage grew to approximately one percent in a little over a year after Chrome added AVIF support in stable.</p>
<figure>
  <img alt="A line graph of AVIF usage in Chrome from May 2021 to March 2023. Support has steadily grown from 0% to just beneath 1.4%." decoding="async" height="367" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/QunCznNR5EJf8lp4rGNe.png?auto=format&w=1600 1600w" width="800" />
</figure>
<p>A number of image CDNs, such as <a href="https://techdocs.akamai.com/ivm/changelog/apr-07-2021-new-policy-filters-and-avif-image-format" rel="noopener">Akamai</a>, <a href="https://blog.cloudflare.com/images-avif-blur-bundle/" rel="noopener">Cloudflare</a>, <a href="https://cloudinary.com/blog/how_to_adopt_avif_for_images_with_cloudinary" rel="noopener">Cloudinary</a> and <a href="https://blog.imgix.com/2021/10/27/avif-limited-availability" rel="noopener">Imgix</a> are serving AVIF images today. In a <a href="https://blog.imgix.com/2021/10/27/avif-limited-availability" rel="noopener">blog post</a> announcing AVIF support, Imgix reported 60% file size savings compared to JPEG and 35% savings compared to WebP. These file size savings lead to significant storage savings, but also help pages load faster, yielding faster <a href="https://web.dev/lcp/">Largest Contentful Paint (LCP)</a> times. LCP is one of the <a href="https://web.dev/learn-core-web-vitals/">Core Web Vitals</a>, and represents how quickly the largest block of content on the page has loaded. Using modern codecs to compress images is one of the <a href="https://web.dev/optimize-lcp/">key techniques</a> to reduce LCP. <a href="https://developer.chrome.com/docs/lighthouse/overview/" rel="noopener">Lighthouse</a> is a great Chrome developer tool for testing your web site and to see <a href="https://developer.chrome.com/en/docs/lighthouse/performance/uses-webp-images/" rel="noopener">how much savings AVIF would bring</a>.</p>
<p>WordPress is the <a href="https://www.wpbeginner.com/beginners-guide/ultimate-list-of-wordpress-stats-facts-and-other-research/" rel="noopener">most popular</a> website platform in the world, and there are number of plugins available for developers to convert their images to AVIF, such as:</p>
<ul>
<li><a href="https://wordpress.org/plugins/autoptimize/" rel="noopener">AutoOptimize</a></li>
<li><a href="https://wordpress.org/plugins/webp-converter-for-media/" rel="noopener">Converted for Media</a></li>
<li><a href="https://ewww.io/" rel="noopener">EWWW Image Optimizer</a></li>
<li><a href="https://optimole.com/" rel="noopener">Optimole</a></li>
<li><a href="https://shortpixel.com/" rel="noopener">ShortPixel Image Optimizer</a></li>
</ul>
<p>For more hands-on developers, tools like <a href="https://imagemagick.org/index.php" rel="noopener">ImageMagick</a> and <a href="https://ffmpeg.org/" rel="noopener">FFmpeg</a> are a good starting point.</p>
<h2 id="avif-encode-speed">AVIF encode speed <a class="headline-link" href="https://web.dev/avif-updates-2023/#avif-encode-speed">#</a></h2>
<p>Fast encoding speed and high visual quality are critical for deploying image compression at scale. AVIF software encoding speed has improved significantly over the past two years. Compared to other modern still image formats, AVIF produces smaller files with similar visual quality (see the following graph, lower is better) but is also <a href="https://storage.googleapis.com/avif-comparison/subset1.html" rel="noopener">faster to encode</a>.</p>
<figure>
  <img alt="A bar chart comparing various image codec file sizes as a percentage of the output of TurboJPEG. AVIF is lowest, then JPEG XL, then WebP, and finally MozJPEG." decoding="async" height="415" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/bmoOLQMWjYTQzWK8hPE8.png?auto=format&w=1600 1600w" width="800" />
</figure>
<p>The chart below (higher is better) illustrates how AVIF encoding speed compares to other image formats. Previous generation codecs like WebP benefit from the less complex (but also less efficient) compression algorithms. With a multi-threaded encoding scheme, AVIF achieves similar performance for common use cases while delivering significant compression gains.</p>
<figure>
  <img alt="A comparison of image codec encoding speed. The compared encoders are average AVIF, average JPEG XL, average WebP (one thread), and average MozJPEG (one thread). AVIF is generally one of the fastest image encoders in terms of best quality and default effort, but is the slowest of all encoders for on-the-fly performance." decoding="async" height="433" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/FSzUG4d4ixJQytow1WNU.png?auto=format&w=1600 1600w" width="800" />
</figure>
<p>For developers interested in more detailed encoding speed and visual quality comparisons, the <a href="https://storage.googleapis.com/avif-comparison/index.html" rel="noopener">Image Coding Comparisons</a> site contains reproducible benchmark results.</p>
<p>While software implementations for modern image codecs like AVIF and WebP are optimized for x86 and ARM processors architectures, compressing vast amounts of images at scale can be computationally expensive. One alternative to reduce compression costs is to explore hardware acceleration. <a href="https://www.blue-dot.io/" rel="noopener">Bluedot</a> has developed a hardware accelerated Pulsar-AVIF encoder running on programmable FPGAs, such as AMD's Alveo U250. Compared to software based avifenc, Pulsar-AVIF delivers a 7 to 23 times speed improvement with similar <a href="https://www.blue-dot.io/avif-speed-quality-benchmark/" rel="noopener">compression efficiency</a>.</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th>Encoder</th>
        <th>Encode time (ms)</th>
        <th>Frames per second</th>
        <th>CPU utilization</th>
        <th>Hardware specification</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>
          Pulsar-AVIF<br />
          (FPGA)
        </td>
        <td>60</td>
        <td>409.85</td>
        <td>305%</td>
        <td>
          AMD Alveo U250 1ea + Intel(R) Xeon(R)<br />
          Platinum 8171 CPU at 2.6GHz, 10 cores
        </td>
      </tr>
      <tr>
        <td>
          avifenc<br />
          (libaom)
        </td>
        <td>405</td>
        <td>59.26</td>
        <td>3200%</td>
        <td>
          Intel(R) Xeon(R) Platinum 8370C CPU at<br />
          2.8GHz, 32 cores
        </td>
      </tr>
      <tr>
        <td>
          avifenc<br />
          (SVT-AV1)
        </td>
        <td>1325</td>
        <td>18.11</td>
        <td>3200%</td>
        <td>
          Intel(R) Xeon(R) Platinum 8370C CPU at<br />
          2.8GHz, 32 cores
        </td>
      </tr>
    </tbody>
    <caption>
      AVIF encode speed comparison<br />
      <ul>
        <li>Test set: Kodak (24 images of 768x512)</li>
        <li>Encoding 24 images simultaneously (24 processes)</li>
        <li>Each software encoding process is executed with 4 threads. (-j 4)</li>
      </ul>
    </caption>
  </table>
</div>
<p>Developers can deploy Pulsar-AVIF encoder with cloud virtual machines, such as <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/np-series" rel="noopener">Azure NP-Series</a>.</p>
<h2 id="avif-features-for-responsive-web-pages">AVIF features for responsive web pages <a class="headline-link" href="https://web.dev/avif-updates-2023/#avif-features-for-responsive-web-pages">#</a></h2>
<p>AVIF has a few interesting features that will help to deliver more responsive web pages. This time we’ll dive a bit into animated AVIFs, which are by far the most efficient way of delivering cool animations on the web.</p>
<h3 id="animated-avif">Animated AVIF <a class="headline-link" href="https://web.dev/avif-updates-2023/#animated-avif">#</a></h3>
<p>Animated <a href="https://en.wikipedia.org/wiki/GIF" rel="noopener">GIF</a> is still <a href="https://almanac.httparchive.org/en/2022/media#gifs-animated-and-not" rel="noopener">a popular format</a> for animated images, despite being 35 years old. Biggest drawbacks of animated GIFs are the support for 256 colors only and poor compression leading to very large file sizes while also limiting the resolution or frame rate for practical use cases. In contrast, animated AVIF coding is actually the same as AV1 video coding scheme which provides significant file size savings compared to animated GIF.</p>
<p>We ran a simple benchmark where we encoded a set of animated GIFs to both AVIF and JPEG XL. Over the test set, median file size savings percentage was approximately 86% compared to original GIF files and about 73% compared to animated JPEG XL files*.</p>
<figure>
  <img alt="A comparison of animated image codec performance. AVIF outperforms GIF and JPEG XL in terms of both average and median file size." decoding="async" height="371" loading="lazy" sizes="(min-width: 600px) 600px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ltmx3lsTIyqiVcRAaYXL.png?auto=format&w=1200 1200w" width="600" />
  <figcaption>
    * libavif and libjxl versions: libavif version 4cff6a3 (libaom version v3.5.0), libjxl version 176b1c03. Test set: 15 sample GIFs from <a href="https://commons.wikimedia.org/wiki/Category:Animated_GIF_files." rel="noopener">Wikipedia</a>.
  </figcaption>
</figure>
<p>Chrome, Firefox and Safari all support animated AVIF playbacks.</p>
<p>FFmpeg is one tool to use for creating animated AVIF files, here’s a basic example of converting a GIF to AVIF using FFmpeg:</p>
<div><pre class="language-bash"><code class="language-bash">ffmpeg -i <span class="token string">"<span class="token variable">$INPUT_GIF</span>"</span> -crf <span class="token variable">$CRF</span> -b:v <span class="token number">0</span> <span class="token string">"<span class="token variable">$OUTPUT</span>.avif"</span></code></pre>
</div><p><code>$CRF</code> is the desired output quality on a scale of <code>0</code> to <code>63</code>. Lower values mean better quality and greater file size. <code>0</code> uses <a href="https://en.wikipedia.org/wiki/Lossless_compression" rel="noopener">lossless compression</a>. Start with a value of <code>23</code> for small animated AVIF files.</p>
<p>FFmpeg uses libaom by default for encoding AVIF images, but it can also use <a href="https://github.com/xiph/rav1e" rel="noopener">rav1e</a> or <a href="https://gitlab.com/AOMediaCodec/SVT-AV1" rel="noopener">SVT-AV1</a> when available. More information about encoder choices, tuning the encoding parameters for speed/quality trade-offs can be found in <a href="https://trac.ffmpeg.org/wiki/Encode/AV1" rel="noopener">FFmpeg's AV1 encoding guide</a>.</p>
<p>Another use case is to repackage an AV1 video into AVIF without re-encoding the original file. This is significantly cheaper than decoding/encoding the original AV1 file and makes the AV1 video available for use with the <code>&lt;img&gt;</code> element. Passing <code>-c:v copy</code> to FFmpeg can do this.</p>
<div><pre class="language-bash"><code class="language-bash">ffmpeg -i <span class="token string">"<span class="token variable">$INPUT_AV1_VIDEO</span>"</span> -c:v copy -an <span class="token string">"<span class="token variable">$OUTPUT</span>.avif"</span></code></pre>
</div><h2 id="conclusions">Conclusions <a class="headline-link" href="https://web.dev/avif-updates-2023/#conclusions">#</a></h2>
<p>AVIF use on the web has been steadily increasing since launch and is widely supported by browsers, image CDNs, WordPress plugins and encoding tools. All in all, AVIF is a great choice for serving images on the web; AVIF is fast to encode and decode while providing the best quality or smallest file size, whichever you prefer for your website. AVIF is the most efficient way to deliver animations on the web. If you have questions, comments, or feature requests, please reach out on the <a href="https://groups.google.com/a/aomedia.org/g/av1-discuss" rel="noopener">av1-discuss mailing list</a>, <a href="https://github.com/AOMediaCodec/community/wiki" rel="noopener">AOM Github community</a>, and <a href="https://github.com/AOMediaCodec/av1-avif/wiki" rel="noopener">AVIF wiki</a>.</p>
<p><em>Hero image from <a href="https://unsplash.com/photos/oXlXu2qukGE" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@amal_z7z" rel="noopener">Amal S
</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[redBus 如何改进其网站的 Next Paint 交互 (INP) 并将销售额提高 7%]]></title>
            <link>https://web.dev/redbus-inp/</link>
            <guid>https://web.dev/redbus-inp/</guid>
            <content:encoded><![CDATA[<p>The web and its capabilities are evolving at a fast pace. You can now build rich and full-featured experiences on the web that can achieve much of what native applications can in terms of capabilities.</p>
<p>JavaScript is a primary driver for interactivity across the web, but if it's not used with care, interactions can feel sluggish, and lead users to perceive your website to be non-responsive or altogether broken. Thankfully, the <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> metric was created to address this specific user experience problem.</p>
<p>INP measures all interactions made with a page during its lifecycle, and reports a single value that is representative of a website's speed in responding to user inputs. Simply put, if a page's INP is at or below the <a href="https://web.dev/inp/#what-is-a-good-inp-score">good threshold</a>, all interactions made with a page can be said to be reliably fast.</p>
<p><a href="https://www.redbus.in/" rel="noopener">redBus</a>, a bus booking and ticketing website based in India, undertook a substantial effort to improve their website's INP, even during the time when it was still considered an experimental metric. As a result of their efforts, they were able to increase sales by 7%, illustrating once again the relationship between web performance and business health. Here's what redBus did to improve their website's INP.</p>
<h2 id="top-goals">Top goals <a class="headline-link" href="https://web.dev/redbus-inp/#top-goals">#</a></h2>
<p>When redBus set out to optimize their website's INP, they had three goals in mind:</p>
<ol>
<li>Provide a better user experience for users by focusing on interaction latency regardless of network speed and device capabilities.</li>
<li>Optimize their website to keep interactions as fast as possible.</li>
<li>Ensure that responses from their API were as light as possible to ensure fast data transfer to the front end.</li>
</ol>
<h2 id="the-journey">The journey <a class="headline-link" href="https://web.dev/redbus-inp/#the-journey">#</a></h2>
<p>redBus categorized interaction latency in two ways:</p>
<ol>
<li>Interaction latency caused by blocking JavaScript on the client. When interactions use excessive JavaScript that blocks the main thread, rendering is delayed, and this affects a page's INP.</li>
<li>Network latency caused by API calls. While network activity is not something that INP measures, an interaction reliant on a call to a remote API can feel sluggish on slower networks, or if requests result in large responses.</li>
</ol>
<p>redBus was initially quite confident that the INP for their website would be good, but the <a href="https://en.wikipedia.org/wiki/Real_user_monitoring" rel="noopener">Real User Monitoring (RUM)</a> data for this metric at the 95th percentile told a different story.</p>
<h2 id="how-redbus-measured-inp">How redBus measured INP <a class="headline-link" href="https://web.dev/redbus-inp/#how-redbus-measured-inp">#</a></h2>
<p>redBus relied on the <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>web-vitals</code> JavaScript library</a> built by Google to track not just INP, but all important user experience metrics for all pages across their website. In addition to the <code>web-vitals</code> JavaScript library, redBus used <a href="https://www.elastic.co/what-is/elk-stack" rel="noopener">ELK</a> to analyze INP data that was collected on the front end.</p>
<p>However, how you track your website's INP in <a href="https://web.dev/lab-and-field-data-differences/#field-data">the field</a> may be quite different from how redBus approached the problem. We highly recommend that you read about <a href="https://web.dev/find-slow-interactions-in-the-field/">how to find slow interactions in the field</a> to learn how to best to track INP for your websites, and subsequently <a href="https://web.dev/diagnose-slow-interactions-in-the-lab/">how to reproduce them in the lab</a> before you begin <a href="https://web.dev/optimize-inp/">optimizing interactions</a>.</p>
<p>Once redBus had a system in place for tracking INP, they were able to analyze the data in order to gain a better understanding of where slow interactivity was present.</p>
<figure>
  <img alt="A screenshot of the ELK logging system reporting INP values for analysis." decoding="async" height="287" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    A screenshot of the logging system used by redBus to analyze INP values collected from the field. (<a href="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/s4JxEJgRhQAYZRSi7X3m.png" rel="noopener" target="_blank">Click for a higher resolution version of this image</a>.)
  </figcaption>
</figure>
<h2 id="use-cases">Use cases <a class="headline-link" href="https://web.dev/redbus-inp/#use-cases">#</a></h2>
<p>When users search for fares on the redBus website, they can change the date on the search page to filter selected fares for the desired destination. The interaction to change the date on this page was slow, and was a cause of poor INP.</p>
<p>Additionally, when a user scrolls through fares, additional fares are lazy-loaded from the API. <a href="https://web.dev/inp/#whats-in-an-interaction">Though scrolling itself isn't factored in how INP is measured</a>, the <code>scroll</code> event listener itself schedules a lot of work that must run on the main thread. This work was causing contention on the main thread that increased interaction latency, leading to poor INP on the search page.</p>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/xcxqqKz4JaUO9yQlS3Ex.webm" type="video/webm" />
  </video>
  <figcaption>
    The lazy-loading behavior used to load additional fares from the API on scroll. (<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/xcxqqKz4JaUO9yQlS3Ex.webm" rel="noopener" target="_blank">Click for a higher resolution version of this video</a>.)
  </figcaption>
</figure>
<h2 id="how-redbus-optimized-inp-for-the-search-page">How redBus optimized INP for the search page <a class="headline-link" href="https://web.dev/redbus-inp/#how-redbus-optimized-inp-for-the-search-page">#</a></h2>
<p>To improve the search page's INP, redBus made several optimizations:</p>
<ul>
<li>The <a href="https://developer.mozilla.org/docs/Web/API/Element/scroll_event" rel="noopener"><code>scroll</code></a> event handler was <a href="https://web.dev/debounce-your-input-handlers/">debounced</a> in order to reduce the amount of times the event callback would fire in a given period. By lowering the frequency in which <code>scroll</code> event callback ran, the main thread was able to respond more quickly to user interactions on the search page.</li>
<li>The resulting rendering work was prioritized by using a <a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame" rel="noopener"><code>requestAnimationFrame</code></a> callback. <code>requestAnimationFrame</code> tells the browser that the work in the callback must be done before the next frame.</li>
</ul>
<figure>
  <img alt="A screenshot of the performance panel in Chrome DevTools showing the redBus website firing scroll event callbacks which are not debounced. The result is that the main thread becomes blocked." decoding="async" height="500" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/seddeACyZ710UvE5s5L7.jpg?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    Before: scroll handlers firing without debouncing applied to the event callback. A considerable number of blocking tasks on the main thread are present, which will delay interactions.
  </figcaption>
</figure>
<figure>
  <img alt="A screenshot of the performance panel in Chrome DevTools showing the redBus website firing scroll event callbacks which are debounced. The result is that the main thread is less blocked because the scroll event handlers fire far less frequently." decoding="async" height="500" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/op1p5FGFPsSi8cNU21WS.jpg?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    After: scroll handlers firing with debouncing applied. The scroll event callbacks fire less frequently, giving the main thread more opportunities to respond to user interactions.
  </figcaption>
</figure>
<p>Additionally, the following further optimizations were made to the search results page:</p>
<ul>
<li>New batches of results were fetched on the second to last card on the search results page in order to improve the user experience and visual performance by triggering lazy loading earlier.</li>
<li>Fewer results were fetched on each network call during lazy loading. By reducing fetches from 30 to 10 results, a reduction in INP ranges at 870 to 900 down to 350 to 370 were observed.</li>
</ul>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ZjeONw0InjN2H5FEU0PM.webm" type="video/webm" />
  </video>
  <figcaption>
    The lazy-loading behavior used to load additional fares from the API on scroll. (<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ZjeONw0InjN2H5FEU0PM.webm" rel="noopener" target="_blank">Click for a higher resolution version of this video</a>.)
  </figcaption>
</figure>
<p>While these changes significantly improved the INP of the search page, there was still the problem where the <a href="https://developer.mozilla.org/docs/Web/API/HTMLElement/change_event" rel="noopener"><code>change</code></a> event on the search page's input fields would call an expensive reducer function to update the user interface. This resulted in unnecessary rerendering of the user interface, which affected the page's INP.</p>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/9A46NHqYLxgWLkFsKGmF.webm" type="video/webm" />
  </video>
  <figcaption>
    INP values reported in the console while the user types in an input field. The resulting INP value of 344 observed in a lab setting falls within the "need improvement" thresholds. (<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/9A46NHqYLxgWLkFsKGmF.webm" rel="noopener" target="_blank">Click for a higher resolution version of this video</a>.)
  </figcaption>
</figure>
<p>To optimize this interaction, redBus managed the state of input components locally and synced it with the <a href="https://react-redux.js.org/" rel="noopener">Redux</a> store only when an input's <a href="https://developer.mozilla.org/docs/Web/API/Element/blur_event" rel="noopener"><code>blur</code></a> event was fired. This change reduced the number of rerenders and eliminated unwanted rerendering of the user interface by calling the reducer less frequently.</p>
<figure>
  <video autoplay="" loop="" muted="" playsinline="">
    <source src="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/gD8RNByfNP8IsjytGbXZ.webm" type="video/webm" />
  </video>
  <figcaption>
    Improved INP as a result of calling the reducer less frequently on an input field change. (<a href="https://web-dev.imgix.net/video/jL3OLOhcWUQDnR4XjewLBx4e3PC3/gD8RNByfNP8IsjytGbXZ.webm" rel="noopener" target="_blank">Click for a higher resolution version of this video</a>.)
  </figcaption>
</figure>
<p>With this change, the page's INP improved by 72%, resulting in a faster and smoother user experience that users are more likely to engage with.</p>
<h2 id="business-impact">Business impact <a class="headline-link" href="https://web.dev/redbus-inp/#business-impact">#</a></h2>
<p>The relationship between business health and page performance is well-known. Though INP is a relatively new metric compared to other Core Web Vitals, redBus observed better business outcomes by focusing on improving this important user-centric performance metric. <strong>The result was a 7% overall increase in sales.</strong></p>
<p>In short, INP helped to paint a picture of runtime performance issues on the redBus website. With the knowledge that there were improvements to be made, redBus was able to observe the problem, reproduce it, and use that crucial information to make optimizations that were beneficial to redBus and its business.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[介绍基线]]></title>
            <link>https://web.dev/introducing-baseline/</link>
            <guid>https://web.dev/introducing-baseline/</guid>
            <content:encoded><![CDATA[<p>Baseline helps you to see, at a glance, whether a feature or API is safe to use in your site or web applications. In this post, learn about the ideas that led to this concept, and how we hope it will help you.</p>
<div class="youtube">  <lite-youtube videoid="eZa3BgGaAeA">  </lite-youtube></div>
<h2 id="keeping-up-with-changes-to-the-web-platform">Keeping up with changes to the web platform <a class="headline-link" href="https://web.dev/introducing-baseline/#keeping-up-with-changes-to-the-web-platform">#</a></h2>
<p>The web of today changes rapidly. Our browsers are <em>evergreen</em>, with new features landing in stable browsers each month. This is exciting, however it also poses problems. How do web developers keep up with all of this change? How do you know when it's safe to use a feature? When is it the right time to start to learn, and to invest in new features?</p>
<p>In the past, we often explained browser support to stakeholders by tying it to a certain browser release (for example, Internet Explorer 11) because the line in the sand a non-evergreen browser created was clear to everyone. Today, the landscape can often seem less clear, with so many features landing it's a lot of work to check support for everything we use.</p>
<p>We know how much of a problem this is to developers, because you have consistently <a href="https://web.dev/deep-dive-into-developer-pain-points/">told us that it's a problem</a>. Over two years ago we decided it was a problem we wanted to try to address.</p>
<h2 id="getting-our-own-house-in-order">Getting our own house in order <a class="headline-link" href="https://web.dev/introducing-baseline/#getting-our-own-house-in-order">#</a></h2>
<p>We recognized that we were adding to confusion about the status of features, mixing experimental things in with stable content on our sites. So, we've improved the clarity of our own communication channels. We now use web.dev to publish content about the stable web, those things that we can now describe as part of Baseline, and those that are very close to that status. We also highlight the work of other browsers, as we all work together to improve the interoperability of the platform.</p>
<p>On web.dev you'll find content such as the <a href="https://web.dev/tags/newly-interoperable/">newly interoperable</a> series, celebrating features that are now supported in all three major engines. We also have our monthly series, covering <a href="https://web.dev/tags/new-to-the-web/">what's new to the web platform</a> sharing the work of all browsers, and updates about Interop 2023. This site is also home to our best practices guidance in subjects such as performance, accessibility, and fundamental web development skills.</p>
<p>On <a href="https://developer.chrome.com/" rel="noopener">developer.chrome.com</a> you can learn about the new things that Chrome is bringing to the web platform. Some of these things are experimental, or only in Chrome right now. Many of the things we post about on developer.chrome.com are coming to other browsers, and we hope to celebrate their interoperable moments very soon, but we want you to have clarity about their status and browser support.</p>
<p>We have also been adding clear browser support information to everything that we publish, and when our team talks about features at conferences.</p>
<p>Documentation is really important for adoption of new features, and this year we've made sure that the new features we are landing in Chrome have documentation over on MDN. For example, take a look at the documentation for <a href="https://developer.mozilla.org/docs/Web/API/View_Transitions_API" rel="noopener">View Transitions</a> and <a href="https://developer.mozilla.org/docs/Web/API/WebGPU_API" rel="noopener">WebGPU</a>. We also help support <a href="https://openwebdocs.org/" rel="noopener">Open Web Docs</a> who contribute documentation for the entire web platform to MDN.</p>
<h2 id="working-with-others">Working with others <a class="headline-link" href="https://web.dev/introducing-baseline/#working-with-others">#</a></h2>
<p>Improving what we do was important, however to address the bigger issue we needed to work with others. We've been successfully working with our partners at other browser vendors and related companies through <a href="https://web.dev/interop-2022-wrapup/">Interop 2022</a> and <a href="https://web.dev/interop-2023/">2023</a>. Forming the <a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX Community Group</a> brought everyone together to think about this issue of clarity across the platform as a whole.</p>
<p>The group is working together on a <a href="https://github.com/web-platform-dx/feature-set" rel="noopener">feature set</a>, a way to group web platform features to show their support status, and this feature-set is key to the concept of Baseline.</p>
<h2 id="creating-platform-wide-clarity-with-baseline">Creating platform-wide clarity with Baseline <a class="headline-link" href="https://web.dev/introducing-baseline/#creating-platform-wide-clarity-with-baseline">#</a></h2>
<p><a href="https://web.dev/baseline">Baseline</a> is the line in the sand that is hard to identify in a world of evergreen browsers. Everything that is fully supported in the most recent two versions of major browsers will be part of Baseline. Therefore if your library states that all features used are part of Baseline, developers know what you mean. When creating a proposal for a new application, you can explain to stakeholders that browser support will be tied to Baseline, thus creating clarity for everyone as to levels of support.</p>
<p>From today you will start to see Baseline appearing on pages <a href="https://developer.mozilla.org/docs/Web/CSS/grid" rel="noopener">on MDN</a>, and on <a href="https://web.dev/baseline-features/">web.dev</a>.</p>
<p>As Baseline will be a continuously moving line, with new features becoming part of that set each month, every year we will publish a cut of features that are part of Baseline at one moment in time. For extra clarity, you can tie support to Baseline 24, for example.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> We're also quite excited by the ability to compare year-on-year what Baseline looks like. What will have changed between Baseline 24 and Baseline 25? That will be interesting to see. </div></aside>
<h2 id="whats-next">What's next? <a class="headline-link" href="https://web.dev/introducing-baseline/#whats-next">#</a></h2>
<p>We'll be continuing the rollout of Baseline across web.dev. When reading an article or tutorial, you'll be able to see when the features described are part of Baseline. You won't get part of the way through something and realize it uses something that doesn't have good browser support.</p>
<p>We'll be providing widgets that you can use on your own articles or libraries, indicating support for the Baseline feature set.</p>
<p>We'll also be working to ensure that new features we are landing in Chrome become part of Baseline as quickly as possible. Watch out for future posts where we'll talk more about that work.</p>
<p>And we'll be gathering feedback from developers to find out how this idea is working in practice, and what more you would like to see. Keep an eye on the <a href="https://web.dev/baseline/">Baseline page</a>, or offer feedback right now via the <a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX Community Group</a>.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[推进交互到下一个绘画]]></title>
            <link>https://web.dev/inp-cwv/</link>
            <guid>https://web.dev/inp-cwv/</guid>
            <content:encoded><![CDATA[<p>Chrome's mission with the <a href="https://web.dev/vitals/">Web Vitals program</a> is to help developers focus on the metrics that are essential to great user experiences—the Core Web Vitals. One important aspect of the user experience that we've been focusing on is responsiveness, which is the ability of a web page to react quickly to user interactions.</p>
<p><a href="https://web.dev/fid/">First Input Delay (FID)</a> is the Core Web Vital metric that measures responsiveness, but as we've written in the past, there are <a href="https://web.dev/better-responsiveness-metric/">known limitations of FID</a>. This led us to explore and seek feedback on a (then) <a href="https://web.dev/responsiveness/">experimental metric</a> that addresses these limitations more effectively. In 2022, we announced <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> as  that new metric, made it widely available in our tools, and started working with the community to test its efficacy.</p>
<p>After another year of testing and gathering feedback from the community, we're ready to take the training wheels off and announce that INP is no longer experimental. Furthermore, effective March 2024, we're also committed to promoting INP as the new Core Web Vital metric for responsiveness, replacing FID.</p>
<p>In this post, we'll cover more about the motivation behind the decision, exactly what's changing, and how to get started. For more on how this affects Google Search, refer to <a href="https://developers.google.com/search/blog/2023/05/introducing-inp" rel="noopener">their blog post</a>.</p>
<h2 id="a-better-responsiveness-metric">A better responsiveness metric <a class="headline-link" href="https://web.dev/inp-cwv/#a-better-responsiveness-metric">#</a></h2>
<p>FID was a huge step forward when we <a href="https://blog.chromium.org/2020/05/introducing-web-vitals-essential-metrics.html" rel="noopener">introduced</a> it as a Core Web Vital in 2020. It offered developers a new way to measure responsiveness <em>as real users experience it</em>, which has always been an important part of the Web Vitals program. Unlike similar metrics that only approximate page interactivity—like <a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a> and <a href="https://web.dev/tti/">Time To Interactive (TTI)</a>—FID directly measures the user experience. Crucially, a page could have slow TBT or TTI and still be perceived as responsive, because of the way real users interact with the page.</p>
<p>While it did improve the way we measure responsiveness, FID wasn't without limitations. The name itself actually gives away two such limitations: &quot;first input&quot; and &quot;delay&quot;.  FID only reports the responsiveness of the <em>first</em> time a user interacts with the page. Even though first impressions are important, the first interaction is not necessarily representative of <em>all</em> interactions throughout the life of a page. Further, FID only measures the <em>input delay</em> portion of the first interaction, which is the amount of time the browser had to wait (due to main thread busyness) before even beginning to handle the interaction.</p>
<p>Enter INP. Rather than only measuring the first interaction, INP takes <a href="https://web.dev/inp/#whats-in-an-interaction"><em>all</em> interactions</a> into account, reporting one of the slowest over the entire lifetime of the page. And, rather than only measuring the delay portion, INP measures the full duration from the start of the interaction, through the event handler, and until the browser is able to paint the next frame. Hence, Interaction to <em>Next Paint</em>. These implementation details make INP a much more comprehensive measure of user-perceived responsiveness than FID.</p>
<h2 id="evolving-inp">Evolving INP <a class="headline-link" href="https://web.dev/inp-cwv/#evolving-inp">#</a></h2>
<p>Starting today, INP is no longer experimental and will instead be considered a <a href="https://web.dev/vitals/#pending"><em>pending</em> Core Web Vital metric</a>. This is a new designation to indicate that INP has proven its readiness to replace FID—but we're not making the change just yet. To give the ecosystem time to adjust, INP will officially become a stable Core Web Vital metric in March 2024.</p>
<figure>
  <img alt="Graphic showing the timeline of INP phases, starting from when Chrome announced experimental support for INP in May 2022, to today in May 2023 when Chrome is announcing that INP is now a non-experimental, pending Core Web Vital metric, and finally to March 2024 when INP becomes a stable Core Web Vital metric, replacing FID." decoding="async" height="270" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/so4oTRZP5vEEB6m8xo5L.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    Graphic showing the timeline of INP phases.
  </figcaption>
</figure>
<p>Across our tools, you'll start to see INP without the <code>experimental</code> prefix or icon. If you programmatically consume INP data from any of the following APIs, you'll need to update your code to switch over to the non-experimental INP field.</p>
<div class="table-wrapper scrollbar">
  <table>
    <thead>
      <tr>
        <th>Tool</th>
        <th>Deprecated field</th>
        <th>New field</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>CrUX API</td>
        <td><code>experimental_interaction_to_next_paint</code></td>
        <td><code>interaction_to_next_paint</code></td>
      </tr>
      <tr>
        <td>CrUX History API</td>
        <td><code>experimental_interaction_to_next_paint</code></td>
        <td><code>interaction_to_next_paint</code></td>
      </tr>
      <tr>
        <td>CrUX BigQuery</td>
        <td><code>experimental.interaction_to_next_paint</code></td>
        <td><code>interaction_to_next_paint</code></td>
      </tr>
      <tr>
        <td>PageSpeed Insights API</td>
        <td><code>experimental_interaction_to_next_paint</code></td>
        <td><code>interaction_to_next_paint</code></td>
      </tr>
      <tr>
        <td>Lighthouse report*</td>
        <td><code>experimental-interaction-to-next-paint</code></td>
        <td><code>interaction-to-next-paint</code></td>
      </tr>
    </tbody>
    <caption style="max-width: 60ch;">
      Map of APIs to their old and new INP field name.<br />
      * Lighthouse will stop using the experimental INP field in version 11.
    </caption>
  </table>
</div>
<p>To ease the transition and avoid breaking any downstream applications, these APIs will continue to serve the experimental INP field for another 90 days. API support for the experimental INP field will end on August 8, 2023.</p>
<p>Meanwhile, FID will remain a Core Web Vital until March 2024. At that time, INP will join <a href="https://web.dev/lcp/">Largest Contentful Paint (LCP)</a> and <a href="https://web.dev/cls/">Cumulative Layout Shift (CLS)</a> as the three stable Core Web Vitals. In a future update, we'll share more information about the precise timing of the change and the plan for FID after it's replaced as a Core Web Vital.</p>
<h2 id="getting-started-with-inp">Getting started with INP <a class="headline-link" href="https://web.dev/inp-cwv/#getting-started-with-inp">#</a></h2>
<style>
  .inp-mobile {
    display: inline;
  }

  .inp-desktop {
    display: none;
  }

  @media screen and (min-width: 640px) {
    .inp-mobile {
      display: none;
    }

    .inp-desktop {
      display: inline;
    }
  }
</style>
<figure>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-mobile" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 296.6 220.2" style="enable-background:new 0 0 296.6 220.2" xml:space="preserve"><style>.st0{fill:#2979FF} .st1{fill-rule:evenodd;clip-rule:evenodd;fill:#0CCE6B} .st2{fill:#191919} .st3{fill-rule:evenodd;clip-rule:evenodd;fill:#FFA400} .st4{fill-rule:evenodd;clip-rule:evenodd;fill:#FF4E42} @media screen and (prefers-color-scheme: light){.st2{fill:#191919}} [data-user-theme=light] .st2 {fill:#191919} @media screen and (prefers-color-scheme: dark){.st2{fill:#fff}} [data-user-theme=dark] .st2{fill:#fff}</style><path class="st0" d="M83.3 63V0h11.9v63H83.3zm26.3 0V0h13.8l25.3 42.2h.7l-.7-12.1V0h11.8v63H148l-26.8-44.6h-.7l.7 12.1V63h-11.6zm65.4 0V0h22.2c4.1 0 7.7.8 10.9 2.5s5.8 4 7.7 7 2.9 6.4 2.9 10.4c0 3.9-1 7.4-2.9 10.4s-4.5 5.4-7.7 7c-3.2 1.7-6.9 2.5-10.9 2.5h-15.6V28.6h15.9c2.1 0 3.8-.4 5.2-1.2s2.5-1.9 3.2-3.2c.7-1.3 1.1-2.8 1.1-4.3s-.4-2.9-1.1-4.2c-.7-1.3-1.8-2.3-3.2-3.2s-3.1-1.2-5.2-1.2h-10.7V63H175z"></path><path class="st1" d="M0 137.1h96v38.4H0v-38.4z"></path><path class="st2" d="M34 161c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-.9-.4-.4-.7-.9-1-1.4-.2-.6-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.6.6-1 1-1.4.4-.4.9-.7 1.4-.9.5-.2 1.1-.3 1.8-.3s1.3.1 1.8.3c.6.2 1 .6 1.4 1l-.9.9c-.2-.2-.4-.4-.6-.5-.2-.1-.5-.3-.8-.3-.3-.1-.6-.1-.9-.1-.4 0-.8.1-1.2.2-.4.1-.7.4-1 .6-.3.3-.5.6-.7 1-.2.4-.2.8-.2 1.3s.1.9.2 1.3c.2.4.4.7.7 1 .3.3.6.5 1 .7.4.1.8.2 1.2.2.4 0 .8-.1 1.1-.2.3-.1.6-.3.9-.5.3-.2.5-.5.6-.8.2-.3.3-.6.3-1H34v-1.2h4.2v.7c0 .6-.1 1.2-.3 1.7-.2.5-.5.9-.9 1.3s-.8.6-1.3.8c-.5.3-1.1.4-1.7.4zm9.5 0c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2 0 .8-.2 1.6-.5 2.2-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.3.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.3-1-.4-1.7-.4h-1.4v6z"></path><path class="st3" d="M96 137.1h105.6v38.4H96v-38.4z"></path><path class="st2" d="M130.8 153.9v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm8.7 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.2 3.7v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.1 3.7v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2s-.2 1.6-.5 2.2c-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.2.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.2-1-.4-1.7-.4h-1.4v6zm9.9 1.4c-.5 0-.9-.1-1.3-.3-.4-.2-.8-.4-1.1-.8-.3-.4-.5-.8-.7-1.3l1.2-.5c.1.5.3.9.7 1.2.3.3.7.5 1.2.5.3 0 .5 0 .8-.1.2-.1.4-.2.6-.4s.2-.4.2-.7c0-.3-.1-.5-.2-.7-.1-.2-.3-.3-.6-.5s-.6-.3-1-.5l-.5-.2c-.2-.1-.5-.2-.7-.3-.2-.1-.5-.3-.7-.5-.2-.2-.4-.4-.5-.7-.1-.3-.2-.6-.2-.9 0-.4.1-.8.3-1.2.2-.4.5-.6.9-.8.4-.2.9-.3 1.4-.3.6 0 1 .1 1.4.3.4.2.7.4.9.7.2.3.4.5.4.8l-1.2.5c0-.2-.1-.3-.2-.5s-.3-.3-.5-.4c-.2-.1-.4-.2-.8-.2-.2 0-.5.1-.7.2-.2.1-.4.2-.5.4-.1.2-.2.3-.2.6s.1.6.4.8c.3.2.6.4 1.1.5l.6.2c.3.1.6.2.8.3.3.1.5.3.7.5.2.2.4.4.5.7.1.3.2.6.2 1s-.1.8-.3 1.2c-.2.3-.4.6-.7.8-.3.2-.6.3-.9.4s-.5.2-.8.2zM107 167.9v-8.6h1.3v8.6H107zm3.2 0v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6h-1.3V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.4zm10.6 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm7.2 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4H128zm2-4h1.5l2.7 3.9v.1h-1.5l-2.7-4zm9.3 4.1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm7.9 1.1-3-8.6h1.4l1.9 5.7.3 1h.1l.3-1 2-5.7h1.4l-3.1 8.6h-1.3zm5.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2h-4.1zm6.2 3.7v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6H167V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.3zm10.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2H171zm6.1 3.7v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm10.5 0V160h1.3v7.9h-1.3zm-2.4-7.4v-1.2h6.1v1.2h-6.1z"></path><path class="st4" d="M200.6 137.1h96v38.4h-96v-38.4z"></path><path class="st2" d="M232.5 160.9v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm11 .1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.6.3 1.1.4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4h-1.2zm2-4h1.5l2.7 3.9v.1H264l-2.6-4zM178.1 219.9c-.5 0-1-.1-1.5-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-1-.8-1.7l1.5-.6c.1.6.4 1 .8 1.4.4.4.9.5 1.4.5.6 0 1.1-.2 1.5-.6.4-.4.6-.9.6-1.5s-.2-1.1-.6-1.5c-.4-.4-.9-.6-1.5-.6-.4 0-.7.1-1 .2-.3.1-.5.4-.7.6l-1.7-.8.7-5.5h5.9v1.6h-4.5l-.4 2.9h.1c.2-.2.5-.3.8-.5.3-.1.7-.2 1.2-.2.6 0 1.2.2 1.7.5s1 .7 1.3 1.3c.3.5.5 1.2.5 1.9s-.2 1.3-.5 1.9c-.3.6-.8 1-1.3 1.3-.7.5-1.4.7-2.1.7zm9.9 0c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm.1-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.7c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm0-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.3c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.6.2-1.1.4-1.7.4zM69 220v-1.6s.2-.1.4-.4c.2-.2.5-.5.8-.9l1.1-1.1 1-1c.3-.3.5-.6.7-.8.3-.3.5-.6.7-.8.2-.2.3-.5.4-.7.1-.2.1-.5.1-.8 0-.3-.1-.5-.2-.8-.1-.3-.3-.4-.6-.6-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.1-.5.3-.6.6-.1.2-.3.4-.3.7l-1.5-.6c.1-.3.2-.5.4-.8.2-.3.4-.5.7-.8.3-.3.6-.5 1-.6.4-.2.9-.3 1.4-.2.7 0 1.3.2 1.9.5.5.3.9.7 1.2 1.2.3.5.4 1 .4 1.6 0 .5-.1.9-.2 1.3-.2.4-.4.8-.7 1.2-.3.4-.5.7-.8 1l-.5.5c-.2.2-.4.5-.7.7l-.7.7-.6.6-.4.4h4.8v1.6H69zm13.2.2c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.6c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.5.3 1 .5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4H108v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.2c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.5.3-1.1.4-1.7.4zM42.4 96.3V82h1.7v14.3h-1.7zm4.6 0V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H47zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.6-.7-1.3-.7-2.2zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7s1-1.5 1.7-2 1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5H65V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-.9.6-1.8.8-2.9.8zm6.7-.3V86.1h1.6v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7s.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2c-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.5.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm11.8 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5s.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2s-1.9.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zm6.5 2.7V86.1h1.7v10.2h-1.7zm.9-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.2-.6.4-.9.4zm8.1 12.3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2s.7 1.7.7 2.7c0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1-.8-1-1.3-1.3c-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3-.5 1.3-.5 2.1.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.2V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zM143 86.1h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.2V82h2.1l7.2 11.4h.1l-.1-2.8V82h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2h-1.7zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .6-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm11.2 2.7V82h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5H215v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2s-.1-.8-.3-1.2c-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14.1.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2-.5-1.1-.5-1.8c0-.8.2-1.4.6-1.9s.9-.9 1.5-1.2c.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7s1.1-.2 1.6-.2c1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.6.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm7.4 1.2V86.1h1.7v10.2h-1.7zm.8-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.2.2-.5.4-.9.4zm3.5 12V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H240zm10.1-10.2h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zM96 172.8c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v20.1h2v-20.1c1.9-.5 3.3-2.1 3.3-4.2 0-2.3-1.9-4.3-4.3-4.3zM201.6 172.6c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v19.8h2v-19.8c1.9-.5 3.3-2.1 3.3-4.2 0-2.4-1.9-4.3-4.3-4.3z"></path></svg>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-desktop" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 658.4 113.6" style="enable-background:new 0 0 658.4 113.6" xml:space="preserve"><style>.st0{fill: #2979FF} v.st1{fill-rule: evenodd;clip-rule: evenodd;fill: #0CCE6B} .st2 {fill: #191919} .st3{fill-rule: evenodd;clip-rule: evenodd;fill: #FFA400} .st4{fill-rule: evenodd;clip-rule: evenodd;fill: #FF4E42} @media screen and (prefers-color-scheme: light){.st2{fill: #191919}} @media screen and (prefers-color-scheme: dark){.st2{fill: #fff}} [data-user-theme=dark] .st2{fill: #fff}</style><path class="st0" d="M30.2 68.7V0h13v68.7h-13zm28.7 0V0H74l27.7 46.1h.8l-.8-13.2V0h12.9v68.7H101L71.7 20.1h-.8l.8 13.2v35.4H58.9zm71.3 0V0h24.2c4.4 0 8.4.9 11.9 2.7 3.5 1.8 6.3 4.4 8.4 7.6 2.1 3.3 3.1 7 3.1 11.3 0 4.3-1 8.1-3.1 11.4-2.1 3.3-4.9 5.8-8.4 7.7-3.5 1.8-7.5 2.7-11.9 2.7h-17V31.2h17.4c2.2 0 4.1-.4 5.7-1.3 1.5-.9 2.7-2.1 3.5-3.5.8-1.4 1.2-3 1.2-4.7 0-1.7-.4-3.2-1.2-4.6-.8-1.4-1.9-2.6-3.5-3.5-1.5-.9-3.4-1.3-5.7-1.3h-11.6v56.5h-13z"></path><path class="st1" d="M303.2 14.9h115.2v43.2H303.2V14.9z"></path><path class="st2" d="M345.3 41.5c-.7 0-1.3-.1-1.9-.4-.6-.2-1.1-.6-1.6-1s-.8-1-1.1-1.6c-.3-.6-.4-1.3-.4-2s.1-1.4.4-2c.3-.6.6-1.1 1.1-1.6.5-.5 1-.8 1.6-1 .6-.2 1.2-.4 1.9-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1l-1 1c-.2-.2-.4-.4-.7-.6-.3-.2-.5-.3-.9-.4-.3-.1-.6-.1-1-.1-.5 0-.9.1-1.3.3-.4.2-.8.4-1.1.7-.3.3-.6.7-.8 1.1-.2.4-.3.9-.3 1.5s.1 1 .3 1.5c.2.4.5.8.8 1.1.3.3.7.6 1.1.7.4.2.9.2 1.3.2s.8-.1 1.2-.2c.4-.1.7-.3 1-.5.3-.2.5-.5.7-.8.2-.3.3-.7.3-1.1h-3.3v-1.3h4.6v.8c0 .7-.1 1.3-.4 1.9-.2.6-.6 1-1 1.5-.4.4-.9.7-1.5.9-.3.2-.9.3-1.6.3zm10.5 0c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm11 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm6.6 1.2v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8z"></path><path class="st3" d="M418.4 14.9h124.8v43.2H418.4V14.9z"></path><path class="st2" d="M460.8 33.3v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm9.7 0v-9.5h5.8v1.4H472V32h4.3v1.4h-5.8zm.7-4.1v-1.4h4.6v1.4h-4.6zm6.9 4.1v-9.5h5.8v1.4h-4.3V32h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8zm10.9 1.6c-.5 0-1-.1-1.5-.3-.5-.2-.9-.5-1.2-.9-.3-.4-.6-.9-.8-1.5l1.4-.6c.1.5.4.9.8 1.3.4.3.8.5 1.3.5.3 0 .6-.1.8-.2.3-.1.5-.3.6-.5.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.6-.5-.3-.2-.7-.3-1.1-.5l-.6-.2c-.3-.1-.5-.2-.8-.4-.3-.1-.5-.3-.7-.5-.2-.2-.4-.5-.5-.7-.1-.3-.2-.6-.2-1 0-.5.1-.9.4-1.3.2-.4.6-.7 1-.9.4-.2 1-.4 1.6-.4.6 0 1.1.1 1.5.3.4.2.7.5 1 .8.2.3.4.6.5.9l-1.3.6c-.1-.2-.2-.4-.3-.5-.1-.2-.3-.3-.5-.4-.2-.1-.5-.2-.8-.2-.3 0-.5.1-.8.2-.2.1-.4.2-.6.4-.1.2-.2.4-.2.6 0 .3.1.6.4.8s.7.4 1.2.6l.6.2c.3.1.6.2.9.4.3.1.6.3.8.6.2.2.4.5.6.8.1.3.2.7.2 1.2s-.1.9-.3 1.3c-.2.4-.4.6-.8.9-.3.2-.7.4-1 .5-.3 0-.7.1-1 .1zM434.4 49.3v-9.5h1.5v9.5h-1.5zm3.6 0v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5h-1.4v-5.4l.1-1.7h-.1l-2.8 7.1h-1.2l-2.8-7.1h-.1l.1 1.7v5.4H438zm11.7 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm8 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1h-1.7l-3-4.4zm10.3 4.6c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm8.8 1.2-3.4-9.5h1.6l2.2 6.3.3 1.1h.1l.4-1.1 2.2-6.3h1.6l-3.5 9.5H479zm6.2 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4H486zm6.8 4.1v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5H501v-5.4l.1-1.7h-.1l-2.8 7.1H497l-2.8-7.1h-.1l.1 1.7v5.4h-1.4zm11.8 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm11.7 0v-8.8h1.5v8.8h-1.5zm-2.7-8.2v-1.4h6.8v1.4h-6.8z"></path><path class="st4" d="M543.2 14.9h115.2v43.2H543.2V14.9z"></path><path class="st2" d="M582.9 41.3v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm12.3.2c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.7.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.1.5 1.8.5zm10.9 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm6.7 1.2v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1H618l-3-4.4zM517.7 102.9c-.6 0-1.1-.1-1.7-.3-.6-.2-1-.6-1.5-1-.4-.5-.7-1.1-.9-1.8l1.7-.7c.2.6.4 1.1.8 1.5.4.4.9.6 1.6.6.7 0 1.2-.2 1.6-.6.4-.4.7-1 .7-1.6 0-.7-.2-1.2-.6-1.6-.4-.4-1-.7-1.6-.7-.4 0-.8.1-1.1.2-.3.2-.6.4-.8.7l-1.8-.8.7-6h6.4v1.7h-4.9l-.4 3.2h.1c.3-.2.6-.4.9-.5.4-.1.8-.2 1.3-.2.7 0 1.3.2 1.9.5.6.3 1 .8 1.4 1.4.4.6.5 1.3.5 2 0 .8-.2 1.5-.5 2.1-.4.6-.8 1.1-1.5 1.4-.7.3-1.5.5-2.3.5zm10.8 0c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.4 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm.1-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6s-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.5.3-2.1.3zM389.2 102.6v-1.8l.4-.4.9-.9c.4-.4.7-.8 1.1-1.2l1.1-1.1.8-.8c.3-.3.6-.6.8-.9.2-.3.3-.5.4-.8.1-.2.1-.5.1-.8 0-.3-.1-.6-.2-.8-.1-.3-.4-.5-.7-.6-.3-.2-.6-.2-1.1-.2-.4 0-.7.1-1 .2-.3.2-.5.4-.7.6-.2.2-.3.5-.3.7l-1.7-.7c.1-.3.2-.6.4-.9.2-.3.4-.6.8-.9.3-.3.7-.5 1.1-.7.4-.2.9-.3 1.5-.3.8 0 1.4.2 2 .5.6.3 1 .7 1.3 1.2.3.5.5 1.1.5 1.7 0 .5-.1 1-.3 1.5-.2.5-.4.9-.7 1.3-.3.4-.6.7-.9 1-.2.1-.4.3-.6.6-.2.2-.5.5-.7.8l-.8.8-.7.7-.4.4h5.2v1.7h-7.6zm14.2.3c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.5 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.3.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6-.2-.2-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.4.3-2.1.3zM0 113.3V99h1.7v14.3H0zm4.6 0v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H4.6zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.5-.7-1.2-.7-2.1zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm6.7-.3v-10.2H35v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7.4-.2.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm11.7 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5.5-.3.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2-.9.5-1.8.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm6.5 2.7v-10.2h1.7v10.2h-1.7zm.9-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.6.4-.9.4zm8.1 12.4c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.3v-10.2H87v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm15.1-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.3V99h2.1l7.2 11.4h.1l-.1-2.8V99h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2H125zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm11.2 2.7V99h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5h-3.9v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2 0-.4-.1-.8-.3-1.2-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14 .3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-.9.2-1.5.2zm.2-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm7.4 1.2v-10.2h1.7v10.2h-1.7zm.8-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.5.4-.9.4zm3.5 12.1v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zM418.1 55.2c-1.8 0-3.3 1.5-3.3 3.3 0 1.5 1 2.7 2.3 3.1V83h2V61.6c1.3-.4 2.3-1.7 2.3-3.1 0-1.8-1.5-3.3-3.3-3.3zM546.5 58.6c0-1.8-1.5-3.3-3.3-3.3s-3.3 1.5-3.3 3.3c0 1.5 1 2.7 2.3 3.1v21.2h2V61.7c1.3-.4 2.3-1.6 2.3-3.1z"></path></svg>
  <figcaption>
    Graphic showing the thresholds for good and poor INP.
  </figcaption>
</figure>
<p>Don't wait for INP to become a Core Web Vital in 2024 to start improving it. Your website may very well be in the <a href="https://httparchive.org/reports/chrome-ux-report#cruxFastFid" rel="noopener">93%</a> of sites that have good FID performance on mobile devices; however, you might be surprised to learn that only <a href="https://httparchive.org/reports/chrome-ux-report#cruxFastInp" rel="noopener">65%</a> of sites have good INP on mobile devices. INP paints a much more accurate picture of responsiveness, so these numbers help us to more clearly see the room for improvement ahead of us.</p>
<p>To find out whether your site has INP issues, how to address them, and all things INP, the best place to start is the <a href="https://web.dev/optimize-inp/">INP optimization guide</a>. Whether you're learning about responsiveness for the first time or you're a performance expert, we've added a lot of new guidance to make it as easy as possible for everyone to learn how to measure and optimize INP.</p>
<p>INP might take some time to learn, and that's just fine. To help you focus on the optimizations with the biggest ROI, earlier this year we published <a href="https://web.dev/top-cwv-2023/">a blog post</a> to distill our guidance down to the most effective recommendations to improve Core Web Vitals. Specifically, we wrote about three must-know techniques that apply equally to optimizing FID and INP: avoid or break up long tasks, avoid unnecessary JavaScript, and avoid large rendering updates. You can learn more about these and many other INP optimization techniques in <a href="https://web.dev/optimize-inp/">our documentation</a>.</p>
<h2 id="the-road-ahead">The road ahead <a class="headline-link" href="https://web.dev/inp-cwv/#the-road-ahead">#</a></h2>
<p>A new bar for responsiveness has been set, and we're excited to see the community rise to the challenge for a better user experience. The early <a href="https://groups.google.com/g/web-vitals-feedback" rel="noopener">feedback</a> and <a href="https://web.dev/tags/case-study/">case studies</a> have been promising, but we know that for many, it may be a long and unfamiliar road ahead. We strive to make that journey as easy as possible with improved <a href="https://github.com/w3c/longtasks/blob/main/loaf-explainer.md" rel="noopener">diagnostics</a>, <a href="https://web.dev/vitals-tools/">tools</a>, and <a href="https://web.dev/optimize-inp/">documentation</a> to help developers along the way.</p>
<p>Stay tuned for updates on INP's exact graduation date in March 2024. And even though the metric is not experimental anymore, we're always open to feedback at <a href="mailto:web-vitals-feedback@googlegroups.com" rel="noopener">web-vitals-feedback@googlegroups.com</a> to help us improve INP and the Web Vitals program as a whole.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@agebarros" rel="noopener">Agê Barros</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[经济时报寻求修复INP]]></title>
            <link>https://web.dev/economic-times-inp/</link>
            <guid>https://web.dev/economic-times-inp/</guid>
            <content:encoded><![CDATA[<p><a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> is a metric that assesses a website's responsiveness to user input. Good responsiveness means that a page is quick to respond to user interactions. The lower a page's INP is, the better it is able to respond to user interactions.</p>
<style>
  .inp-mobile {
    display: inline;
  }

  .inp-desktop {
    display: none;
  }

  @media screen and (min-width: 640px) {
    .inp-mobile {
      display: none;
    }

    .inp-desktop {
      display: inline;
    }
  }
</style>
<figure>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-mobile" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 296.6 220.2" style="enable-background:new 0 0 296.6 220.2" xml:space="preserve"><style>.st0{fill:#2979FF} .st1{fill-rule:evenodd;clip-rule:evenodd;fill:#0CCE6B} .st2{fill:#191919} .st3{fill-rule:evenodd;clip-rule:evenodd;fill:#FFA400} .st4{fill-rule:evenodd;clip-rule:evenodd;fill:#FF4E42} @media screen and (prefers-color-scheme: light){.st2{fill:#191919}} [data-user-theme=light] .st2 {fill:#191919} @media screen and (prefers-color-scheme: dark){.st2{fill:#fff}} [data-user-theme=dark] .st2{fill:#fff}</style><path class="st0" d="M83.3 63V0h11.9v63H83.3zm26.3 0V0h13.8l25.3 42.2h.7l-.7-12.1V0h11.8v63H148l-26.8-44.6h-.7l.7 12.1V63h-11.6zm65.4 0V0h22.2c4.1 0 7.7.8 10.9 2.5s5.8 4 7.7 7 2.9 6.4 2.9 10.4c0 3.9-1 7.4-2.9 10.4s-4.5 5.4-7.7 7c-3.2 1.7-6.9 2.5-10.9 2.5h-15.6V28.6h15.9c2.1 0 3.8-.4 5.2-1.2s2.5-1.9 3.2-3.2c.7-1.3 1.1-2.8 1.1-4.3s-.4-2.9-1.1-4.2c-.7-1.3-1.8-2.3-3.2-3.2s-3.1-1.2-5.2-1.2h-10.7V63H175z"></path><path class="st1" d="M0 137.1h96v38.4H0v-38.4z"></path><path class="st2" d="M34 161c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-.9-.4-.4-.7-.9-1-1.4-.2-.6-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.6.6-1 1-1.4.4-.4.9-.7 1.4-.9.5-.2 1.1-.3 1.8-.3s1.3.1 1.8.3c.6.2 1 .6 1.4 1l-.9.9c-.2-.2-.4-.4-.6-.5-.2-.1-.5-.3-.8-.3-.3-.1-.6-.1-.9-.1-.4 0-.8.1-1.2.2-.4.1-.7.4-1 .6-.3.3-.5.6-.7 1-.2.4-.2.8-.2 1.3s.1.9.2 1.3c.2.4.4.7.7 1 .3.3.6.5 1 .7.4.1.8.2 1.2.2.4 0 .8-.1 1.1-.2.3-.1.6-.3.9-.5.3-.2.5-.5.6-.8.2-.3.3-.6.3-1H34v-1.2h4.2v.7c0 .6-.1 1.2-.3 1.7-.2.5-.5.9-.9 1.3s-.8.6-1.3.8c-.5.3-1.1.4-1.7.4zm9.5 0c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8 0-.6.1-1.2.3-1.8.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8 0 .6-.1 1.2-.3 1.8-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2 0 .8-.2 1.6-.5 2.2-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.3.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.3-1-.4-1.7-.4h-1.4v6z"></path><path class="st3" d="M96 137.1h105.6v38.4H96v-38.4z"></path><path class="st2" d="M130.8 153.9v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm8.7 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.2 3.7v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V149h4.1v1.2h-4.1zm6.1 3.7v-8.6h2.8c.9 0 1.7.2 2.3.5.7.4 1.2.9 1.5 1.5.4.6.5 1.4.5 2.2s-.2 1.6-.5 2.2c-.4.6-.9 1.2-1.5 1.5-.6.4-1.4.5-2.3.5h-2.8zm1.3-1.3h1.4c.6 0 1.2-.1 1.7-.4.5-.2.8-.6 1.1-1 .2-.5.4-1 .4-1.6 0-.6-.1-1.2-.4-1.6-.2-.5-.6-.8-1.1-1-.5-.2-1-.4-1.7-.4h-1.4v6zm9.9 1.4c-.5 0-.9-.1-1.3-.3-.4-.2-.8-.4-1.1-.8-.3-.4-.5-.8-.7-1.3l1.2-.5c.1.5.3.9.7 1.2.3.3.7.5 1.2.5.3 0 .5 0 .8-.1.2-.1.4-.2.6-.4s.2-.4.2-.7c0-.3-.1-.5-.2-.7-.1-.2-.3-.3-.6-.5s-.6-.3-1-.5l-.5-.2c-.2-.1-.5-.2-.7-.3-.2-.1-.5-.3-.7-.5-.2-.2-.4-.4-.5-.7-.1-.3-.2-.6-.2-.9 0-.4.1-.8.3-1.2.2-.4.5-.6.9-.8.4-.2.9-.3 1.4-.3.6 0 1 .1 1.4.3.4.2.7.4.9.7.2.3.4.5.4.8l-1.2.5c0-.2-.1-.3-.2-.5s-.3-.3-.5-.4c-.2-.1-.4-.2-.8-.2-.2 0-.5.1-.7.2-.2.1-.4.2-.5.4-.1.2-.2.3-.2.6s.1.6.4.8c.3.2.6.4 1.1.5l.6.2c.3.1.6.2.8.3.3.1.5.3.7.5.2.2.4.4.5.7.1.3.2.6.2 1s-.1.8-.3 1.2c-.2.3-.4.6-.7.8-.3.2-.6.3-.9.4s-.5.2-.8.2zM107 167.9v-8.6h1.3v8.6H107zm3.2 0v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6h-1.3V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.4zm10.6 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm7.2 0v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4H128zm2-4h1.5l2.7 3.9v.1h-1.5l-2.7-4zm9.3 4.1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.2.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm7.9 1.1-3-8.6h1.4l1.9 5.7.3 1h.1l.3-1 2-5.7h1.4l-3.1 8.6h-1.3zm5.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2h-4.1zm6.2 3.7v-8.6h1.8l2.5 6.5h.1l2.5-6.5h1.8v8.6H167V163l.1-1.5h-.1l-2.5 6.4h-1l-2.5-6.4h-.1l.1 1.5v4.9h-1.3zm10.6 0v-8.6h5.2v1.2h-3.9v6.1h3.9v1.2h-5.2zm.7-3.7V163h4.1v1.2H171zm6.1 3.7v-8.6h1.6l3.9 6.3h.1l-.1-1.7v-4.7h1.3v8.6h-1.4l-4.1-6.6h-.1l.1 1.7v5h-1.3zm10.5 0V160h1.3v7.9h-1.3zm-2.4-7.4v-1.2h6.1v1.2h-6.1z"></path><path class="st4" d="M200.6 137.1h96v38.4h-96v-38.4z"></path><path class="st2" d="M232.5 160.9v-8.6h3c.5 0 1 .1 1.4.3.4.2.8.5 1 .9.3.4.4.9.4 1.4 0 .5-.1 1-.4 1.4-.2.4-.6.7-1 .9-.4.2-.9.3-1.4.3h-2.2v-1.2h2.3c.3 0 .6-.1.8-.2.2-.1.4-.3.5-.5.1-.2.2-.4.2-.7 0-.2-.1-.4-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.3h-1.4zm11 .1c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.5.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.6.3 1.1.4 1.6.4zm9.9 1.2c-.6 0-1.2-.1-1.8-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-.9-.9-1.4-.2-.5-.3-1.1-.3-1.8s.1-1.2.3-1.8c.2-.5.5-1 .9-1.4.4-.4.9-.7 1.4-1 .5-.2 1.1-.3 1.8-.3.6 0 1.2.1 1.8.3.5.2 1 .6 1.4 1 .4.4.7.9.9 1.4.2.5.3 1.1.3 1.8s-.1 1.2-.3 1.8c-.2.5-.5 1-.9 1.4-.4.4-.9.7-1.4 1-.6.2-1.1.3-1.8.3zm0-1.2c.6 0 1.1-.1 1.6-.4.5-.3.8-.7 1.1-1.1.3-.5.4-1.1.4-1.7 0-.6-.1-1.2-.4-1.7-.3-.5-.7-.9-1.1-1.1-.5-.3-1-.4-1.6-.4-.6 0-1.1.1-1.6.4-.5.3-.8.7-1.1 1.1-.3.5-.4 1-.4 1.7 0 .6.1 1.2.4 1.7.3.5.7.9 1.1 1.1.5.3 1 .4 1.6.4zm6 1.1v-8.6h3c.5 0 1 .1 1.4.3.4.2.7.5 1 .9.2.4.4.8.4 1.4 0 .3-.1.7-.2 1s-.3.6-.6.8c-.3.2-.6.4-1 .6-.4.1-.8.2-1.2.2h-2.1v-1.2h2.3c.3 0 .5-.1.7-.2.2-.1.4-.3.5-.5.1-.2.2-.5.2-.7 0-.2-.1-.5-.2-.7-.1-.2-.3-.4-.5-.5-.2-.1-.5-.2-.8-.2h-1.7v7.4h-1.2zm2-4h1.5l2.7 3.9v.1H264l-2.6-4zM178.1 219.9c-.5 0-1-.1-1.5-.3-.5-.2-1-.5-1.4-1-.4-.4-.7-1-.8-1.7l1.5-.6c.1.6.4 1 .8 1.4.4.4.9.5 1.4.5.6 0 1.1-.2 1.5-.6.4-.4.6-.9.6-1.5s-.2-1.1-.6-1.5c-.4-.4-.9-.6-1.5-.6-.4 0-.7.1-1 .2-.3.1-.5.4-.7.6l-1.7-.8.7-5.5h5.9v1.6h-4.5l-.4 2.9h.1c.2-.2.5-.3.8-.5.3-.1.7-.2 1.2-.2.6 0 1.2.2 1.7.5s1 .7 1.3 1.3c.3.5.5 1.2.5 1.9s-.2 1.3-.5 1.9c-.3.6-.8 1-1.3 1.3-.7.5-1.4.7-2.1.7zm9.9 0c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm.1-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.7c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.2-1.2.4-1.9.4zm0-1.7c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.3c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.6.2-1.1.4-1.7.4zM69 220v-1.6s.2-.1.4-.4c.2-.2.5-.5.8-.9l1.1-1.1 1-1c.3-.3.5-.6.7-.8.3-.3.5-.6.7-.8.2-.2.3-.5.4-.7.1-.2.1-.5.1-.8 0-.3-.1-.5-.2-.8-.1-.3-.3-.4-.6-.6-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.1-.5.3-.6.6-.1.2-.3.4-.3.7l-1.5-.6c.1-.3.2-.5.4-.8.2-.3.4-.5.7-.8.3-.3.6-.5 1-.6.4-.2.9-.3 1.4-.2.7 0 1.3.2 1.9.5.5.3.9.7 1.2 1.2.3.5.4 1 .4 1.6 0 .5-.1.9-.2 1.3-.2.4-.4.8-.7 1.2-.3.4-.5.7-.8 1l-.5.5c-.2.2-.4.5-.7.7l-.7.7-.6.6-.4.4h4.8v1.6H69zm13.2.2c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.4.3.9.5 1.5.5zm10.5 1.6c-.7 0-1.3-.1-1.9-.4-.5-.3-1-.7-1.4-1.2-.4-.5-.7-1.1-.9-1.8-.2-.7-.3-1.4-.3-2.2 0-.8.1-1.6.3-2.2.2-.7.5-1.3.9-1.8s.9-.9 1.4-1.2c.6-.3 1.2-.5 1.9-.5s1.3.2 1.9.5c.6.3 1 .7 1.4 1.2.4.5.7 1.1.9 1.8.2.7.3 1.4.3 2.2 0 .8-.1 1.6-.3 2.2-.2.7-.5 1.3-.9 1.8s-.9.9-1.4 1.2c-.6.3-1.2.4-1.9.4zm0-1.6c.6 0 1-.2 1.5-.5.4-.4.7-.9 1-1.5.2-.6.3-1.3.3-2.1s-.1-1.5-.3-2.1c-.2-.6-.5-1.1-1-1.5-.4-.4-.9-.5-1.5-.5s-1.1.2-1.5.5c-.4.4-.7.8-.9 1.5-.2.6-.3 1.3-.3 2.1s.1 1.5.3 2.1c.2.6.5 1.1.9 1.5.5.3 1 .5 1.5.5zm10 1.4v-8.2h1.6v1.1h.1c.2-.3.4-.5.6-.7.3-.2.6-.4.9-.5.3-.1.7-.2 1-.2.6 0 1.1.1 1.5.4.4.3.7.7.9 1.1.3-.4.6-.8 1.1-1.1.5-.3 1-.5 1.7-.5 1 0 1.7.3 2.1.9.5.6.7 1.4.7 2.3v5.2h-1.7v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4H108v-4.9c0-.7-.1-1.1-.4-1.4-.3-.3-.7-.5-1.2-.5-.4 0-.7.1-1 .3-.3.2-.5.5-.7.9-.2.4-.2.8-.2 1.2v4.4h-1.8zm17.2.2c-.6 0-1.2-.1-1.7-.3-.5-.2-.9-.5-1.2-.8-.3-.3-.5-.7-.7-1.1l1.5-.7c.2.4.5.8.8 1 .4.2.8.3 1.2.3.4 0 .8-.1 1.1-.2.3-.2.5-.4.5-.8 0-.2-.1-.4-.2-.6-.1-.1-.3-.3-.6-.4-.2-.1-.5-.2-.8-.2l-1-.2c-.4-.1-.8-.3-1.1-.5-.3-.2-.6-.5-.8-.8-.2-.3-.3-.7-.3-1.1 0-.5.1-.9.4-1.3.3-.4.7-.6 1.1-.8.5-.2 1-.3 1.6-.3.5 0 1 .1 1.4.2.4.1.8.3 1.1.6.3.3.6.6.8 1l-1.5.7c-.2-.4-.4-.6-.7-.8-.3-.1-.6-.2-1-.2s-.7.1-1 .2c-.3.2-.4.4-.4.6 0 .3.1.5.4.7.2.2.5.3.9.4l1.2.3c.8.2 1.4.5 1.8.9.4.4.6.9.6 1.5 0 .5-.2 1-.5 1.4-.3.4-.7.7-1.2.9-.5.3-1.1.4-1.7.4zM42.4 96.3V82h1.7v14.3h-1.7zm4.6 0V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H47zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.6-.7-1.3-.7-2.2zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7s1-1.5 1.7-2 1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5H65V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-.9.6-1.8.8-2.9.8zm6.7-.3V86.1h1.6v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7s.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2c-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.5.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm11.8 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5s.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2s-1.9.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zm6.5 2.7V86.1h1.7v10.2h-1.7zm.9-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.2-.6.4-.9.4zm8.1 12.3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2s.7 1.7.7 2.7c0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1-.8-1-1.3-1.3c-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3-.5 1.3-.5 2.1.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.2V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zM143 86.1h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.6-1.7.8-2.7.8zm0-1.5c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.2V82h2.1l7.2 11.4h.1l-.1-2.8V82h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2h-1.7zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V90h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .6-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5V83.3h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.6-.7-1.3-.7-2.2zm11.2 2.7V82h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5H215v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2s-.1-.8-.3-1.2c-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14.1.3c-.8 0-1.4-.1-2-.4s-1-.7-1.3-1.2-.5-1.1-.5-1.8c0-.8.2-1.4.6-1.9s.9-.9 1.5-1.2c.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1s.7.2 1 .3c.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7s1.1-.2 1.6-.2c1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8s-.7.5-1.1.7c-.6.2-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5s-1-.2-1.5-.2c-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4 1 .4 1.6.4zm7.4 1.2V86.1h1.7v10.2h-1.7zm.8-12c-.3 0-.6-.1-.9-.4s-.4-.5-.4-.9c0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.2.2-.5.4-.9.4zm3.5 12V86.1h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V90c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H240zm10.1-10.2h6v1.5h-6v-1.5zm1.7 7.5V83.3h1.7v10c0 .5.1.9.3 1.2s.6.4 1.1.4c.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8s-.7-1.3-.7-2.2zM96 172.8c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v20.1h2v-20.1c1.9-.5 3.3-2.1 3.3-4.2 0-2.3-1.9-4.3-4.3-4.3zM201.6 172.6c-2.4 0-4.3 1.9-4.3 4.3 0 2 1.4 3.7 3.3 4.2v19.8h2v-19.8c1.9-.5 3.3-2.1 3.3-4.2 0-2.4-1.9-4.3-4.3-4.3z"></path></svg>
  <svg title="A diagram of the INP thresholds. An INP at or below 200 milliseconds is considered good. Between 200 and 500 milliseconds suggests a page's responsiveness needs improvement. Anything over 500 milliseconds means that a page's responsiveness is poor." class="inp-desktop" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 658.4 113.6" style="enable-background:new 0 0 658.4 113.6" xml:space="preserve"><style>.st0{fill: #2979FF} v.st1{fill-rule: evenodd;clip-rule: evenodd;fill: #0CCE6B} .st2 {fill: #191919} .st3{fill-rule: evenodd;clip-rule: evenodd;fill: #FFA400} .st4{fill-rule: evenodd;clip-rule: evenodd;fill: #FF4E42} @media screen and (prefers-color-scheme: light){.st2{fill: #191919}} @media screen and (prefers-color-scheme: dark){.st2{fill: #fff}} [data-user-theme=dark] .st2{fill: #fff}</style><path class="st0" d="M30.2 68.7V0h13v68.7h-13zm28.7 0V0H74l27.7 46.1h.8l-.8-13.2V0h12.9v68.7H101L71.7 20.1h-.8l.8 13.2v35.4H58.9zm71.3 0V0h24.2c4.4 0 8.4.9 11.9 2.7 3.5 1.8 6.3 4.4 8.4 7.6 2.1 3.3 3.1 7 3.1 11.3 0 4.3-1 8.1-3.1 11.4-2.1 3.3-4.9 5.8-8.4 7.7-3.5 1.8-7.5 2.7-11.9 2.7h-17V31.2h17.4c2.2 0 4.1-.4 5.7-1.3 1.5-.9 2.7-2.1 3.5-3.5.8-1.4 1.2-3 1.2-4.7 0-1.7-.4-3.2-1.2-4.6-.8-1.4-1.9-2.6-3.5-3.5-1.5-.9-3.4-1.3-5.7-1.3h-11.6v56.5h-13z"></path><path class="st1" d="M303.2 14.9h115.2v43.2H303.2V14.9z"></path><path class="st2" d="M345.3 41.5c-.7 0-1.3-.1-1.9-.4-.6-.2-1.1-.6-1.6-1s-.8-1-1.1-1.6c-.3-.6-.4-1.3-.4-2s.1-1.4.4-2c.3-.6.6-1.1 1.1-1.6.5-.5 1-.8 1.6-1 .6-.2 1.2-.4 1.9-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1l-1 1c-.2-.2-.4-.4-.7-.6-.3-.2-.5-.3-.9-.4-.3-.1-.6-.1-1-.1-.5 0-.9.1-1.3.3-.4.2-.8.4-1.1.7-.3.3-.6.7-.8 1.1-.2.4-.3.9-.3 1.5s.1 1 .3 1.5c.2.4.5.8.8 1.1.3.3.7.6 1.1.7.4.2.9.2 1.3.2s.8-.1 1.2-.2c.4-.1.7-.3 1-.5.3-.2.5-.5.7-.8.2-.3.3-.7.3-1.1h-3.3v-1.3h4.6v.8c0 .7-.1 1.3-.4 1.9-.2.6-.6 1-1 1.5-.4.4-.9.7-1.5.9-.3.2-.9.3-1.6.3zm10.5 0c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm11 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3s.5-1.2.5-1.9-.2-1.3-.5-1.9-.7-1-1.2-1.3c-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3s-.5 1.2-.5 1.9.2 1.3.5 1.9.7 1 1.2 1.3c.6.4 1.2.5 1.8.5zm6.6 1.2v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8z"></path><path class="st3" d="M418.4 14.9h124.8v43.2H418.4V14.9z"></path><path class="st2" d="M460.8 33.3v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm9.7 0v-9.5h5.8v1.4H472V32h4.3v1.4h-5.8zm.7-4.1v-1.4h4.6v1.4h-4.6zm6.9 4.1v-9.5h5.8v1.4h-4.3V32h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h3c1 0 1.9.2 2.6.6.7.4 1.3 1 1.7 1.7s.6 1.5.6 2.5c0 .9-.2 1.8-.6 2.5s-1 1.3-1.7 1.7c-.7.4-1.6.6-2.6.6h-3zm1.5-1.4h1.5c.7 0 1.3-.1 1.8-.4.5-.3.9-.7 1.2-1.2.3-.5.4-1.1.4-1.8s-.1-1.3-.4-1.8c-.3-.5-.7-.9-1.2-1.2-.5-.3-1.1-.4-1.8-.4h-1.5v6.8zm10.9 1.6c-.5 0-1-.1-1.5-.3-.5-.2-.9-.5-1.2-.9-.3-.4-.6-.9-.8-1.5l1.4-.6c.1.5.4.9.8 1.3.4.3.8.5 1.3.5.3 0 .6-.1.8-.2.3-.1.5-.3.6-.5.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.6-.5-.3-.2-.7-.3-1.1-.5l-.6-.2c-.3-.1-.5-.2-.8-.4-.3-.1-.5-.3-.7-.5-.2-.2-.4-.5-.5-.7-.1-.3-.2-.6-.2-1 0-.5.1-.9.4-1.3.2-.4.6-.7 1-.9.4-.2 1-.4 1.6-.4.6 0 1.1.1 1.5.3.4.2.7.5 1 .8.2.3.4.6.5.9l-1.3.6c-.1-.2-.2-.4-.3-.5-.1-.2-.3-.3-.5-.4-.2-.1-.5-.2-.8-.2-.3 0-.5.1-.8.2-.2.1-.4.2-.6.4-.1.2-.2.4-.2.6 0 .3.1.6.4.8s.7.4 1.2.6l.6.2c.3.1.6.2.9.4.3.1.6.3.8.6.2.2.4.5.6.8.1.3.2.7.2 1.2s-.1.9-.3 1.3c-.2.4-.4.6-.8.9-.3.2-.7.4-1 .5-.3 0-.7.1-1 .1zM434.4 49.3v-9.5h1.5v9.5h-1.5zm3.6 0v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5h-1.4v-5.4l.1-1.7h-.1l-2.8 7.1h-1.2l-2.8-7.1h-.1l.1 1.7v5.4H438zm11.7 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm8 0v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1h-1.7l-3-4.4zm10.3 4.6c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.2.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm8.8 1.2-3.4-9.5h1.6l2.2 6.3.3 1.1h.1l.4-1.1 2.2-6.3h1.6l-3.5 9.5H479zm6.2 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4H486zm6.8 4.1v-9.5h2l2.8 7.3h.1l2.8-7.3h2v9.5H501v-5.4l.1-1.7h-.1l-2.8 7.1H497l-2.8-7.1h-.1l.1 1.7v5.4h-1.4zm11.8 0v-9.5h5.8v1.4h-4.3V48h4.3v1.4h-5.8zm.8-4.1v-1.4h4.6v1.4h-4.6zm6.8 4.1v-9.5h1.7l4.3 7h.1l-.1-1.8v-5.2h1.5v9.5h-1.5l-4.5-7.4h-.1l.1 1.8v5.5h-1.5zm11.7 0v-8.8h1.5v8.8h-1.5zm-2.7-8.2v-1.4h6.8v1.4h-6.8z"></path><path class="st4" d="M543.2 14.9h115.2v43.2H543.2V14.9z"></path><path class="st2" d="M582.9 41.3v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.9.6 1.1 1 .3.4.4.9.4 1.5s-.1 1.1-.4 1.5c-.3.4-.7.8-1.1 1-.5.2-1 .4-1.6.4h-2.5v-1.4h2.5c.4 0 .7-.1.9-.2.2-.1.4-.3.5-.6.1-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.2-.5-.2-.9-.2h-1.8v8.2h-1.5zm12.3.2c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.7.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.8.5-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.1.5 1.8.5zm10.9 1.4c-.7 0-1.4-.1-2-.4-.6-.3-1.1-.6-1.6-1.1-.4-.5-.8-1-1-1.6-.2-.6-.4-1.2-.4-1.9s.1-1.3.4-1.9c.2-.6.6-1.1 1-1.6s1-.8 1.6-1.1c.6-.3 1.3-.4 2-.4s1.4.1 2 .4c.6.2 1.1.6 1.6 1.1.5.5.8 1 1 1.6.2.6.4 1.2.4 1.9s-.1 1.3-.4 1.9c-.2.6-.6 1.1-1 1.6s-1 .8-1.6 1.1c-.6.3-1.3.4-2 .4zm0-1.4c.6 0 1.2-.2 1.8-.5.5-.3.9-.7 1.2-1.3.3-.5.5-1.2.5-1.9s-.2-1.3-.5-1.9c-.3-.5-.7-1-1.2-1.3-.5-.3-1.1-.5-1.8-.5s-1.2.2-1.8.5c-.5.3-.9.7-1.2 1.3-.3.5-.5 1.2-.5 1.9s.2 1.3.5 1.9c.3.5.7 1 1.2 1.3.6.4 1.2.5 1.8.5zm6.7 1.2v-9.5h3.3c.6 0 1.1.1 1.6.4.5.2.8.6 1.1 1s.4.9.4 1.5c0 .4-.1.8-.2 1.1s-.4.7-.7.9c-.3.3-.6.5-1 .6-.4.1-.9.2-1.4.2h-2.3v-1.3h2.5c.3 0 .6-.1.8-.2.2-.1.4-.3.6-.6.2-.2.2-.5.2-.8 0-.3-.1-.5-.2-.7-.1-.2-.3-.4-.5-.6-.2-.1-.5-.2-.9-.2h-1.9v8.2h-1.4zm2.2-4.4h1.7l3 4.3v.1H618l-3-4.4zM517.7 102.9c-.6 0-1.1-.1-1.7-.3-.6-.2-1-.6-1.5-1-.4-.5-.7-1.1-.9-1.8l1.7-.7c.2.6.4 1.1.8 1.5.4.4.9.6 1.6.6.7 0 1.2-.2 1.6-.6.4-.4.7-1 .7-1.6 0-.7-.2-1.2-.6-1.6-.4-.4-1-.7-1.6-.7-.4 0-.8.1-1.1.2-.3.2-.6.4-.8.7l-1.8-.8.7-6h6.4v1.7h-4.9l-.4 3.2h.1c.3-.2.6-.4.9-.5.4-.1.8-.2 1.3-.2.7 0 1.3.2 1.9.5.6.3 1 .8 1.4 1.4.4.6.5 1.3.5 2 0 .8-.2 1.5-.5 2.1-.4.6-.8 1.1-1.5 1.4-.7.3-1.5.5-2.3.5zm10.8 0c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.4 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm.1-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6s-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.5.3-2.1.3zM389.2 102.6v-1.8l.4-.4.9-.9c.4-.4.7-.8 1.1-1.2l1.1-1.1.8-.8c.3-.3.6-.6.8-.9.2-.3.3-.5.4-.8.1-.2.1-.5.1-.8 0-.3-.1-.6-.2-.8-.1-.3-.4-.5-.7-.6-.3-.2-.6-.2-1.1-.2-.4 0-.7.1-1 .2-.3.2-.5.4-.7.6-.2.2-.3.5-.3.7l-1.7-.7c.1-.3.2-.6.4-.9.2-.3.4-.6.8-.9.3-.3.7-.5 1.1-.7.4-.2.9-.3 1.5-.3.8 0 1.4.2 2 .5.6.3 1 .7 1.3 1.2.3.5.5 1.1.5 1.7 0 .5-.1 1-.3 1.5-.2.5-.4.9-.7 1.3-.3.4-.6.7-.9 1-.2.1-.4.3-.6.6-.2.2-.5.5-.7.8l-.8.8-.7.7-.4.4h5.2v1.7h-7.6zm14.2.3c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.5.3-1.2.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.5.4 1 .6 1.6.6zm11.5 1.8c-.7 0-1.4-.2-2-.5-.6-.3-1.1-.8-1.5-1.3-.4-.6-.8-1.2-1-2-.2-.8-.3-1.6-.3-2.4 0-.9.1-1.7.3-2.5.2-.8.6-1.4 1-2 .4-.6.9-1 1.5-1.3.6-.3 1.3-.5 2-.5.8 0 1.4.2 2 .5.6.3 1.1.8 1.5 1.3.4.6.8 1.2 1 2 .2.8.3 1.6.3 2.5 0 .9-.1 1.7-.3 2.4-.2.8-.5 1.4-1 2-.4.6-.9 1-1.5 1.3-.6.3-1.3.5-2 .5zm0-1.8c.6 0 1.1-.2 1.6-.6.4-.4.8-.9 1-1.6.2-.7.4-1.4.4-2.2 0-.8-.1-1.6-.4-2.3-.2-.7-.6-1.2-1-1.6-.4-.4-1-.6-1.6-.6-.6 0-1.2.2-1.6.6-.4.4-.8.9-1 1.6-.2.7-.4 1.4-.4 2.3 0 .8.1 1.6.4 2.2.2.7.6 1.2 1 1.6.4.4.9.6 1.6.6zm10.8 1.5v-8.8h1.8V95h.1c.2-.3.4-.5.7-.8s.6-.4.9-.5c.4-.1.7-.2 1.1-.2.7 0 1.2.2 1.7.5s.8.7 1 1.2c.3-.5.7-.8 1.2-1.2.5-.3 1.1-.5 1.8-.5 1 0 1.8.3 2.3 1 .5.6.8 1.5.8 2.5v5.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.7-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.8 1s-.3.9-.3 1.3v4.7h-1.9v-5.4c0-.7-.2-1.2-.5-1.5-.3-.3-.8-.5-1.3-.5-.4 0-.8.1-1.1.4-.3.2-.6.6-.7 1s-.3.9-.3 1.3v4.7h-1.7zm18.6.3c-.7 0-1.3-.1-1.8-.3-.5-.2-.9-.5-1.3-.9-.3-.4-.6-.8-.7-1.2l1.7-.7c.2.5.5.8.9 1.1.4.2.8.4 1.3.4s.9-.1 1.2-.2c.3-.2.5-.4.5-.8 0-.2-.1-.5-.2-.6-.2-.2-.4-.3-.6-.4l-.9-.3-1.1-.2c-.4-.1-.8-.3-1.2-.5-.4-.2-.7-.5-.9-.9-.2-.4-.3-.8-.3-1.2 0-.5.2-1 .5-1.4.3-.4.7-.7 1.2-.9.5-.2 1.1-.3 1.7-.3.6 0 1.1.1 1.5.2.5.1.9.3 1.2.6.3.3.6.6.8 1l-1.6.7c-.2-.4-.5-.7-.8-.8-.3-.2-.7-.2-1.1-.2-.4 0-.8.1-1.1.3-.3.2-.4.4-.4.7 0 .3.1.5.4.7.3.2.6.3 1 .4l1.3.3c.9.2 1.5.6 2 1 .4.4.7 1 .7 1.6 0 .6-.2 1.1-.5 1.5-.3.4-.8.7-1.3 1-.8.2-1.4.3-2.1.3zM0 113.3V99h1.7v14.3H0zm4.6 0v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7H4.6zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.5-.5-.7-1.2-.7-2.1zm10.3 3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm6.7-.3v-10.2H35v1.6h.1c.1-.4.4-.7.7-1 .3-.3.7-.5 1.1-.7.4-.2.8-.2 1.2-.2h.7c.2 0 .3.1.5.2v1.8c-.2-.1-.5-.2-.7-.2-.2-.1-.5-.1-.7-.1-.5 0-1 .1-1.4.4-.4.3-.7.7-1 1.1-.2.5-.4 1-.4 1.5v5.7h-1.7zm10.4.3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-1 .2-1.5.2zm.1-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm11.7 1.5c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-2 .7-2.8.4-.8 1.1-1.5 1.8-1.9.8-.5 1.7-.7 2.7-.7 1.1 0 2.1.3 2.8.8.7.5 1.3 1.2 1.6 2l-1.5.6c-.2-.6-.6-1.1-1.1-1.4-.5-.3-1.1-.5-1.8-.5-.6 0-1.2.2-1.7.5s-.9.8-1.2 1.4c-.3.6-.5 1.3-.5 2 0 .8.2 1.4.5 2 .3.6.7 1 1.2 1.4.5.3 1.1.5 1.7.5.7 0 1.3-.2 1.9-.5.5-.3.9-.8 1.2-1.4l1.5.6c-.3.8-.9 1.5-1.6 2-.9.5-1.8.8-3 .8zm5.5-10.5h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm6.5 2.7v-10.2h1.7v10.2h-1.7zm.9-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.6.4-.9.4zm8.1 12.4c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm7 1.3v-10.2H87v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm15.1-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm10.5 3c-1 0-1.9-.2-2.7-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.7-1.7-.7-2.8 0-1 .2-1.9.7-2.8.4-.8 1.1-1.5 1.8-2 .8-.5 1.7-.7 2.7-.7 1 0 1.9.2 2.7.7.8.5 1.4 1.1 1.9 2 .4.8.7 1.7.7 2.7 0 1-.2 1.9-.7 2.8-.4.8-1.1 1.5-1.9 1.9-.8.5-1.7.8-2.7.8zm0-1.6c.6 0 1.2-.2 1.7-.5s1-.8 1.3-1.3c.3-.6.5-1.3.5-2.1s-.2-1.5-.5-2.1c-.3-.6-.8-1-1.3-1.3-.5-.3-1.1-.5-1.7-.5-.6 0-1.2.2-1.7.5s-1 .7-1.3 1.3c-.3.6-.5 1.3-.5 2.1s.2 1.5.5 2.1c.3.6.8 1 1.3 1.3.5.4 1.1.5 1.7.5zm12.2 1.3V99h2.1l7.2 11.4h.1l-.1-2.8V99h1.7v14.3h-1.8l-7.5-11.9h-.1l.1 2.8v9.2H125zm18.2.3c-1 0-1.9-.2-2.6-.7-.8-.5-1.4-1.1-1.8-1.9-.4-.8-.6-1.7-.6-2.8 0-1 .2-1.9.6-2.7.4-.8 1-1.5 1.7-2s1.6-.8 2.6-.8 1.9.2 2.6.7c.7.4 1.3 1.1 1.7 1.8.4.8.6 1.7.6 2.7v.5h-8.8V107h7c0-.3-.1-.6-.2-.9-.1-.3-.3-.6-.5-.9-.2-.3-.6-.5-.9-.7-.4-.2-.8-.3-1.4-.3-.7 0-1.2.2-1.7.5s-.8.8-1.1 1.4c-.3.6-.4 1.2-.4 2 0 .9.2 1.6.5 2.2.3.6.8 1 1.3 1.3.5.3 1.1.4 1.7.4.8 0 1.4-.2 1.8-.5.5-.4.9-.8 1.2-1.3l1.4.7c-.4.8-1 1.4-1.7 1.9-1 .5-1.9.8-3 .8zm5.5-.3 4.1-5.9h.2l2.9-4.3h2l-4 5.6h-.1l-3.1 4.6h-2zm.1-10.2h1.9l3.2 4.5h.1l4 5.7h-2l-3-4.5h-.1l-4.1-5.7zm9.9 0h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zm11.2 2.7V99h4.8c.8 0 1.5.2 2.2.5.7.4 1.2.8 1.6 1.5.4.6.6 1.4.6 2.2 0 .8-.2 1.6-.6 2.2-.4.6-.9 1.1-1.6 1.5-.7.4-1.4.5-2.2.5h-3.9v-1.6h4c.6 0 1-.1 1.4-.4.4-.3.7-.6.9-1 .2-.4.3-.8.3-1.2 0-.4-.1-.8-.3-1.2-.2-.4-.5-.7-.9-1-.4-.3-.9-.4-1.4-.4h-3.2v12.7h-1.7zm14 .3c-.8 0-1.4-.1-2-.4-.6-.3-1-.7-1.3-1.2-.3-.5-.5-1.1-.5-1.8 0-.8.2-1.4.6-1.9.4-.5.9-.9 1.5-1.2.7-.3 1.4-.4 2.2-.4.4 0 .9 0 1.2.1.4.1.7.2 1 .3.3.1.5.2.7.3v-.6c0-.8-.3-1.4-.8-1.8-.5-.5-1.2-.7-2-.7-.6 0-1.1.1-1.6.4-.5.2-.9.6-1.1 1l-1.3-1c.3-.4.6-.7 1-1 .4-.3.9-.5 1.4-.7.5-.2 1.1-.2 1.6-.2 1.4 0 2.5.4 3.2 1.1.8.7 1.2 1.7 1.2 3v6.5h-1.6v-1.5h-.1c-.2.3-.4.6-.7.8-.3.3-.7.5-1.1.7-.5.1-.9.2-1.5.2zm.2-1.5c.6 0 1.1-.1 1.6-.4.5-.3.9-.7 1.2-1.2.3-.5.5-1 .5-1.6-.3-.2-.7-.4-1.2-.5-.5-.1-1-.2-1.5-.2-1 0-1.7.2-2.1.6-.4.4-.7.9-.7 1.5s.2 1 .6 1.4c.4.2 1 .4 1.6.4zm7.4 1.2v-10.2h1.7v10.2h-1.7zm.8-12.1c-.3 0-.6-.1-.9-.4-.2-.2-.4-.5-.4-.9 0-.3.1-.6.4-.9.2-.2.5-.4.9-.4.3 0 .6.1.9.4.2.2.4.5.4.9 0 .3-.1.6-.4.9-.3.3-.5.4-.9.4zm3.5 12.1v-10.2h1.6v1.5h.1c.3-.5.7-.9 1.3-1.3.6-.4 1.3-.5 2-.5 1.2 0 2.2.4 2.8 1.1.6.7 1 1.7 1 2.9v6.5h-1.7V107c0-1-.2-1.7-.7-2.1-.5-.4-1.1-.6-1.8-.6-.6 0-1.1.2-1.5.5-.4.3-.8.7-1 1.2-.2.5-.4 1-.4 1.6v5.7h-1.7zm10-10.2h6v1.5h-6v-1.5zm1.8 7.5v-10.4h1.7v10c0 .5.1.9.3 1.2.2.3.6.4 1.1.4.2 0 .4 0 .6-.1.2-.1.4-.2.5-.2v1.7c-.2.1-.4.1-.6.2-.2.1-.5.1-.8.1-.9 0-1.5-.2-2.1-.8-.4-.5-.7-1.2-.7-2.1zM418.1 55.2c-1.8 0-3.3 1.5-3.3 3.3 0 1.5 1 2.7 2.3 3.1V83h2V61.6c1.3-.4 2.3-1.7 2.3-3.1 0-1.8-1.5-3.3-3.3-3.3zM546.5 58.6c0-1.8-1.5-3.3-3.3-3.3s-3.3 1.5-3.3 3.3c0 1.5 1 2.7 2.3 3.1v21.2h2V61.7c1.3-.4 2.3-1.6 2.3-3.1z"></path></svg>
</figure>
<h2 id="the-fuzzy-beginning">The fuzzy beginning <a class="headline-link" href="https://web.dev/economic-times-inp/#the-fuzzy-beginning">#</a></h2>
<p>When Google initially introduced INP as an experimental metric with the potential to evolve into one of the Core Web Vitals metrics, the Economic Times team took up the challenge to fix it before it graduates into one, since providing a world class user experience is crucial to our core business values.</p>
<p>INP has been one of the most difficult metrics to solve thus far. In the beginning, it was unclear on how to measure INP effectively. What made it more difficult was the lack of community support—including most Real User Monitoring (RUM) providers not supporting it yet. However, we had Google RUM tools like <a href="https://developer.chrome.com/docs/crux/about/" rel="noopener">Chrome User Experience Report (CrUX)</a>, the <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>web-vitals</code> JavaScript library</a>, and others supporting it, which gave us a sense of where we stood while we were evaluating the path ahead. Our INP was close to 1,000 milliseconds at the origin level when we started.</p>
<p>One thing that emerged while fixing INP in <a href="https://web.dev/find-slow-interactions-in-the-field/">the field</a> was that one of the lab metrics to target could be <a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a>. TBT was already well documented and supported by the community. Despite already meeting the thresholds for Core Web Vitals, however, we weren't doing as well on the TBT front, as it was over 3 seconds when we began.</p>
<h2 id="what-is-tbt,-and-what-steps-did-we-take-to-improve-it">What is TBT, and what steps did we take to improve it? <a class="headline-link" href="https://web.dev/economic-times-inp/#what-is-tbt,-and-what-steps-did-we-take-to-improve-it">#</a></h2>
<p>TBT is a lab metric that measures the responsiveness of a web page to user input during page load. Any task that takes more than 50 milliseconds to execute is considered a long task, and the time after the 50 millisecond threshold is known as the <strong>blocking time</strong>.</p>
<p>TBT is calculated by taking the sum of the blocking time of all long tasks during page load. For example, if there are two long tasks during load, the blocking time is determined as follows:</p>
<ul>
<li>Task A takes 80 milliseconds (30 milliseconds more than 50 milliseconds).</li>
<li>Task B takes 100 milliseconds (50 milliseconds more than 50 milliseconds).</li>
</ul>
<p>The page's TBT will be: 80 milliseconds (30 + 50). The lower the TBT, the better, and TBT also <a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt" rel="noopener">correlates well with INP</a>.</p>
<p>Here’s a quick lab comparison of our TBT before and after taking steps to improve it:</p>
<figure>
  <img alt="A composite image of long tasks during startup as shown in the performance panel of Chrome DevTools, and a report of page metrics. The main thread is blocked during page load for 3,260 milliseconds." decoding="async" height="502" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UfZ9zaCLHjCMcPg74xHV.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    The main thread during startup before optimizing TBT. The TBT is 3,260 milliseconds.
  </figcaption>
</figure>
<figure>
  <img alt="A composite image of long tasks during startup as shown in the performance panel of Chrome DevTools, and a report of page metrics. The main thread is blocked during page load for 120 milliseconds." decoding="async" height="701" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/RLx2y7zTItkaklqxSG17.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    The main thread during startup after optimizing TBT. The TBT is 120 milliseconds.
  </figcaption>
</figure>
<h3 id="minimize-main-thread-work">Minimize main thread work <a class="headline-link" href="https://web.dev/economic-times-inp/#minimize-main-thread-work">#</a></h3>
<p>The browser’s main thread handles everything from parsing HTML, building the DOM, to parsing CSS and applying styles, as well as evaluating and executing JavaScript. The main thread also handles user interactions—that is, click, tap, and keypresses. If the main thread is occupied with doing other work, it may not respond to user inputs efficiently, and may lead to a janky user experience.</p>
<p>This was the most difficult task for us, since we have our own algorithms to detect user identity for serving ads based on subscription status and third party scripts for A/B testing, analytics, and more.</p>
<p>We took small steps at first, such as de-prioritizing loading of less critical business assets. Second, we used <a href="https://developer.mozilla.org/docs/Web/API/Window/requestIdleCallback" rel="noopener"><code>requestIdleCallback</code></a> for non-critical work, which can help to reduce TBT.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'requestIdleCallback'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token punctuation">{</span><br />  <span class="token keyword">this</span><span class="token punctuation">.</span>requestIdleCallbackId <span class="token operator">=</span> <span class="token function">requestIdleCallback</span><span class="token punctuation">(</span><span class="token function">fetchMarketsData</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br />  <span class="token function">fetchMarketsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Fallback in case requestIdleCallback is not supported</span><br /><span class="token punctuation">}</span></code></pre>
</div><p>Specifying a timeout is recommended when using <code>requestIdleCallback</code>, since it makes sure that if the given time is elapsed and the callback is not already been called, it executes the callback immediately after the timeout.</p>
<h3 id="minimize-script-evaluation-time">Minimize script evaluation time <a class="headline-link" href="https://web.dev/economic-times-inp/#minimize-script-evaluation-time">#</a></h3>
<p>We also lazy loaded third party libraries using <a href="https://loadable-components.com/" rel="noopener">Loadable components</a>. We also removed unused JavaScript and CSS by profiling the page with the <a href="https://developer.chrome.com/docs/devtools/coverage/" rel="noopener">coverage tool</a> in Chrome DevTools. It helped us to identify areas where <a href="https://webpack.js.org/guides/tree-shaking/" rel="noopener">tree shaking</a> was needed to ship less code during page load, and therefore reduce the initial bundle size of the application.</p>
<figure>
  <img alt="A screenshot of the coverage tool in Chrome DevTools. Here, the tool displays unused portions of JavaScript and CSS files during page load." decoding="async" height="100" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/uynCVTUjcv4ujJva41PS.png?auto=format&w=1600 1600w" width="800" />
</figure>
<h3 id="reduce-dom-size">Reduce DOM size <a class="headline-link" href="https://web.dev/economic-times-inp/#reduce-dom-size">#</a></h3>
<p>Per Lighthouse, large DOM sizes increase memory usage, causes longer <a href="https://web.dev/economic-times-inp/reduce-the-scope-and-complexity-of-style-calculations/">style recalculations</a>, and produces costly <a href="https://developers.google.com/speed/docs/insights/browser-reflow" rel="noopener">layout reflows</a>.</p>
<figure>
  <img alt="A screenshot of the DOM size audit in Lighthouse. The number of DOM elements reported is 2,706 elements." decoding="async" height="86" loading="lazy" sizes="(min-width: 712px) 712px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JLQfvWp1Fouc55Xbgy7X.png?auto=format&w=1424 1424w" width="712" />
</figure>
<p>We reduced the number of DOM nodes in two ways:</p>
<ul>
<li>First, we rendered our menu items at the user’s request (on click). It decreased the DOM size by around 1,200 nodes.</li>
<li>Second, we lazy loaded less important widgets.</li>
</ul>
<p>Because of all these efforts, we reduced TBT significantly, and our INP was reduced accordingly by almost 50%:</p>
<figure>
  <img alt="A screenshot of the INP audit in CrUX. The INP for the page is 539 milliseconds, which exceeds the &#x27;poor&#x27; threshold." decoding="async" height="216" loading="lazy" sizes="(min-width: 574px) 574px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ojm0miY1lwoFqxZWnYVM.png?auto=format&w=1148 1148w" width="574" />
</figure>
<p>At this point, we nearly ran out of easy wins to further reduce TBT (and INP by proxy), but we knew we had a lot of room for improvement. This is when we decided to upgrade our custom-built UI boilerplate to the latest version of React along with <a href="https://nextjs.org/" rel="noopener">Next.js</a> to make better use of <a href="https://react.dev/reference/react" rel="noopener">hooks</a> to avoid unnecessary re-rendering of components.</p>
<p>Due to more frequent updates and comparatively lesser traffic as compared to the other portions of the website, we began to migrate our <a href="https://economictimes.indiatimes.com/topic/home" rel="noopener">topic pages</a> to Next.js. We also used <a href="https://partytown.builder.io/" rel="noopener">PartyTown</a> for offloading additional heavy main thread work to web workers, along with techniques like <code>requestIdleCallBack</code> for deferring non-critical tasks.</p>
<h2 id="how-has-improving-inp-helped-the-economic-times">How has improving INP helped The Economic Times? <a class="headline-link" href="https://web.dev/economic-times-inp/#how-has-improving-inp-helped-the-economic-times">#</a></h2>
<h3 id="current-tbt-and-inp-on-origin">Current TBT and INP on origin <a class="headline-link" href="https://web.dev/economic-times-inp/#current-tbt-and-inp-on-origin">#</a></h3>
<p>At the time of publishing this post, the TBT for our origin was 120 milliseconds, down from 3,260 milliseconds when we began our optimization efforts. Similarly, the INP for our origin was 257 milliseconds after our optimization efforts, down from over 1,000 milliseconds.</p>
<figure>
  <img alt="A screenshot of the INP audit in CrUX. The INP for the page is 257 milliseconds, which is within the &#x27;needs improvement&#x27; thresholds." decoding="async" height="218" loading="lazy" sizes="(min-width: 582px) 582px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/6cMvebBQKG2nhyc1eYeB.png?auto=format&w=1164 1164w" width="582" />
</figure>
<h3 id="inp-crux-trend">INP CrUX trend <a class="headline-link" href="https://web.dev/economic-times-inp/#inp-crux-trend">#</a></h3>
<p>The traffic received on topic pages represents a significantly smaller portion of overall traffic. Hence, it was an ideal place for experimentation. The CrUX results along with the business outcomes were very encouraging, and led us to expand our efforts across the entire website to reap further benefits.</p>
<figure>
  <img alt="A screenshot of INP distributions as visualized in CrUX over a period of four months, starting in July 2022 and ending in October 2022. Values within the &#x27;poor&#x27; and &#x27;needs improvement&#x27; thresholds declined somewhat, while the values within the &#x27;good&#x27; threshold increased." decoding="async" height="190" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pkPEYIQIeEDKdIKOCFSY.png?auto=format&w=1600 1600w" width="800" />
</figure>
<h3 id="akamai-mpulse-tbt-analysis">Akamai mPulse TBT Analysis <a class="headline-link" href="https://web.dev/economic-times-inp/#akamai-mpulse-tbt-analysis">#</a></h3>
<p>We use <a href="https://www.akamai.com/products/mpulse-real-user-monitoring" rel="noopener">Akamai mPulse</a> as our RUM solution, which measures TBT in the field. We observed a consistent decrease in TBT, clearly mapping to the outcomes of our efforts to reduce INP. As can be seen in the screenshot below, TBT values eventually dropped from approximately 5 seconds in to around 200 milliseconds in the field.</p>
<figure>
  <img alt="A screenshot of a chart in Akamai mPulse, showing a decline in TBT over the course of roughly a month." decoding="async" height="118" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/eS3iIvNxEUhe19GGdDBG.png?auto=format&w=1600 1600w" width="800" />
</figure>
<h2 id="business-outcome">Business outcome <a class="headline-link" href="https://web.dev/economic-times-inp/#business-outcome">#</a></h2>
<p>Overall, our efforts to bring down TBT by 30 times, along with migrating to Next.js helped us reduce INP nearly by 4 times, which eventually led to a <strong>50% decrease in bounce rate and 43% uplift in pageviews</strong> on topic pages.</p>
<figure>
  <img alt="A screenshot of Google Analytics comparing pageviews versus bounce rate. Because of the optimizations made to INP on The Economic Times website, a 50% decrease in bounce rate and a 43% increase in pageviews was realized." decoding="async" height="288" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WOzP0OjtPV6rsjqbtbfe.png?auto=format&w=1600 1600w" width="800" />
</figure>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/economic-times-inp/#conclusion">#</a></h2>
<p>To summarize, INP extensively helped to determine runtime performance issues on parts of the Economic Times website. It has proven to be one of the most effective metrics to positively impact business outcomes. Due to the very encouraging numbers we've observed as the result of this effort, we are motivated to scale our optimization efforts to other areas of our website and reap additional benefits.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[您现在可以使用的基线功能]]></title>
            <link>https://web.dev/baseline-features/</link>
            <guid>https://web.dev/baseline-features/</guid>
            <content:encoded><![CDATA[<div class="youtube">  <lite-youtube videoid="x9rh0Du4Czg">  </lite-youtube></div>
<p>The web is always evolving and browsers update constantly to give developers new tools to innovate on the platform. Things that previously required helper libraries become part of the web platform and supported on all browsers, along with shorter or easier ways to code design elements.</p>
<p>While this constant evolution and adaptation is helpful, it can also bring confusion. It can be difficult to navigate all these updates. As developers, we have questions like, &quot;When will all browser engines support this new feature?&quot; &quot;When can I actually start using those features in my production code?&quot; &quot;For how long should we support older browsers?&quot;</p>
<p>The true answer is &quot;it depends&quot;. What is needed and what is usable really depends on your user base, tech stack, your team structure, and supported devices. But, one thing we all agree, is that the current landscape of the web can make it difficult to make those decisions.</p>
<p>The Chrome team is collaborating with other browser engines and the web community to bring more clarity. This includes our work on projects like <a href="https://wpt.fyi/interop-2023" rel="noopener">Interop 2023</a> which helps to improve interoperability of a set of key features. But what about features landed in the past few years? Are experimental features we learned about two years ago ready to use?</p>
<p>In this post, I want to highlight some features that are now available to all major browser engines for the past two major versions. This is the cut-off point where we feel that the majority of developers will feel a feature is safe to use, and is the feature set we're calling Baseline. For more, please see the announcement <a href="https://web.dev/baseline">of Baseline here</a>.</p>
<h2 id="the-dialog-element">The dialog element <a class="headline-link" href="https://web.dev/baseline-features/#the-dialog-element">#</a></h2>
<p>The <code>&lt;dialog&gt;</code> element is a new HTML element to create dialog prompts such as popups and modals.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 37, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      37
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 98, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      98
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 79, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      79
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/HTML/Element/dialog#browser_compatibility" target="_blank">Source</a>
</div>
<p>To use it, define the modal element, then open the dialog by calling the <code>showModal()</code> method on the dialog element.</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dialog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Hi, I'm a dialog.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>ok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><br />  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">></span></span><br /><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">d<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><br />  Open Dialog<br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre>
</div><p>As a native HTML element, features like focus management, tab tracking, and keeping the stacking context are built in.  For more, read <a href="https://web.dev/building-a-dialog-component/">Building a dialog component</a>.</p>
<h2 id="individual-css-transform-properties">Individual CSS transform properties <a class="headline-link" href="https://web.dev/baseline-features/#individual-css-transform-properties">#</a></h2>
<p>Using CSS transforms is a performant way to add a movement to your site.<br />
You might be familiar with writing CSS transforms with three properties in one line.<br />
With individual transform properties you can now specify transform properties individually. This comes in handy when you are writing complex keyframe animations.</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.target</span> <span class="token punctuation">{</span><br />  <span class="token property">translate</span><span class="token punctuation">:</span> 50% 0<span class="token punctuation">;</span><br />  <span class="token property">rotate</span><span class="token punctuation">:</span> 30deg<span class="token punctuation">;</span><br />  <span class="token property">scale</span><span class="token punctuation">:</span> 1.2<span class="token punctuation">;</span><br /><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 104, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      104
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 72, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      72
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 104, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      104
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 14.1, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      14.1
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/scale#browser_compatibility" target="_blank">Source</a>
</div>
<p>For an in-depth explanation of this change, read <a href="https://web.dev/css-individual-transform-properties/">Finer grained control over CSS transforms with individual transform properties</a>.</p>
<h2 id="new-viewport-units">New viewport units <a class="headline-link" href="https://web.dev/baseline-features/#new-viewport-units">#</a></h2>
<p>On mobile, viewport size is influenced by the presence or absence of dynamic toolbars.<br />
Sometimes you have a URL bar and navigation toolbar visible, but sometimes those toolbars are completely retracted.<br />
The actual size of viewport will be different depending on whether the toolbars are visible or not.<br />
New viewport units like <code>svh</code> and <code>lvh</code> give web developers finer control when designing for the mobile. You can learn more in the article <a href="https://web.dev/viewport-units/">The large, small, and dynamic viewport units</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 108, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      108
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 101, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      101
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 108, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      108
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
</div>
<h2 id="deep-copy-in-javascript">Deep copy in JavaScript <a class="headline-link" href="https://web.dev/baseline-features/#deep-copy-in-javascript">#</a></h2>
<p>In the past, to create a deep copy of an object with no reference to the original object, a popular hack was <code>JSON.stringify</code> combined with <code>JSON.parse</code>. This was such a common hack that V8 (Chrome's javascript engine) aggressively improved the performance of this trick. But, you don't need this hack anymore with <code>structuredClone</code>.</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> original <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Tom"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><br /><br /><span class="token comment">/* Old hack */</span> <br /><span class="token keyword">const</span> deepCopy <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br /><span class="token comment">/* New way */</span><br /><span class="token keyword">const</span> deepCopy <span class="token operator">=</span> <span class="token function">structuredClone</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 98, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      98
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 94, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      94
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 98, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      98
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/structuredClone#browser_compatibility" target="_blank">Source</a>
</div>
<p>Please refer to <a href="https://web.dev/structured-clone/">Deep-copying in JavaScript using structuredClone</a> for more details.</p>
<h2 id="the-focus-visible-pseudo-class">The <code>:focus-visible</code> pseudo-class <a class="headline-link" href="https://web.dev/baseline-features/#the-focus-visible-pseudo-class">#</a></h2>
<p>As web developers, we all are familiar with that &quot;focus ring&quot; that shows up when you are navigating a page with a keyboard or clicking on input elements. It is a necessary feature for accessibility but sometimes it gets in the way of the visual design for different users. The <code>:focus-visible</code> CSS pseudo-class checks if the browser believes that the focus should be visible.  You can now specify styles for only when focus should be visible.</p>
<div><pre class="language-css"><code class="language-css"><span class="token comment">/* focus with tab key */</span><br /><span class="token selector">:focus-visible</span> <span class="token punctuation">{</span><br />    <span class="token property">outline</span><span class="token punctuation">:</span> 5px solid pink<span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token comment">/* mouse click */</span><br /><span class="token selector">:focus:not(:focus-visible)</span> <span class="token punctuation">{</span><br />    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br /><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 86, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 85, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      85
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 86, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      86
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.4, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.4
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/:focus-visible#browser_compatibility" target="_blank">Source</a>
</div>
<p>Check out the <a href="https://web.dev/learn/css/focus/">Focus section on Learn CSS</a> for more information.</p>
<h2 id="the-transformstream-interface">The TransformStream interface <a class="headline-link" href="https://web.dev/baseline-features/#the-transformstream-interface">#</a></h2>
<p>The TransformStream interface of the Streams API makes it possible to pipe streams into one another.</p>
<p>For example you can stream data from one place, then compress the data stream to another location as the data gets passed. The article <a href="https://developer.chrome.com/articles/fetch-streaming-requests/" rel="noopener">Streaming requests with the fetch API</a> walks you through this sample use case.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 67, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      67
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 102, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      102
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 79, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      79
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 14.1, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      14.1
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/TransformStream#browser_compatibility" target="_blank">Source</a>
</div>
<h2 id="wrap-up">Wrap up <a class="headline-link" href="https://web.dev/baseline-features/#wrap-up">#</a></h2>
<p>There are many more features that recently became interoperable and stable to use on the web platform. Going forward we will work with the <a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX Community Group</a> to bring more clarity to these Baseline feature sets. Please check out <a href="https://web.dev/baseline/">web.dev/baseline</a> for ongoing details.</p>
<p>If you want to stay up-to-date, our team is publishing articles <a href="https://web.dev/tags/newly-interoperable/">when a feature becomes interoperable</a>, and publish <a href="https://web.dev/tags/new-to-the-web/">monthly updates on what's going on the web platform</a> from experimental features to newly interoperable.</p>
<p>We are always curious if what we are doing helps you, or if you need different kinds of support, so please reach out to us at <a href="https://www.w3.org/community/webdx/" rel="noopener">WebDX Community Group</a>.</p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[脚本评估和长任务]]></title>
            <link>https://web.dev/script-evaluation-and-long-tasks/</link>
            <guid>https://web.dev/script-evaluation-and-long-tasks/</guid>
            <content:encoded><![CDATA[<p>When it comes to optimizing <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a>, most of the advice you'll encounter is to optimize interactions themselves. For example, in the <a href="https://web.dev/optimize-long-tasks/">optimize long tasks guide</a>, techniques such as yielding with <code>setTimeout</code>, <code>isInputPending</code>, and so forth are discussed. These techniques are beneficial, as they allow the main thread some breathing room by avoiding long tasks, which can allow more opportunities for interactions and other activity to run sooner, rather than if they had to wait for a single long task.</p>
<p>However, what about the long tasks that come from loading scripts themselves? These tasks can interfere with user interactions and affect a page's INP during load. This guide will explore how browsers handle tasks kicked off by script evaluation, and look into what you may be able to do to break up script evaluation work so that your main thread can be more responsive to user input while the page is loading.</p>
<h2 id="what-is-script-evaluation">What is script evaluation? <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#what-is-script-evaluation">#</a></h2>
<p>If you've profiled an application that ships a lot of JavaScript, you may have seen long tasks where the culprit is labeled <strong>Evaluate Script</strong>.</p>
<figure>
  <img alt="Script evaluation work as visualized in the performance profiler of Chrome DevTools. The work causes a long task during startup, which blocks the main thread&#x27;s ability to respond to user interactions." decoding="async" height="107" loading="lazy" sizes="(min-width: 697px) 697px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WZyF71IiPWyG8vwKQcdP.png?auto=format&w=1394 1394w" width="697" />
  <figcaption>
    Script evaluation work as shown in the performance profiler in Chrome DevTools. In this case, the work is enough to cause a long task that blocks the main thread from taking on other work—including tasks that drive user interactions.
  </figcaption>
</figure>
<p>Script evaluation is a necessary part of executing JavaScript in the browser, as JavaScript is compiled <a href="https://en.wikipedia.org/wiki/Just-in-time_compilation" rel="noopener">just-in-time before execution</a>. When a script is evaluated, it is first parsed for errors. If the parser doesn't find errors, the script is then compiled into <a href="https://en.wikipedia.org/wiki/Bytecode" rel="noopener">bytecode</a>, and then can continue onto execution.</p>
<p>Though necessary, script evaluation can be problematic, as users may try to interact with a page shortly after it initially renders. However, just because a page has <em>rendered</em> doesn't mean that the page has finished <em>loading</em>. Interactions that take place during load can be delayed because the page is busy evaluating scripts. While there's no guarantee that the desired interaction can take place at this point in time—as a script responsible for it may not have loaded yet—there could be interactions dependent on JavaScript that <em>are</em> ready, or the interactivity doesn't depend on JavaScript at all.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> One metric that might give you insight into whether you have excessive script evaluation occurring during page load is <a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a>, as it is a <a href="https://web.dev/user-centric-performance-metrics/#types-of-metrics">load responsiveness</a> metric. <a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt">Because TBT correlates well with INP</a>, a page with a high TBT is a reasonable indicator that there may be high INP values during load that may be tied to script evaluation work. </div></aside>
<h2 id="the-relationship-between-scripts-and-the-tasks-that-evaluate-them">The relationship between scripts and the tasks that evaluate them <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#the-relationship-between-scripts-and-the-tasks-that-evaluate-them">#</a></h2>
<p>How tasks responsible for script evaluation are kicked off depends on whether the script you're loading is loaded via a regular <code>&lt;script&gt;</code> element, or if a script is a module loaded with the <code>type=module</code>. Since browsers have the tendency to handle things differently, how the major browser engines handle script evaluation will be touched upon where script evaluation behaviors across them vary.</p>
<h3 id="loading-scripts-with-the-lessscriptgreater-element">Loading scripts with the <code>&lt;script&gt;</code> element <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-with-the-lessscriptgreater-element">#</a></h3>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> This section deals with loading scripts using the <code>&lt;script&gt;</code> element <em>without</em> the <code>type=module</code> attribute. </div></aside>
<p>The number of tasks dispatched to evaluate scripts generally has a direct relationship with the number of <code>&lt;script&gt;</code> elements on a page. Each <code>&lt;script&gt;</code> element kicks off a task to evaluate the requested script so it can be parsed, compiled, and executed. <strong>This is the case for Chromium-based browsers, Safari, <em>and</em> Firefox.</strong></p>
<p>Why does this matter? Let's say you're using a bundler to manage your production scripts, and you've configured it to bundle everything your page needs to run into a single script. If this is the case for your website, you can expect that there will be a single task dispatched to evaluate that script. Is this a bad thing? Not necessarily—unless that script is <em>huge</em>.</p>
<p>You can break up script evaluation work by avoiding loading large chunks of JavaScript, and load more individual, smaller scripts using additional <code>&lt;script&gt;</code> elements.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> As devices vary in their capability, it's very difficult to define a set limit for how large individual scripts should be. To achieve a decent balance between compression efficiency, download time, and script evaluation time, a limit of 100 kilobytes per individual script is a good target. </div></aside>
<p>While you should always strive to load as little JavaScript as possible during page load, splitting up your scripts ensures that, instead of one large task that may block the main thread, you have a greater number of smaller tasks that won't block the main thread at all—or at least less than what you started with.</p>
<figure>
  <img alt="Multiple tasks involving script evaluation as visualized in the performance profiler of Chrome DevTools. Because multiple smaller scripts are loaded instead of fewer larger scripts, tasks are less likely to become long tasks, allowing the main thread to respond to user input more quickly." decoding="async" height="174" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/dajGS6urKufQoweVhJQh.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    Multiple tasks spawned to evaluate scripts as a result of multiple <code>&lt;script&gt;</code> elements present in the page's HTML. This is preferable to sending one large script bundle to users, which is more likely to block the main thread.
  </figcaption>
</figure>
<p>You can think of breaking up tasks for script evaluation as being somewhat similar to <a href="https://web.dev/optimize-long-tasks/#use-asyncawait-to-create-yield-points">yielding during event callbacks that run during an interaction</a>. However, with script evaluation, the yielding mechanism breaks up the JavaScript you load into multiple smaller scripts, rather than a smaller number of larger scripts than are more likely to block the main thread.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> Currently, Chromium-based browsers will execute all loaded scripts with the <code>defer</code> attribute in the same task as the <a href="https://developer.mozilla.org/docs/Web/API/Window/DOMContentLoaded_event"><code>DOMContentLoaded</code> event</a>. While this minimizes overall layout work, the cost is the increased likelihood of a longer task, which may cause other performance problems. A potential solution is <a href="https://github.com/whatwg/html/issues/6230">currently being explored</a>. This behavior also takes place with scripts loaded using the <code>type=module</code> attribute, as such scripts are deferred by default. </div></aside>
<h3 id="loading-scripts-with-the-lessscriptgreater-element-and-the-type=module-attribute">Loading scripts with the <code>&lt;script&gt;</code> element and the <code>type=module</code> attribute <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-with-the-lessscriptgreater-element-and-the-type=module-attribute">#</a></h3>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> If you're not bundling ES modules and loading them using the <code>type=module</code> attribute, you could actually end up slowing down page startup. For more information, read the <a href="https://web.dev/script-evaluation-and-long-tasks/#trade-offs-and-considerations">trade-offs and considerations section</a> later on in this guide. </div></aside>
<p>It's now possible to load ES modules natively in the browser with the <a href="https://web.dev/serve-modern-code-to-modern-browsers/#use-lessscript-type=modulegreater"><code>type=module</code> attribute</a> on the <code>&lt;script&gt;</code> element. This approach to script loading carries some developer experience benefits, such as not having to transform code for production use—especially when used in combination with <a href="https://developer.mozilla.org/docs/Web/HTML/Element/script/type/importmap" rel="noopener">import maps</a>. However, loading scripts in this way schedules tasks that differ from browser to browser.</p>
<h4 id="chromium-based-browsers">Chromium-based browsers <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#chromium-based-browsers">#</a></h4>
<p>In browsers such as Chrome—or those derived from it—loading ES modules using the <code>type=module</code> attribute produces different sorts of tasks than you'd normally see when not using <code>type=module</code>. For example, a task for each module script will run that involves activity labeled as <strong>Compile module</strong>.</p>
<figure>
  <img alt="Module compilation work in multiple tasks as visualized in Chrome DevTools." decoding="async" height="140" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aEGTjOqtruKet5I6sCLM.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    Module loading behavior in Chromium-based browsers. Each module script will spawn a <strong>Compile module</strong> call to compile their contents prior to evaluation.
  </figcaption>
</figure>
<p>Once the modules have compiled, any code that subsequently runs in them will kick off activity labeled as <strong>Evaluate module</strong>.</p>
<figure>
  <img alt="Just-in-time evaluation of a module as visualized in the performance panel of Chrome DevTools." decoding="async" height="184" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/CQpGnJmXh9JSUIMuBpeu.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    When code in a module runs, that module will be evaluated just-in-time.
  </figcaption>
</figure>
<p>The effect here—in Chrome and related browsers, at least—is that the compilation steps are broken up when using ES modules. This is a clear win in terms of managing long tasks; however, the resulting module evaluation work that results still means you're incurring some unavoidable cost. While you should strive to ship as little JavaScript as possible, using ES modules—regardless of the browser—provides the following benefits:</p>
<ul>
<li>All module code is automatically run in <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Strict_mode" rel="noopener">strict mode</a>, which allows potential optimizations by JavaScript engines that couldn't otherwise be made in a non-strict context.</li>
<li>Scripts loaded using <code>type=module</code> are treated as if they were <a href="https://developer.mozilla.org/docs/Web/HTML/Element/script#attr-defer" rel="noopener">deferred</a> by default. It's possible to use the <code>async</code> attribute on scripts loaded with <code>type=module</code> to change this behavior.</li>
</ul>
<h4 id="safari-and-firefox">Safari and Firefox <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#safari-and-firefox">#</a></h4>
<p>When modules are loaded in Safari and Firefox, each of them is evaluated in a separate task. This means you could theoretically load a single top-level module consisting of only <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/import" rel="noopener">static <code>import</code></a> statements to other modules, and every module loaded will incur a separate network request and task to evaluate it.</p>
<h3 id="loading-scripts-with-dynamic-import">Loading scripts with dynamic <code>import()</code> <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-with-dynamic-import">#</a></h3>
<p><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Operators/import" rel="noopener">Dynamic <code>import()</code></a> is another method for loading scripts. Unlike static <code>import</code> statements that are required to be at the top of an ES module, a dynamic <code>import()</code> call can appear anywhere in a script to load a chunk of JavaScript on demand. This technique is called <a href="https://web.dev/reduce-javascript-payloads-with-code-splitting/">code splitting</a>.</p>
<p>Dynamic <code>import()</code> has two advantages when it comes to improving INP:</p>
<ol>
<li>Modules which are deferred to load later reduce main thread contention during startup by reducing the amount of JavaScript loaded at that time. This frees up the main thread so it can be more responsive to user interactions.</li>
<li>When dynamic <code>import()</code> calls are made, each call will effectively separate the compilation and evaluation of each module to its own task. Of course, a dynamic <code>import()</code> that loads a very large module will kick off a rather large script evaluation task, and that can interfere with the ability of the main thread to respond to user input if the interaction occurs at the same time as the dynamic <code>import()</code> call. <strong>Therefore, it's still very important that you load as little JavaScript as possible.</strong></li>
</ol>
<p>Dynamic <code>import()</code> calls behave similarly in all major browser engines: the script evaluation tasks that result will be the same as the amount of modules that are dynamically imported.</p>
<h3 id="loading-scripts-in-a-web-worker">Loading scripts in a web worker <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#loading-scripts-in-a-web-worker">#</a></h3>
<p><a href="https://developer.mozilla.org/docs/Web/API/Web_Workers_API" rel="noopener">Web workers</a> are a special JavaScript use case. Web workers are registered on the main thread, and the code within the worker then runs on its own thread. This is hugely beneficial in the sense that—while the code that registers the web worker runs on the main thread—the code within the web worker doesn't. This reduces main thread congestion, and can help keep the main thread more responsive to user interactions.</p>
<p>In addition to reducing main thread work, web workers <em>themselves</em> can load external scripts to be used in the worker context, either through <a href="https://developer.mozilla.org/docs/Web/API/WorkerGlobalScope/importScripts" rel="noopener"><code>importScripts</code></a> or static <code>import</code> statements in browsers that support <a href="https://web.dev/module-workers/">module workers</a>. The result is that any script requested by a web worker is evaluated off the main thread.</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>Objective</strong></p><div class=" flow"> <strong>Read to learn more:</strong> <a href="https://web.dev/off-main-thread/">Use web workers to run JavaScript off the browser's main thread</a>. </div></aside>
<h2 id="trade-offs-and-considerations">Trade-offs and considerations <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#trade-offs-and-considerations">#</a></h2>
<p>While breaking up your scripts into separate, smaller files helps limit long tasks as opposed to loading fewer, much larger files, it's important to take some things into account when deciding how to break scripts up.</p>
<h3 id="compression-efficiency">Compression efficiency <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#compression-efficiency">#</a></h3>
<p><a href="https://web.dev/reduce-network-payloads-using-text-compression/">Compression</a> is a factor when it comes to breaking up scripts. When scripts are smaller, compression becomes somewhat less efficient. Larger scripts will benefit much more from compression. While increasing compression efficiency helps to keep load times for scripts as low as possible, it's a bit of a balancing act to ensure that you're breaking up scripts into enough smaller chunks to facilitate better interactivity during startup.</p>
<p>Bundlers are ideal tools for managing the output size for the scripts your website depends on:</p>
<ul>
<li>Where webpack is concerned, its <code>SplitChunksPlugin</code> plugin can help. Consult the <a href="https://webpack.js.org/plugins/split-chunks-plugin/" rel="noopener"><code>SplitChunksPlugin</code> documentation</a> for options you can set to help manage asset sizes.</li>
<li>For other bundlers such as <a href="https://rollupjs.org/" rel="noopener">Rollup</a> and <a href="https://esbuild.github.io/" rel="noopener">esbuild</a>, you can manage script file sizes by using dynamic <code>import()</code> calls in your code. These bundlers—as well as webpack—will automatically break off the dynamically imported asset into its own file, thus avoiding larger initial bundle sizes.</li>
</ul>
<h3 id="cache-invalidation">Cache invalidation <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#cache-invalidation">#</a></h3>
<p>Cache invalidation plays a big role in how fast a page loads on repeat visits. When you ship large, monolithic script bundles, you're at a disadvantage when it comes to browser caching. This is because when you update your first-party code—either through updating packages or shipping bug fixes—the entire bundle becomes invalidated and must be downloaded again.</p>
<p>By breaking up your scripts, you're not just breaking up script evaluation work across smaller tasks, you're also increasing the likelihood that return visitors will grab more scripts from the browser cache instead of from the network. This translates into an overall faster page load.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> In order for caching to be both efficient and to avoid stale resources from being served from the cache, be sure that your bundler is <a href="https://bundlers.tooling.report/hashing/">generating resources with a hash in the file name</a>. </div></aside>
<h3 id="nested-modules-and-loading-performance">Nested modules and loading performance <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#nested-modules-and-loading-performance">#</a></h3>
<p>If you're shipping ES modules in production and loading them with the <code>type=module</code> attribute, you need to be aware of how module nesting can impact startup time. Module nesting refers to when an ES module statically imports another ES module that statically imports another ES module:</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// a.js</span><br /><span class="token keyword">import</span> <span class="token punctuation">{</span>b<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./b.js'</span><span class="token punctuation">;</span><br /><br /><span class="token comment">// b.js</span><br /><span class="token keyword">import</span> <span class="token punctuation">{</span>c<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./c.js'</span><span class="token punctuation">;</span></code></pre>
</div><p>If your ES modules are not bundled together, the preceding code results in a network request chain: when <code>a.js</code> is requested from a <code>&lt;script&gt;</code> element, another network request is dispatched for <code>b.js</code>, which then involves <em>another</em> request for <code>c.js</code>. One way to avoid this is to use a bundler—but be sure you're configuring your bundler to break up scripts to spread out script evaluation work.</p>
<p>If you don't want to use a bundler, then another way to get around nested module calls is to use the <a href="https://developer.chrome.com/blog/modulepreload/" rel="noopener"><code>modulepreload</code> resource hint</a>, which will preload ES modules ahead of time to avoid network request chains. Beware, however: this hint is currently only supported in Chromium-based browsers.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/script-evaluation-and-long-tasks/#conclusion">#</a></h2>
<p>Optimizing evaluation of scripts in the browser is no doubt a tricky feat. The approach depends on your website's requirements and constraints. However, by splitting up scripts, you're spreading the work of script evaluation over numerous smaller tasks, and therefore giving the main thread the ability to handle user interactions more efficiently, rather than blocking the main thread.</p>
<p>To recap, here are some things you can to do to break up large script evaluation tasks:</p>
<ul>
<li>When loading scripts using the <code>&lt;script&gt;</code> element without the <code>type=module</code> attribute, avoid loading scripts that are very large, as these will kick off resource-intensive script evaluation tasks that block the main thread. Spread out your scripts over more <code>&lt;script&gt;</code> elements to break up this work.</li>
<li>Using the <code>type=module</code> attribute to load ES modules natively in the browser will kick off individual tasks for evaluation for each separate module script.</li>
<li>Reduce the size of your initial bundles by using dynamic <code>import()</code> calls. This also works in bundlers, as bundlers will treat each dynamically imported module as a &quot;split point,&quot; resulting in a separate script being generated for each dynamically imported module.</li>
<li>Be sure to weigh trade-offs such as compression efficiency and cache invalidation. Larger scripts will compress better, but are more likely to involve more expensive script evaluation work in fewer tasks, and result in browser cache invalidation, leading to overall lower caching efficiency.</li>
<li>If using ES modules natively without bundling, use the <code>modulepreload</code> resource hint to optimize the loading of them during startup.</li>
<li>As always, ship as little JavaScript as possible.</li>
</ul>
<p>It's a balancing act for sure—but by breaking up scripts and reducing initial payloads via dynamic <code>import()</code>, you can achieve better startup performance and better accommodate user interactions during that crucial startup period. This should help you score better on the INP metric, thus delivering a better user experience.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@markusspiske" rel="noopener">Markus Spiske</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[优化输入延迟]]></title>
            <link>https://web.dev/optimize-input-delay/</link>
            <guid>https://web.dev/optimize-input-delay/</guid>
            <content:encoded><![CDATA[<p>Interactions on the web are complicated things, with all sorts of activity occurring in the browser to drive them. What they all have in common, though, is that they incur some input delay before their event callbacks begin to run. In this guide, you'll learn what input delay is, and what you can do to minimize it so your website's interactions run faster.</p>
<h2 id="what-is-input-delay">What is input delay? <a class="headline-link" href="https://web.dev/optimize-input-delay/#what-is-input-delay">#</a></h2>
<p><em>Input delay</em> is the period of time beginning from when the user first interacts with a page—such as tapping on a screen, clicking with a mouse, or pressing a key—up to when the event callbacks for the interaction begin to run. Every interaction begins with some amount of input delay.</p>
<figure>
  <img alt="A simplified visualization of input delay. At left, there is line art of a mouse cursor with a starburst behind it, signifying the start of an interaction. To the right is line art of a cogwheel, signifying when the event handlers for an interaction begin to run. The space in between is noted as the input delay with a curly brace." decoding="async" height="303" loading="lazy" sizes="(min-width: 736px) 736px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/WVS8po7gV1gKbeWcVadI.png?auto=format&w=1472 1472w" width="736" />
  <figcaption>
    The mechanics behind input delay. When an input is received by the operating system, it must be passed to the browser before the interaction starts. This takes a certain amount of time, and can be increased by existing main thread work.
  </figcaption>
</figure>
<p>Some portion of the input delay is unavoidable: it always takes some amount of time for the operating system to recognize an input event and pass it to the browser. However, that portion of the input delay is often not even noticeable, and there are other things that happen on the page itself that can make input delays long enough to cause problems.</p>
<h2 id="how-to-think-about-input-delay">How to think about input delay <a class="headline-link" href="https://web.dev/optimize-input-delay/#how-to-think-about-input-delay">#</a></h2>
<p>Generally speaking, you want to keep every part of an interaction as short as possible so that your website has the best chance of meeting <a href="https://web.dev/inp/#what-is-a-good-inp-score">the Interaction to Next Paint (INP) metric's &quot;good&quot; threshold</a>, regardless of the user's device. Keeping input delay in check is just one part of meeting that threshold.</p>
<p>You might be tempted to look to <a href="https://web.dev/fid/#what-is-a-good-fid-score">the First Input Delay (FID) thresholds</a> to determine an allowance for input delays—but the &quot;good&quot; threshold for FID is <strong>100 milliseconds or less</strong>. If you go by this threshold, you'd be allotting half of your budget for INP to input delay alone. This is inadvisable when you consider that an interaction also requires time to run event callbacks and for the browser to paint the next frame.</p>
<p>To meet INP's &quot;good&quot; threshold, you'll want to aim for the shortest input delay possible, but you shouldn't expect to eliminate it entirely, as that is impossible. As long as you're avoiding excessive main thread work while users are attempting to interact with your page, your input delay should be low enough to avoid problems.</p>
<h2 id="how-to-minimize-input-delay">How to minimize input delay <a class="headline-link" href="https://web.dev/optimize-input-delay/#how-to-minimize-input-delay">#</a></h2>
<p>As said previously, some input delay is unavoidable, but on the other hand, some input delay <em>is</em> avoidable. Here are some things to consider if you're struggling with long input delays.</p>
<h3 id="avoid-recurring-timers-that-kick-off-excessive-main-thread-work">Avoid recurring timers that kick off excessive main thread work <a class="headline-link" href="https://web.dev/optimize-input-delay/#avoid-recurring-timers-that-kick-off-excessive-main-thread-work">#</a></h3>
<p>There are two commonly used timer functions in JavaScript that can contribute to input delay: <a href="https://developer.mozilla.org/docs/Web/API/setTimeout" rel="noopener"><code>setTimeout</code></a> and <a href="https://developer.mozilla.org/docs/Web/API/setInterval" rel="noopener"><code>setInterval</code></a>. The difference between the two is that <code>setTimeout</code> schedules a callback to run after a specified time. <code>setInterval</code>, on the other hand, schedules a callback to run every <em>n</em> milliseconds in perpetuity, or until the timer is stopped with <a href="https://developer.mozilla.org/docs/Web/API/clearInterval" rel="noopener"><code>clearInterval</code></a>.</p>
<p><code>setTimeout</code> is not problematic in itself—in fact, it can be helpful in <a href="https://web.dev/optimize-input-delay/#avoid-long-tasks">avoiding long tasks</a>. However, it depends on <em>when</em> the timeout occurs, and whether the user attempts to interact with the page when the timeout callback runs.</p>
<p>Additionally, <code>setTimeout</code> can be run in a loop or recursively, where it acts more like <code>setInterval</code>, though preferably not scheduling the next iteration until the previous one is completed. While this means the loop will yield to the main thread every time <code>setTimeout</code> is called, you should take care to ensure its callback doesn't end up doing excessive work.</p>
<p><code>setInterval</code> runs a callback on an interval, and is therefore much more likely to get in the way of interactions. This is because—unlike a single instance of a <code>setTimeout</code> call, which is a one-off callback that <em>may</em> get in the way of a user interaction—<code>setInterval</code>'s recurring nature makes it much more likely that it <em>will</em> get in the way of an interaction, thus increasing the interaction's input delay.</p>
<figure>
  <img alt="A screenshot of the performance profiler in Chrome DevTools demonstrating input delay. A task fired by a timer function occurs just before a user initiates a click interaction. However, the timer extends the input delay, causing the interaction&#x27;s event callbacks to run later than they otherwise would." decoding="async" height="291" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/tjzVtS9wFXxd06gaPHNY.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    A timer registered by a previous <code>setInterval</code> call contributing to input delay as depicted in the performance panel of Chrome DevTools. The added input delay causes the event callbacks for the interaction to run later than they otherwise could.
  </figcaption>
</figure>
<p>If timers are occurring in first-party code, then you have control over them. Evaluate whether you need them, or do your best to reduce the work in them as much as possible. However, timers in third-party scripts are a different story. You often don't have control over what a third-party script does, and fixing performance issues in third-party code often involves working with stakeholders to determine whether a given third-party script is necessary, and if so, establish contact with a third-party script vendor to determine what can done to fix performance issues they may cause on your website.</p>
<h3 id="avoid-long-tasks">Avoid long tasks <a class="headline-link" href="https://web.dev/optimize-input-delay/#avoid-long-tasks">#</a></h3>
<p>One way to mitigate long input delays is to avoid long tasks. When you have excessive main thread work that blocks the main thread during interactions, that will add to the input delay for them before the long tasks have had a chance to finish.</p>
<figure>
  <img alt="A visualization of how long tasks extend input delay. At top, an interaction occurs shortly after a single long task runs, causing significant input delay that causes event callbacks to run much later than they should. At bottom, an interaction occurs at roughly the same time, but the long task is broken up into several smaller ones by yielding, allowing the interaction&#x27;s event callbacks to run much sooner." decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/PRO5n8DxflhLaM5PdoZv.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    A visualization of what happens to interactions when tasks are too long and the browser can't respond quickly enough to interactions, versus when longer tasks are broken up into smaller tasks.
  </figcaption>
</figure>
<p>Besides minimizing the amount of work you do in a task—and you should <em>always</em> strive to do as little work as possible on the main thread—you can improve responsiveness to user input by <a href="https://web.dev/optimize-long-tasks/">breaking up long tasks</a>.</p>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> Yielding isn't foolproof, as tasks from third-party JavaScript can still make their way in between first-party tasks after yielding. This can still contribute to input delay for future interactions, and you'll need to be mindful of third-party tasks that may run on an interval, as described in the previous section. This is a problem that <a href="https://github.com/WICG/scheduling-apis/blob/main/explainers/yield-and-continuation.md">the proposed <code>scheduler.yield</code> API</a> is looking to solve. </div></aside>
<h3 id="be-mindful-of-interaction-overlap">Be mindful of interaction overlap <a class="headline-link" href="https://web.dev/optimize-input-delay/#be-mindful-of-interaction-overlap">#</a></h3>
<p>A particularly challenging part of optimizing INP can be if you have interactions that overlap. Interaction overlap means that after you've interacted with one element, you make another interaction with the page before the initial interaction has had a chance to render the next frame.</p>
<figure>
  <img alt="A depiction of when tasks can overlap to produce long input delays. In this depiction, a click interaction overlaps with a keydown interaction to increase the input delay for the keydown interaction." decoding="async" height="307" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/ohYy7phsKRbKCeth0iUu.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    A visualization of two concurrent interactions in the performance profiler in Chrome's DevTools. The rendering work in the initial click interaction causes an input delay for the subsequent keyboard interaction.
  </figcaption>
</figure>
<p>Sources of interaction overlap may be as simple as users making many interactions in a short period of time. This can occur when users type in form fields, where many keyboard interactions can occur in a very short period of time. If the work on a key event is especially expensive—such as in the common case of autocomplete fields where network requests are made to a back end—you have a couple of options:</p>
<ul>
<li>Consider <a href="https://web.dev/debounce-your-input-handlers/">debouncing</a> inputs to limit the amount of times an event callback executes in a given period of time.</li>
<li>Use <a href="https://developer.mozilla.org/docs/Web/API/AbortController/abort" rel="noopener"><code>AbortController</code></a> to cancel outgoing <code>fetch</code> requests so the main thread doesn't become congested handling <code>fetch</code> callbacks. Note: an <code>AbortController</code> instance's <code>signal</code> property can also be used to <a href="https://developer.mozilla.org/docs/Web/API/AbortSignal/abort_event" rel="noopener">abort events</a>.</li>
</ul>
<p>Another source of increased input delay due to overlapping interactions can be expensive animations. In particular, animations in JavaScript may fire many <a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame" rel="noopener"><code>requestAnimationFrame</code></a> calls, which may get in the way of user interactions. To get around this, use CSS animations whenever possible to avoid queueing potentially expensive animation frames—but if you do this, make sure you <a href="https://developer.chrome.com/en/docs/lighthouse/performance/non-composited-animations/" rel="noopener">avoid non-composited animations</a> so that animations run mainly on the GPU and compositor threads, and not on the main thread.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/optimize-input-delay/#conclusion">#</a></h2>
<p>While input delays may not represent the majority of the time your interactions take to run, it's important to understand that every part of an interaction takes up an amount of time that you can reduce. If you're <a href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-long-input-delays">observing long input delay</a>, then you have opportunities to reduce it. Avoiding recurring timer callbacks, breaking up long tasks, and being aware of potential interaction overlap can all help you to reduce input delay, leading to faster interactivity for your website's users.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@introspectivedsgn" rel="noopener">Erik Mclean</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[寻找现场缓慢的互动]]></title>
            <link>https://web.dev/find-slow-interactions-in-the-field/</link>
            <guid>https://web.dev/find-slow-interactions-in-the-field/</guid>
            <content:encoded><![CDATA[<p><a href="https://web.dev/lab-and-field-data-differences/#field-data">Field data</a> is <em>the</em> authoritative source when it comes to how actual users are experiencing your website. It teases out issues you may not see in <a href="https://web.dev/lab-and-field-data-differences/#lab-data">lab data</a> alone. While interactions can be simulated in lab-based tools, you're not going to be able to reproduce every single interaction in the lab in the way that users in the field experience them. Gathering field data for <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> is critical to understanding how responsive your page is to real users, and it contains the clues to make their experience even better.</p>
<h2 id="what-you-should-collect-in-the-field-and-why">What you should collect in the field and why <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#what-you-should-collect-in-the-field-and-why">#</a></h2>
<p>When collecting INP data in the field, you'll want to capture the following to give context to why interactions were slow:</p>
<ul>
<li><strong>The INP value.</strong> This is the key piece of data you'll need to collect. The distribution of these values will determine whether the page meets <a href="https://web.dev/inp/#what-is-a-good-inp-score">the INP thresholds</a>.</li>
<li><strong>The element selector string responsible for the page's INP.</strong> Knowing a page's INP is good, but not good enough by itself. Without knowing what element was responsible for it, you'll be in the dark. By logging element selector strings, you’ll know exactly what elements are responsible for interactions.</li>
<li><strong>The loading state of the page for the interaction that is the page's INP.</strong> When a page is loading, it's reasonable to assume that there's more main thread activity occurring that could result in higher interaction latency. During page load, there's HTML parsing, stylesheet parsing, and JavaScript evaluation and execution going on. Knowing whether an interaction has taken place during page load or afterwards helps you to figure out if you need to optimize for faster startup so interactions have more room on the main thread to run quickly, or if the interaction responsible for the page's INP in itself is slow regardless.</li>
<li><strong>The interaction's <code>startTime</code>.</strong> Logging the interaction's <a href="https://developer.mozilla.org/docs/Web/API/PerformanceEntry/startTime" rel="noopener"><code>startTime</code></a> lets you know exactly when the interaction occurred on the performance timeline.</li>
<li><strong>The event type.</strong> The <a href="https://developer.mozilla.org/docs/Web/API/Event/type" rel="noopener">event type</a> is good to know, as it will tell you whether the interaction was the result of a <code>click</code>, <code>keypress</code>, or other eligible event type. A user interaction may contain multiple callbacks, and can help you to pinpoint exactly which event callback in the interaction took the longest to run.</li>
</ul>
<p>While this all seems like a lot to take into account, you don't have to reinvent the wheel to get there. Thankfully, this data is exposed in the <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>web-vitals</code> JavaScript library</a>, and you'll learn how to gather it in the next section.</p>
<h2 id="measure-interactions-in-the-field-with-the-web-vitals-javascript-library">Measure interactions in the field with the <code>web-vitals</code> JavaScript library <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#measure-interactions-in-the-field-with-the-web-vitals-javascript-library">#</a></h2>
<p>The <code>web-vitals</code> JavaScript library is a great way to find slow interactions in the field, thanks in large part to its ability to provide <a href="https://github.com/GoogleChrome/web-vitals#attribution-build" rel="noopener">attribution</a> for what's causing them. INP can be collected in browsers that support the <a href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming" rel="noopener">Event Timing API</a> and its <a href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming/interactionId" rel="noopener"><code>interactionId</code> property</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 96, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      96
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 96, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
96
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari, Not supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming/interactionId#browser_compatibility" target="_blank">Source</a>
</div>
<p>Using a <a href="https://en.wikipedia.org/wiki/Real_user_monitoring" rel="noopener">Real User Monitoring (RUM)</a> provider to get INP is most convenient, but not always an option. If that's your case, for example, you can use the <code>web-vitals</code> JavaScript library to collect and transmit INP data to Google Analytics for later evaluation:</p>
<div><pre class="language-js"><code class="language-js"><span class="token comment">// Be sure to import from the attribution build:</span><br /><span class="token keyword">import</span> <span class="token punctuation">{</span>onINP<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'web-vitals/attribution'</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">function</span> <span class="token function">sendToGoogleAnalytics</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> id<span class="token punctuation">,</span> attribution<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />  <span class="token comment">// Destructure the attribution object:</span><br />  <span class="token keyword">const</span> <span class="token punctuation">{</span>eventEntry<span class="token punctuation">,</span> eventTarget<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> loadState<span class="token punctuation">}</span> <span class="token operator">=</span> attribution<span class="token punctuation">;</span><br /><br />  <span class="token comment">// Get timings from the event timing entry:</span><br />  <span class="token keyword">const</span> <span class="token punctuation">{</span>startTime<span class="token punctuation">,</span> processingStart<span class="token punctuation">,</span> processingEnd<span class="token punctuation">,</span> duration<span class="token punctuation">,</span> interactionId<span class="token punctuation">}</span> <span class="token operator">=</span> eventEntry<span class="token punctuation">;</span><br /><br />  <span class="token keyword">const</span> eventParams <span class="token operator">=</span> <span class="token punctuation">{</span><br />    <span class="token comment">// The page's INP value:</span><br />    <span class="token literal-property property">metric_inp_value</span><span class="token operator">:</span> value<span class="token punctuation">,</span><br />    <span class="token comment">// A unique ID for the page session, which is useful</span><br />    <span class="token comment">// for computing totals when you group by the ID.</span><br />    <span class="token literal-property property">metric_id</span><span class="token operator">:</span> id<span class="token punctuation">,</span><br />    <span class="token comment">// The event target (a CSS selector string pointing</span><br />    <span class="token comment">// to the element responsible for the interaction):</span><br />    <span class="token literal-property property">metric_inp_event_target</span><span class="token operator">:</span> eventTarget<span class="token punctuation">,</span><br />    <span class="token comment">// The type of event that triggered the interaction:</span><br />    <span class="token literal-property property">metric_inp_event_type</span><span class="token operator">:</span> eventType<span class="token punctuation">,</span><br />    <span class="token comment">// Whether the page was loaded when the interaction</span><br />    <span class="token comment">// took place. Useful for identifying startup versus</span><br />    <span class="token comment">// post-load interactions:</span><br />    <span class="token literal-property property">metric_inp_load_state</span><span class="token operator">:</span> loadState<span class="token punctuation">,</span><br />    <span class="token comment">// The time (in milliseconds) after page load when</span><br />    <span class="token comment">// the interaction took place:</span><br />    <span class="token literal-property property">metric_inp_start_time</span><span class="token operator">:</span> startTime<span class="token punctuation">,</span><br />    <span class="token comment">// When processing of the event callbacks in the</span><br />    <span class="token comment">// interaction started to run:</span><br />    <span class="token literal-property property">metric_inp_processing_start</span><span class="token operator">:</span> processingStart<span class="token punctuation">,</span><br />    <span class="token comment">// When processing of the event callbacks in the</span><br />    <span class="token comment">// interaction finished:</span><br />    <span class="token literal-property property">metric_inp_processing_end</span><span class="token operator">:</span> processingEnd<span class="token punctuation">,</span><br />    <span class="token comment">// The total duration of the interaction. Note: this</span><br />    <span class="token comment">// value is rounded to 8 milliseconds of granularity:</span><br />    <span class="token literal-property property">metric_inp_duration</span><span class="token operator">:</span> duration<span class="token punctuation">,</span><br />    <span class="token comment">// The interaction ID assigned to the interaction by</span><br />    <span class="token comment">// the Event Timing API. This could be useful in cases</span><br />    <span class="token comment">// where you might want to aggregate related events:</span><br />    <span class="token literal-property property">metric_inp_interaction_id</span><span class="token operator">:</span> interactionId<br />  <span class="token punctuation">}</span><span class="token punctuation">;</span><br /><br />  <span class="token comment">// Send to Google Analytics</span><br />  <span class="token function">gtag</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> eventParams<span class="token punctuation">)</span><span class="token punctuation">;</span><br /><span class="token punctuation">}</span><br /><br /><span class="token comment">// Pass the reporting function to the web-vitals INP reporter:</span><br /><span class="token function">onINP</span><span class="token punctuation">(</span>sendToGoogleAnalytics<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> Where element attribution is concerned, not every interaction can be attributed to a specific element. This is due to a limitation of the underlying <a href="https://developer.mozilla.org/docs/Web/API/PerformanceEventTiming">Event Timing API</a>, which is used to calculate the page's INP. In this API, <a href="https://developer.mozilla.org/docs/Web/API/Event/target">the event target</a> may be absent if the element responsible for the interaction was disconnected from the DOM, or if the element was in the <a href="https://developer.mozilla.org/docs/Web/Web_Components/Using_shadow_DOM">shadow DOM</a>. </div></aside>
<p>If you have Google Analytics and run the preceding code on your website, you'll get a detailed reporting of not just the page's INP, but also useful contextual information that can give you a better sense of where to begin optimizing slow interactions.</p>
<h3 id="monitor-full-session-duration,-not-just-up-to-onload">Monitor full session duration, not just up to <code>onload</code> <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#monitor-full-session-duration,-not-just-up-to-onload">#</a></h3>
<p>Using the <code>web-vitals</code> JavaScript library, as previously mentioned, may result in multiple analytics events being sent to Google Analytics. This is fine, as the ID <code>web-vitals</code> generates for the current page will stay the same, and Google Analytics will allow you to overwrite previous data.</p>
<p>However, not all RUM providers operate this way, so if you're building your own RUM collection solution, you'll need to take this into account. If your current analytics provider won't allow overwrites of existing records, you'll need to record all the <code>delta</code> values—that is, the difference between a metric's past and current states— for a metric and transmit them using the same ID provided by the <code>web-vitals</code> library;  then you can sum those changes by grouping on the ID. For more more information, consult the <code>web-vitals</code> documentation's <a href="https://github.com/GoogleChrome/web-vitals#report-only-the-delta-of-changes" rel="noopener">section on handling deltas</a>.</p>
<h2 id="get-field-data-quickly-with-crux">Get field data quickly with CrUX <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#get-field-data-quickly-with-crux">#</a></h2>
<p>The <a href="https://developer.chrome.com/docs/crux/" rel="noopener">Chrome UX Report (CrUX)</a> is the official dataset of the Web Vitals program. While data from CrUX alone doesn't give you all the information you need to troubleshoot specific INP issues, it does let you know whether you have a problem in the first place. Even if you're already collecting field data through a RUM provider, consider contrasting it with CrUX data for your website (if available), as there are <a href="https://web.dev/crux-and-rum-differences/">differences in the methodologies they use</a>.</p>
<p>You can evaluate your website's INP and view its CrUX data using <a href="https://pagespeed.web.dev/" rel="noopener">PageSpeed Insights (PSI)</a>. PageSpeed Insights may provide page-level field data for websites that are included in the CrUX dataset. To audit a URL with PageSpeed Insights, go to <a href="https://pagespeed.web.dev/" rel="noopener">https://pagespeed.web.dev/</a>, enter a URL to test, and click the <strong>Analyze</strong> button.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> The URL you enter <a href="https://web.dev/find-slow-interactions-in-the-field/%E2%80%8B%E2%80%8Bhttps://developer.chrome.com/docs/crux/methodology/#eligibility">may not be eligible for CrUX</a>. If this is the case, you'll need to collect your own field data, which is explained in the previous section. Also, where page-level data is not available for the given URL in PageSpeed Insights, the provided field data will be aggregated over the entire website. </div></aside>
<p>Once the assessment begins, CrUX data will be available instantly as Lighthouse (a <a href="https://web.dev/lab-and-field-data-differences/#lab-data">lab tool</a>) runs.</p>
<figure>
  <img alt="A screenshot of INP field data in a distribution. The distribution aligns with the INP thresholds, and in this example, the field INP value is 545 milliseconds, which lands in the poor range." decoding="async" height="161" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/JZjcvOGERDsYovSJVn7o.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>The distribution of INP experiences as seen in PageSpeed Insights.</figcaption>
</figure>
<p>When Lighthouse has finished running its assessment, PSI will populate the assessment with Lighthouse audits.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> Because PageSpeed Insights is not scripted to interact with the page, there will be no audits relevant to INP. However, <a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a> is <a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt">highly correlated with INP</a>. Therefore, you can filter audits by TBT to find opportunities to reduce the amount of time a page blocks the main thread during the test. </div></aside>
<figure>
  <img alt="A screenshot of Lighthouse audits as seen in PageSpeed Insights. The audits are filtered by the TBT metric, showing tips for minimizing main thread work, avoiding an excessive DOM size, and avoiding long main thread tasks." decoding="async" height="346" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Ra3g6IEXkYsgMhpQsjEV.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>Audits for Total Blocking Time</figcaption>
</figure>
<h2 id="what-if-i-dont-have-field-data">What if I don't have field data? <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#what-if-i-dont-have-field-data">#</a></h2>
<p>You might be in a situation where you don't have or can’t even collect field data. If this describes your situation, then you'll be entirely dependent on lab tools in order to find slow interactions. For more information on lab testing, read <a href="https://web.dev/diagnose-slow-interactions-in-the-lab/">How to diagnose what's causing poor INP in the lab</a>.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/find-slow-interactions-in-the-field/#conclusion">#</a></h2>
<p>Field data is the best source of information you can draw on when it comes to understanding which interactions are problematic for actual users in the field. By drawing on information available in PageSpeed Insights, or relying on field data collection tools such as the <code>web-vitals</code> JavaScript library (or your RUM provider), you can be more confident about which interactions are most problematic, and then move on to <a href="https://web.dev/diagnose-slow-interactions-in-the-lab/">reproducing problematic interactions in the lab</a> and then go about fixing them.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@federicorespini" rel="noopener">Federico Respini</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[DOM 大小对交互性的影响有多大，以及您可以采取哪些措施]]></title>
            <link>https://web.dev/dom-size-and-interactivity/</link>
            <guid>https://web.dev/dom-size-and-interactivity/</guid>
            <content:encoded><![CDATA[<p>There's no way around it: when you build a web page, that page is going to have a <a href="https://developer.mozilla.org/docs/Web/API/Document_Object_Model" rel="noopener">Document Object Model (DOM)</a>. The DOM represents the structure of your page's HTML, and gives JavaScript and CSS access to a page's structure and contents.</p>
<p>The problem, however, is that the <em>size</em> of the DOM affects a browser's ability to render a page quickly and efficiently. Generally speaking, the larger a DOM is, the more expensive it is to initially render that page and update its rendering later on in the page lifecycle.</p>
<p>This becomes problematic in pages with very large DOMs when interactions that modify or update the DOM trigger expensive layout work that affects the ability of the page to respond quickly. Expensive layout work can affect a page's <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a>; If you want a page to respond quickly to user interactions, it's important to ensure your DOM sizes are only as large as necessary.</p>
<h2 id="when-is-a-pages-dom-too-large">When is a page's DOM <em>too</em> large? <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#when-is-a-pages-dom-too-large">#</a></h2>
<aside class="aside flow color-secondary-box-text bg-secondary-box-bg"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" role="img" aria-label="Highlighter pen" xmlns="http://www.w3.org/2000/svg">   <path fill-rule="evenodd" clip-rule="evenodd" d="M10.22 9.49l-5.91 6c-.77.8-.7 2.05.08 2.85L.77 22h5.68l.74-.75c.78.81 1.95.86 2.73.05l5.96-6.05-5.66-5.76zm12.46-4l-2.82-2.87c-.78-.8-2.07-.84-2.84-.04l-5.75 5.85 5.66 5.75 5.69-5.78c.77-.81.83-2.11.06-2.91z"></path> </svg></span><strong>Key Term</strong></p><div class=" flow"> It's important to know the difference between DOM elements and DOM nodes. A DOM <em>element</em> refers to a specific <a href="https://developer.mozilla.org/docs/Web/API/HTMLElement">HTML element</a> in the DOM tree. A <a href="https://developer.mozilla.org/docs/Web/API/Node">DOM <em>node</em></a> has overlapping meaning with the DOM element term, but its definition is expanded to include comments, whitespace, and text. While the <a href="https://developer.chrome.com/en/docs/lighthouse/performance/dom-size/">Lighthouse DOM size audit</a> refers to DOM nodes, this guide will refer to DOM elements over nodes whenever possible. </div></aside>
<p><a href="https://developer.chrome.com/en/docs/lighthouse/performance/dom-size/#how-the-lighthouse-dom-size-audit-fails" rel="noopener">According to Lighthouse</a>, a page's DOM size is excessive when it exceeds 1,400 nodes. Lighthouse will begin to throw warnings when a page's DOM exceeds 800 nodes. Take the following HTML for example:</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><br />  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>List item one.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br />  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>List item two.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br />  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>List item three.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre>
</div><p>In the above code, there are four DOM elements: the <code>&lt;ul&gt;</code> element, and its three <code>&lt;li&gt;</code> child elements. Your web page will almost certainly have many more nodes than this, so it's important to understand what you can do to keep DOM sizes in check—as well as other strategies to optimize the rendering work once you've gotten a page's DOM as small as it can be.</p>
<h2 id="how-do-large-doms-affect-page-performance">How do large DOMs affect page performance? <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-do-large-doms-affect-page-performance">#</a></h2>
<p>Large DOMs affect page performance in a few ways:</p>
<ol>
<li>During the page's initial render. When CSS is applied to a page, a structure similar to the DOM known as the <a href="https://web.dev/critical-rendering-path-constructing-the-object-model/#css-object-model-cssom">CSS Object Model (CSSOM)</a> is created. As CSS selectors increase in specificity, the CSSOM becomes more complex, and more time is needed to run the necessary layout, styling, compositing, and paint work necessary to draw the web page to the screen. This added work increases interaction latency for interactions that occur early on during page load.</li>
<li>When interactions modify the DOM, either through element insertion or deletion, or by modifying DOM contents and styles, the work necessary to render that update can result in very costly layout, styling, compositing, and paint work. As is the case with the page's initial render, an increase in CSS selector specificity can add to rendering work when HTML elements are inserted into the DOM as the result of an interaction.</li>
<li>When JavaScript queries the DOM, references to DOM elements are stored in memory. For example, if you call <a href="https://developer.mozilla.org/docs/Web/API/Document/querySelectorAll" rel="noopener"><code>document.querySelectorAll</code></a> to select all <code>&lt;div&gt;</code> elements on a page, the memory cost could be considerable if the result returns a large number of DOM elements.</li>
</ol>
<figure>
  <img alt="A screenshot of a long task caused by excessive rendering work in the performance panel of Chrome DevTools. The long task&#x27;s call stack shows significant time spent recalculating page styles, as well as pre-paint." decoding="async" height="248" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/qqLuCIvjmvKn5L8YTLGt.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    A long task as shown in the performance profiler in Chrome DevTools. The long task shown is caused by inserting DOM elements into a large DOM via JavaScript.
  </figcaption>
</figure>
<p>All of these can affect interactivity, but the second item in the list above is of particular importance. If an interaction results in a change to the DOM, it can kick off a lot of work that can contribute to a poor INP on a page.</p>
<h2 id="how-do-i-measure-dom-size">How do I measure DOM size? <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-do-i-measure-dom-size">#</a></h2>
<p>You can measure DOM size in a couple of ways. The first method uses Lighthouse. When you run an audit, statistics on the current page's DOM will be in the &quot;Avoid an excessive DOM size&quot; audit under the &quot;Diagnostics&quot; heading. In this section, you can see the total number of DOM elements, the DOM element containing the most child elements, as well as the deepest DOM element.</p>
<p>A simpler method involves using the JavaScript console in the developer tools in any major browser. To get the total number of HTML elements in the DOM, you can use the following code in the console after the page has loaded:</p>
<div><pre class="language-js"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> Note that the code snippet above only includes the number of HTML <em>elements</em> in the DOM. It doesn't include all the <em>nodes</em> in the DOM. </div></aside>
<p>If you want to see the DOM size update in realtime, you can also use the <a href="https://developer.chrome.com/blog/new-in-devtools-64/#perf-monitor" rel="noopener">performance monitor tool</a>. Using this tool, you can correlate layout and styling operations (and other performance aspects) along with the current DOM size.</p>
<figure>
  <img alt="A screenshot of the performance monitor in Chrome DevTools. At left, there are various aspects of page performance that can be continuously monitored during the life of the page. In the screenshot, the number of DOM nodes, layouts per second, and style recalculations per section are actively being monitored." decoding="async" height="273" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/mjhhoz41DjdR4cZFwU89.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    The performance monitor in Chrome DevTools. In this view, the page's current number of DOM nodes is charted along with layout operations and style recalculations performed per second.
  </figcaption>
</figure>
<p>If the DOM's size is approaching Lighthouse DOM size's warning threshold—or fails altogether—the next step is to figure out how to reduce the DOM's size to improve your page's ability to respond to user interactions so that your website's INP can improve.</p>
<h2 id="how-can-i-measure-the-number-of-dom-elements-affected-by-an-interaction">How can I measure the number of DOM elements affected by an interaction? <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-can-i-measure-the-number-of-dom-elements-affected-by-an-interaction">#</a></h2>
<p>If you're profiling a slow interaction in the lab that you suspect might have something to do with the size of the page's DOM, you can figure out how many DOM elements were affected by selecting any piece of activity in the profiler labeled &quot;Recalculate Style&quot; and observe the contextual data in the bottom panel.</p>
<figure>
  <img alt="A screenshot of selected style recalculation activity in the performance panel of Chrome DevTools. At top, the interactions track shows a click interaction, and the majority of the work is spent doing style recalculation and pre-paint work. At the bottom, a panel shows more detail for the selected activity, which reports that 2,547 DOM elements were affected." decoding="async" height="639" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/IjTPVbiLoerWFO5eClbl.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    Observing the number of affected elements in the DOM as the result of style recalculation work. Note that the shaded portion of the interaction in the interactions track represents the portion of the interaction duration that was over 200 milliseconds, which is <a href="https://web.dev/inp/#what-is-a-good-inp-score" rel="noopener">the designated "good" threshold for INP</a>.
  </figcaption>
</figure>
<p>In the above screenshot, observe that the style recalculation of the work—when selected—shows the number of affected elements. While the above screenshot shows an extreme case of the effect of DOM size on rendering work on a page with many DOM elements, this diagnostic info is useful in any case to determine if the size of the DOM is a limiting factor in how long it takes for the next frame to paint in response to an interaction.</p>
<h2 id="how-can-i-reduce-dom-size">How can I reduce DOM size? <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#how-can-i-reduce-dom-size">#</a></h2>
<p>Beyond auditing your website's HTML for unnecessary markup, the principal way to reduce DOM size is to reduce DOM depth. One signal that your DOM might be unnecessarily deep is if you're seeing markup that looks something like this in the <strong>Elements</strong> tab of your browser's developer tools:</p>
<div><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br />  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br />      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><br />        <span class="token comment">&lt;!-- Contents --></span><br />      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br />    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br />  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><br /><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
</div><p>When you see patterns like this, you can probably simplify them by flattening your DOM structure. Doing so will reduce the number of DOM elements, and likely give you an opportunity to simplify page styles.</p>
<p>DOM depth may also be a symptom of the frameworks you use. In particular, component-based frameworks—such as those that rely on <a href="https://reactjs.org/docs/introducing-jsx.html" rel="noopener">JSX</a>—require you to nest multiple components in a parent container.</p>
<p>However, many frameworks allow you to avoid nesting components by using what are known as fragments. Component-based frameworks that offer fragments as a feature include (but are not limited to) the following:</p>
<ul>
<li><a href="https://reactjs.org/docs/fragments.html" rel="noopener">React</a></li>
<li><a href="https://preactjs.com/guide/v10/components/#fragments" rel="noopener">Preact</a></li>
<li><a href="https://v3-migration.vuejs.org/new/fragments.html" rel="noopener">Vue</a></li>
<li><a href="https://svelte.dev/tutorial/svelte-fragment" rel="noopener">Svelte</a></li>
</ul>
<p>By using fragments in your framework of choice, you can reduce DOM depth. If you're concerned about the impact flattening DOM structure has on styling, you might benefit from using more modern (and faster) layout modes such as <a href="https://developer.mozilla.org/docs/Learn/CSS/CSS_layout/Flexbox" rel="noopener">flexbox</a> or <a href="https://developer.mozilla.org/docs/Web/CSS/CSS_Grid_Layout" rel="noopener">grid</a>.</p>
<h2 id="other-strategies-to-consider">Other strategies to consider <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#other-strategies-to-consider">#</a></h2>
<p>Even if you take pains to flatten your DOM tree and remove unnecessary HTML elements to keep your DOM as small as possible, it can still be quite large and kick off a lot of rendering work as it changes in response to user interactions. If you find yourself in this position, there are some other strategies you can consider to limit rendering work.</p>
<h3 id="consider-an-additive-approach">Consider an additive approach <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#consider-an-additive-approach">#</a></h3>
<p>You might be in a position where large parts of your page aren't initially visible to the user when it first renders. This could be an opportunity to lazy load HTML by omitting those parts of the DOM on startup, but add them in when the user interacts with the parts of the page that require the initially hidden aspects of the page.</p>
<p>This approach is useful both during the initial load and perhaps even afterwards. For the initial page load, you're taking on less rendering work up front, meaning that your initial HTML payload will be lighter, and will render more quickly. This will give interactions during that crucial period more opportunities to run with less competition for the main thread's attention.</p>
<p>If you have many parts of the page that are initially hidden on load, it could also speed up other interactions that trigger re-rendering work. However, as other interactions add more to the DOM, rendering work will increase as the DOM grows throughout the page lifecycle.</p>
<p>Adding to the DOM over time can be tricky, and it has its own tradeoffs. If you're going this route, you're likely making network requests to get data to populate the HTML you intend to add to the page in response to a user interaction. While in-flight network requests are not counted towards INP, it can increase perceived latency. If possible, show a loading spinner or other indicator that data is being fetched so that users understand that something is happening.</p>
<h3 id="limit-css-selector-complexity">Limit CSS selector complexity <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#limit-css-selector-complexity">#</a></h3>
<p>When the browser parses selectors in your CSS, it has to traverse the DOM tree to understand how—and if—those selectors apply to the current layout. The more complex these selectors are, the more work the browser has to do in order to perform both the initial rendering of the page, as well as increased style recalculations and layout work if the page changes as the result of an interaction.</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>Objective</strong></p><div class=" flow"> <strong>Read to learn more:</strong> <a href="https://web.dev/reduce-the-scope-and-complexity-of-style-calculations/">Reduce the scope and complexity of style calculations</a>. </div></aside>
<h3 id="use-the-content-visibility-property">Use the <code>content-visibility</code> property <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#use-the-content-visibility-property">#</a></h3>
<p>CSS offers the <code>content-visibility</code> property, which is effectively a way to lazily render off-screen DOM elements. As the elements approach the viewport, they're rendered on demand. The benefits of <code>content-visibility</code> don't just cut out a significant amount of rendering work on the initial page render, but also skip rendering work for offscreen elements when the page DOM is changed as the result of a user interaction.</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>Objective</strong></p><div class=" flow"> <strong>Read to learn more:</strong> <a href="https://web.dev/content-visibility/"><code>content-visibility</code>: the new CSS property that boosts your rendering performance</a>. </div></aside>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/dom-size-and-interactivity/#conclusion">#</a></h2>
<p>Reducing your DOM size to only what is strictly necessary is a good way to optimize your website's INP. By doing so, you can reduce the amount of time it takes for the browser to perform layout and rendering work when the DOM is updated. Even if you can't meaningfully reduce DOM size, there are some techniques you can use to isolate rendering work to a DOM subtree, such as CSS containment and the <code>content-visibility</code> CSS property.</p>
<p>However you go about it, creating an environment where rendering work is minimized—as well as reducing the amount of rendering work your page does in response to interactions—the result will be that your website will feel more responsive to users when they interact with them. That means you'll have a lower INP for your website, and that translates to a better user experience.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@_louisreed" rel="noopener">Louis Reed</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[诊断实验室中的缓慢交互]]></title>
            <link>https://web.dev/diagnose-slow-interactions-in-the-lab/</link>
            <guid>https://web.dev/diagnose-slow-interactions-in-the-lab/</guid>
            <content:encoded><![CDATA[<p>One challenging aspect of optimizing <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> is figuring out what's causing poor INP. There's a large variety of potential causes: third-party scripts that schedule many tasks on the main thread, large <a href="https://developer.mozilla.org/docs/Web/API/Document_Object_Model" rel="noopener">DOM</a> sizes, expensive event callbacks, and so on.</p>
<p>Finding ways to fix poor INP can be difficult. To start, you have to know which interactions tend to be responsible for a page's INP. If you don't know this already, start by reading <a href="https://web.dev/find-slow-interactions-in-the-field/">Find slow interactions in the field</a>. Once you have that field data and know what interactions to test, you can do so in lab tools to work out why those interactions are slow.</p>
<h2 id="what-if-you-dont-have-field-data">What if you don't have field data? <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#what-if-you-dont-have-field-data">#</a></h2>
<p>Ideally, you'll want field data, as it saves you a lot of time trying to figure out which interactions need to be optimized. You might be in a position where you don't have field data, though. If that's your situation, you can still find interactions to improve: you'll just have to take a different approach.</p>
<p><a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a> is a metric that assesses page responsiveness during load. <a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt" rel="noopener">It correlates very well with INP</a>, and can give you an idea if there might be interactions you can profile while the page is loading.</p>
<p>You can use either <a href="https://developer.chrome.com/docs/lighthouse/overview/" rel="noopener">Lighthouse</a> or <a href="https://pagespeed.web.dev/" rel="noopener">PageSpeed Insights</a> to measure your page's TBT. If your TBT is either poor or needs improvement, there's a good chance there are interactions that might be slow during page load.</p>
<p>To find slow interactions after the page has loaded, you might need to rely on other types of data, such as common user flows that you may already have in your website's analytics. If you work on an ecommerce website, for example, a common user flow would be the actions users take when they're adding items to an online shopping cart or going through an online checkout.</p>
<p>Whether or not you have field data, the next step involves reproducing that interaction—because it's only when you're able to conclusively identify a slow interaction that you'll be able to fix it.</p>
<h2 id="reproducing-slow-interactions-in-the-lab">Reproducing slow interactions in the lab <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#reproducing-slow-interactions-in-the-lab">#</a></h2>
<p>Once you've identified a slow interaction, the next step is to test it in the lab to see if it's reliably slow.</p>
<h3 id="dont-reach-for-the-performance-profiler-right-away">Don't reach for the performance profiler right away <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#dont-reach-for-the-performance-profiler-right-away">#</a></h3>
<p>Chrome performance profiler—while invaluable—doesn't provide a live view while interacting with the page. It's more efficient to test interaction latency in a much faster way first, so you can quickly assess whether a given interaction is reliably slow, and then reach for the performance profiler when you need more information.</p>
<h4 id="use-the-web-vitals-chrome-extension">Use the Web Vitals Chrome Extension <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#use-the-web-vitals-chrome-extension">#</a></h4>
<p>The <a href="https://chrome.google.com/webstore/detail/web-vitals/ahfhijdlegdabablpippeagghigmibma?hl=en" rel="noopener">Web Vitals Chrome Extension</a> involves the lowest amount of effort in testing interaction latency. Once installed, the extension will display interaction data in the console if you do the following:</p>
<ol>
<li>In Chrome, click the extensions icon to the right of the address bar.</li>
<li>Locate the Web Vitals extension in the drop-down menu.</li>
<li>Click the icon at the right to open the extension's settings.</li>
<li>Click <strong>Options</strong>.</li>
<li>Enable the <strong>Console logging</strong> checkbox in the resulting screen, and then click <strong>Save</strong>.</li>
</ol>
<p>Once this has been done, open the console in Chrome DevTools, and begin testing the desired interactions on your website. As you interact with the page, you'll receive useful console logs giving you detailed diagnostic information for the interaction.</p>
<figure>
  <img alt="A screenshot of the console logging that the Web Vitals extension provides for interactions. The logging contains details such timings and other contextual information." decoding="async" height="264" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/aVIMXrpfirRew3rTM2PM.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    A console entry from the Web Vitals extension when console logging is turned on. Each qualifying interaction will log interaction data to the console.
  </figcaption>
</figure>
<h4 id="use-a-javascript-snippet">Use a JavaScript snippet <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#use-a-javascript-snippet">#</a></h4>
<p>Using the Web Vitals extension may not be a viable option for a number of reasons. Extensions can be blocked in some cases, and they also can't be installed on mobile devices. The latter is problematic if you want to test on a physical Android device with <a href="https://developer.chrome.com/docs/devtools/remote-debugging/" rel="noopener">remote debugging</a>.</p>
<p>An alternate method involves copying and pasting some JavaScript into the console of Chrome DevTools. The following code yields the same console output as the Web Vitals extension for every interaction:</p>
<div><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> worstInp <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><br /><br /><span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PerformanceObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> obs<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br />  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> entry <span class="token keyword">of</span> list<span class="token punctuation">.</span><span class="token function">getEntries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br />    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>entry<span class="token punctuation">.</span>interactionId<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span><br /><br />    entry<span class="token punctuation">.</span>renderTime <span class="token operator">=</span> entry<span class="token punctuation">.</span>startTime <span class="token operator">+</span> entry<span class="token punctuation">.</span>duration<span class="token punctuation">;</span><br />    worstInp <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>duration<span class="token punctuation">,</span> worstInp<span class="token punctuation">)</span><span class="token punctuation">;</span><br />      <br />    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[Interaction]'</span><span class="token punctuation">,</span> entry<span class="token punctuation">.</span>duration<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">type: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entry<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> interactionCount: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>performance<span class="token punctuation">.</span>interactionCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, worstInp: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>worstInp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> entry<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br /><br />observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br />  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'event'</span><span class="token punctuation">,</span><br />  <span class="token literal-property property">durationThreshold</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 16 minimum by spec</span><br />  <span class="token literal-property property">buffered</span><span class="token operator">:</span> <span class="token boolean">true</span><br /><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</div><aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> A more convenient way of using the preceding code is to use the <a href="https://developer.chrome.com/docs/devtools/javascript/snippets/">snippets feature in Chrome DevTools</a>. </div></aside>
<p>Once you have determined that the interaction is reliably slow, you can then profile the interaction to get more detailed information on <em>why</em> that interaction is slow.</p>
<h4 id="what-if-you-cant-reproduce-a-slow-interaction">What if you can't reproduce a slow interaction? <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#what-if-you-cant-reproduce-a-slow-interaction">#</a></h4>
<p>What if you've managed to find something in your field data that suggests a particular interaction is slow, but you can't reproduce it in the lab?</p>
<p>For one, this is a common challenge in troubleshooting performance issues of any kind. Your point of view when testing is entirely relative and dependent on the hardware you're using. After all, you may be on a fast device with a fast internet connection—but that doesn't mean your users are too. For this situation you can do one of three things:</p>
<ol>
<li>If you have a physical Android device, use <a href="https://developer.chrome.com/docs/devtools/remote-debugging/" rel="noopener">remote debugging</a> to open a Chrome DevTools instance on your host machine and try to reproduce slow interactions there.</li>
<li>If you don't have a physical device, <a href="https://umaar.com/dev-tips/88-cpu-throttling/" rel="noopener">enable the CPU throttling feature in Chrome DevTools</a>.</li>
<li>Follow both steps 1 and 2, as you can also enable CPU throttling on the DevTools instance for a physical Android device.</li>
</ol>
<p>Another cause could be that you're waiting for a page to load before you interact with it, but your users are not. If you're on a fast network, enable <a href="https://developer.chrome.com/docs/devtools/settings/throttling/" rel="noopener">network throttling</a> and interact with the page as soon as it paints. You should do this because the main thread is often busiest during startup, and testing at that time might help reveal what your users are actually experiencing.</p>
<h3 id="record-a-trace">Record a trace <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#record-a-trace">#</a></h3>
<p>To get more information on why an interaction is slow, you'll need to take things to the next level by <a href="https://developer.chrome.com/docs/devtools/performance/" rel="noopener">using the performance profiler in Chrome DevTools</a>. To profile an interaction in Chrome's performance profiler, do the following:</p>
<ol>
<li>With the page you need to profile loaded and ready for interactions, open Chrome DevTools and go to the <strong>Performance</strong> panel.</li>
<li>Click the <strong>Record</strong> button at the upper left of the panel to start tracing.</li>
<li>Perform the desired interaction.</li>
<li>Click the <strong>Record</strong> button again to stop tracing.</li>
</ol>
<p>When the profile populates, the first place to look should be the activity summary at the top of the profiler. The activity summary will show red bars at the top where long tasks occurred in the recording. This allows you to quickly zoom in on problem areas.</p>
<figure>
  <img alt="A screenshot of the activity summary in the performance panel of Chrome DevTools. The activity displayed is mostly from JavaScript that causes a long task, which is highlighted in red above the flame chart." decoding="async" height="126" loading="lazy" sizes="(min-width: 674px) 674px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UcSCVSfw65rg6u1YkqmY.png?auto=format&w=1348 1348w" width="674" />
  <figcaption>
    The activity summary at the top of Chrome's performance profiler. Long tasks are highlighted in red above the activity flame chart. In this case, significant scripting work was responsible for most of the work in the long task.
  </figcaption>
</figure>
<p>You can quickly focus on the problem area by dragging and selecting a region in the activity summary. Once you've focused to where the interaction occurred, the <strong>Interactions</strong> track will help you line up the interaction and the activity that occurred in the main thread track below it:</p>
<figure>
  <img alt="A screenshot of an interaction as visualized in the performance panel of Chrome DevTools. An interactions track above the main thread track shows the duration of an interaction, which can be lined up with main thread activity." decoding="async" height="325" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/YKYLTuog3110ynQyXDdM.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    An interaction profiled in the performance profiler in Chrome's DevTools. The <strong>Interactions</strong> track shows a series of events that amount to a click interaction. The Interactions track entries span across the tasks responsible for driving the interaction.
  </figcaption>
</figure>
<p>From here, it's a matter of observing what the problem with the interaction might be. There are many things that can contribute to high interaction latency, so let's go through what some of the culprits could be.</p>
<h3 id="use-lighthouse-timespans-as-an-alternative-to-tracing">Use Lighthouse timespans as an alternative to tracing <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#use-lighthouse-timespans-as-an-alternative-to-tracing">#</a></h3>
<p>Chrome's performance profiler—while rich with diagnostic information—can be a bit intimidating to the uninitiated. One alternative to the performance profiler is Lighthouse's timespan mode. To use this mode, do the following:</p>
<ol>
<li>With DevTools open, go to the <strong>Lighthouse</strong> tab in DevTools.</li>
<li>Under the section labeled <strong>Mode</strong>, select the <strong>Timespan</strong> option.</li>
<li>Select the desired device type under the section labeled <strong>Device</strong>.</li>
<li>Ensure at least the checkbox labeled <strong>Performance</strong> is selected under the <strong>Categories</strong> label.</li>
<li>Click the <strong>Start timespan</strong> button.</li>
<li>Test the desired interaction(s) on the page.</li>
<li>Click the <strong>End timespan</strong> button and wait for the audit to appear</li>
<li>Once the audit populates in the Lighthouse tab, you can filter the audits by INP by clicking the <strong>INP</strong> link next to the label which reads <strong>Show audits relevant to</strong>.</li>
</ol>
<p>At this point, you'll see a drop-down list for audits that have failed or passed. When you expand that drop-down, you'll probably see a breakdown of time spent during the interaction.</p>
<figure>
  <img alt="A screenshot of a Lighthouse audit provided by its timespan mode. The audit is specific to INP, and shows details for an interaction, including a screenshot of the element that triggered it, and a table beneath detailing where time was spent processing the interaction." decoding="async" height="662" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/F3fWEdo61KDoAE1OQx9X.jpg?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    An interaction profiled in Lighthouse's timespan mode. When interactions are made with the page, Lighthouse provides an audit detailing where the time during an interaction was spent, and breaks it down by input delay, processing delay, and presentation delay.
  </figcaption>
</figure>
<aside class="aside flow bg-state-info-bg color-state-info-text"><div class=" flow"> If you want to further investigate the cause behind a slow interaction, you can do so by clicking the <strong>View Trace</strong> button just above the filmstrip. This will take you to the performance profiler that shows interactions details for the interactions that you tested in the timespan mode. </div></aside>
<h2 id="how-to-identify-long-input-delays">How to identify long input delays <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-long-input-delays">#</a></h2>
<p>One thing that could be contributing to high interaction latency is input delay. The <em>input delay</em> is the first phase of an interaction. This is the period of time from when the user action is first received by the operating system until the browser is able to start processing the first event triggered by that input. The input delay ends right as the event callbacks for the interaction begin to run.</p>
<p>Identifying input delay in Chrome's performance profiler can be done by finding the start of an interaction in the interactions panel, and then finding the beginning of when the event callbacks for that interaction start to run.</p>
<p>You'll always incur at least some input delay, as it takes some time for the operating system to pass the input event to the browser—but you do have some control over how long the input delay is. <strong>The key is to figure out if there is work running on the main thread that's preventing your callbacks from running.</strong></p>
<figure>
  <img alt="A depiction of input delay in Chrome&#x27;s performance panel. The start of the interaction comes significantly before the event callbacks because of increased input delay due to a timer firing from a third-party script." decoding="async" height="291" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/UrkbAOpDSW2ABcG5ZHE3.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    Input delay caused by a task fired by a timer from a third-party script.
  </figcaption>
</figure>
<p>In the previous figure, a task from a third-party script is running as the user attempts to interact with the page, and therefore extends the input delay. The extended input delay affects the interaction's latency, and could therefore affect the page's INP.</p>
<p>For more information on how you can resolve long input delays, read about how you can <a href="https://web.dev/optimize-input-delay/">identify and reduce input delay</a>.</p>
<h2 id="how-to-identify-expensive-event-callbacks">How to identify expensive event callbacks <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-expensive-event-callbacks">#</a></h2>
<p>Event callbacks occur immediately after the input delay. If an event callback runs too long, it delays the browser from presenting the next frame, and can add significantly to an interaction's total latency. Event callbacks can often run for too long, whether they run as the result of first-party or third-party JavaScript—and in some cases, both.</p>
<figure>
  <img alt="A depiction of event callback tasks in Chrome&#x27;s performance panel. The event callbacks occur for the pointerdown and click events, which occur in a long task." decoding="async" height="291" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/h0UKtDuUBvWxd10vjrsn.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    The event callbacks that run in response to a click interaction, as shown in the performance profiler in Chrome DevTools. Note the red triangle in the upper right corner of both the <strong>Event: pointerdown</strong> and <strong>Event: click</strong> entries, which identifies expensive event callbacks.
  </figcaption>
</figure>
<p>Finding expensive event callbacks can be done by observing the following in a trace for a specific interaction:</p>
<ol>
<li>Determine whether the task associated with the event callbacks is a <a href="https://web.dev/long-tasks-devtools/#what-are-long-tasks">long task</a>. To reveal long tasks in a lab setting more reliably, you may need to <a href="https://developer.chrome.com/blog/new-in-devtools-61/#throttling" rel="noopener">enable CPU throttling</a> in the performance panel, or connect a low to mid-tier Android device and use <a href="https://developer.chrome.com/docs/devtools/remote-debugging/" rel="noopener">remote debugging</a>.</li>
<li>If the task that runs the event callbacks is a long task, look for event handler entries (entries with names such as <strong>Event: click</strong>, for example) in the call stack that have a red triangle at the upper right corner of the entry. These are expensive event callbacks.</li>
</ol>
<p>To address expensive event callbacks, try one of the following strategies:</p>
<ol>
<li><strong>Do as little work as possible.</strong> Is everything that happens in an expensive event callback strictly necessary? If not, consider removing that code altogether if you can, or deferring its execution to a later point in time if you can't. You can also take advantage of framework features to help. For example, React's <a href="https://beta.reactjs.org/reference/react/PureComponent" rel="noopener"><code>PureComponent</code> class</a> and <a href="https://react.dev/reference/react/memo" rel="noopener">memoization feature</a> can skip unnecessary rendering work when props and state haven't changed for a component.</li>
<li><strong>Defer non-rendering work in the event callback to a later point in time.</strong> Long tasks can be broken up by <a href="https://web.dev/optimize-long-tasks/#use-asyncawait-to-create-yield-points">yielding to the main thread</a>. Whenever you yield to the main thread, you're ending execution of the current task and breaking up the remainder of the work into a separate task. This gives the renderer a chance to process updates to the user interface that were processed earlier in the event callback. If you happen to be developing in React, its <a href="https://react.dev/reference/react/useTransition" rel="noopener">transitions feature</a> will do this for you.</li>
</ol>
<p>By employing these strategies, you should be able to get your event callbacks in a place where they're responding more quickly to user input.</p>
<h2 id="how-to-identify-presentation-delays">How to identify presentation delays <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#how-to-identify-presentation-delays">#</a></h2>
<p>Long input delays and expensive event callbacks aren't the only possible culprits of poor INP. Sometimes the rendering updates that occur in response to even small amounts of event callback code can be expensive. The time it takes for the browser to render visual updates to the user interface to reflect the result of an interaction is known as <em>presentation delay</em>.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> The <a href="https://web.dev/rendering-performance/">rendering performance guide</a> is a good primer on understanding how the browser renders a page. <a href="https://www.youtube.com/watch?v=K2QHdgAKP-s">Life of a pixel</a> goes further in depth on how rendering works in Chromium-based browsers. </div></aside>
<figure>
  <img alt="Rendering work as visualized in the performance panel of Chrome DevTools. The rendering work occurs after the event callback in order to paint the next frame." decoding="async" height="229" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/pFmaZMXrlbugrC9WPoHM.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    Rendering tasks as shown in Chrome's performance profiler. The rendering work is shown in purple, with paint work in green.
  </figcaption>
</figure>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> When profiling slow interactions due to expensive rendering work, you should enable the <strong>Screenshots</strong> checkbox at the top of the performance profiler. This will help you to line up user interface updates with the corresponding rendering work on the main thread. </div></aside>
<p>Of all the possible causes of high interaction latency, rendering work can be the most difficult to troubleshoot and fix, but the result is worth the effort. Excessive rendering work could be caused by any of the following:</p>
<ul>
<li><strong>Large DOM sizes.</strong> Rendering work often increases along with the size of the page's DOM. For more information, read <a href="https://web.dev/dom-size-and-interactivity/">How large DOM sizes affect interactivity—and what you can do about it</a>.</li>
<li><strong>Forced reflows.</strong> This happens when you apply style changes to elements in JavaScript, and <em>then</em> query the results of that work. The result is that the browser has to perform the layout work before doing anything else, so that the browser can return the updated styles. For more information and tips on avoiding forced reflows, read <a href="https://web.dev/avoid-large-complex-layouts-and-layout-thrashing/">Avoid large, complex layouts and layout thrashing</a>.</li>
<li><strong>Excessive or unnecessary work in <a href="https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame" rel="noopener"><code>requestAnimationFrame</code></a> callbacks.</strong> <code>requestAnimationFrame()</code> callbacks are run during the rendering phase of the event loop, and must complete before the next frame can be presented. If you're using <code>requestAnimationFrame()</code> to do work that doesn't involve changes to the user interface, understand that you could be delaying the next frame.</li>
<li><strong><a href="https://developer.mozilla.org/docs/Web/API/ResizeObserver" rel="noopener"><code>ResizeObserver</code></a> callbacks.</strong> Such callbacks run prior to rendering, and may delay presentation of the next frame if the work in them is expensive. As with event callbacks, defer any logic not needed for the next frame.</li>
</ul>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> Troubleshooting might be made easier by enabling the <strong>Timeline: event initiators</strong> experiment in Chrome DevTools. Enabling this experiment will draw an arrow from any style recalculation task to the JavaScript task that kicked it off. To enable this experiment, go into the Chrome DevTools settings, click on <strong>Experiments</strong> in the left hand menu, the click the checkbox labeled <strong>Timeline: event initiators</strong>, and restart DevTools. </div></aside>
<h2 id="troubleshooting-inp-is-an-iterative-process">Troubleshooting INP is an iterative process <a class="headline-link" href="https://web.dev/diagnose-slow-interactions-in-the-lab/#troubleshooting-inp-is-an-iterative-process">#</a></h2>
<p>Finding out what's causing high interaction latency that contributes to poor INP takes a lot of work—but if you can pin down the causes, you're halfway there. By following a methodical approach to troubleshooting poor INP, you can reliably pin down what's causing a problem, and arrive more quickly to the right fix. To review:</p>
<ul>
<li><a href="https://web.dev/find-slow-interactions-in-the-field/">Rely on field data to find slow interactions</a>.</li>
<li>Test problematic field interactions in the lab to see if they're reproducible.</li>
<li>Identify whether the cause is due to long input delay, expensive event callbacks, or expensive rendering work.</li>
<li>Repeat.</li>
</ul>
<p>The last of these is the most important. Like most other work you must do to improve page performance, troubleshooting and improving INP is a cyclical process. When you fix one slow interaction, you'll need to move onto the next, and continue to do so until you start to see results. Stay vigilant!</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/@_louisreed" rel="noopener">Louis Reed</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[HTML 的客户端呈现和交互性]]></title>
            <link>https://web.dev/client-side-rendering-of-html-and-interactivity/</link>
            <guid>https://web.dev/client-side-rendering-of-html-and-interactivity/</guid>
            <content:encoded><![CDATA[<p>Parsing and rendering of HTML is something that browsers do very well by default for websites that use the browser's built-in navigation logic—sometimes called &quot;traditional page loads&quot; or &quot;hard navigations&quot;. Such websites are sometimes called multi-page applications (MPAs).</p>
<p>However, developers may work around browser defaults to suit their application needs. This is certainly the case for websites using the <a href="https://en.wikipedia.org/wiki/Single-page_application" rel="noopener">single page application (SPA) pattern</a>, which dynamically creates large parts of the HTML/DOM on the client with JavaScript. Client-side rendering is the name for this design pattern, and it can have effects on your website's <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> if the work involved is excessive.</p>
<p>This guide will help you weigh the difference between using HTML sent by the server to the browser versus creating it on the client with JavaScript, and how the latter can result in high interaction latency at crucial moments.</p>
<h2 id="how-the-browser-renders-html-provided-by-the-server">How the browser renders HTML provided by the server <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#how-the-browser-renders-html-provided-by-the-server">#</a></h2>
<p>The navigation pattern used in traditional page loads involves receiving HTML from the server on every navigation. If you enter a URL in the address bar of your browser or click on a link in an MPA, the following series of events occurs:</p>
<ol>
<li>The browser sends a navigation request for the URL provided.</li>
<li>The server responds with HTML in chunks.</li>
</ol>
<p>The last step of these is key. It's also one of the most fundamental performance optimizations in the server/browser exchange, and is known as <em>streaming</em>. If the server can begin sending HTML as soon as possible, and the browser doesn't wait for the entire response to arrive, the browser can process HTML in chunks as it arrives.</p>
<figure>
  <img alt="A screenshot of parsing of HTML sent by the server visualized in the performance panel of Chrome DevTools. As the HTML streams in, chunks of it are processed across multiple shorter tasks, and rendering is incremental." decoding="async" height="379" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/8ZgdJRdWzvk5L72XKv2Z.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    Parsing and rendering of HTML provided by the server as visualized in the performance panel of Chrome DevTools. The tasks involved in parsing HTML and rendering it are split into chunks.
  </figcaption>
</figure>
<p>Like most things that happen in the browser, parsing HTML occurs within tasks. When HTML is streamed from the server to the browser, the browser optimizes parsing of that HTML by doing so a bit at a time as bits of that stream arrive in chunks. The consequence is that the browser yields to the main thread periodically after processing each chunk, which avoids <a href="https://web.dev/long-tasks-devtools/#what-are-long-tasks">long tasks</a>. This means that other work can occur while HTML is being parsed, including the incremental rendering work necessary to present a page to the user, as well as processing user interactions that may occur during the page's crucial startup period. This approach translates to a better <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a> score for the page.</p>
<p>The takeaway? When you stream HTML from the server, <strong>you get incremental parsing and rendering of HTML and automatic yielding to the main thread for free.</strong> You don't get that with client-side rendering.</p>
<h2 id="how-the-browser-renders-html-provided-by-javascript">How the browser renders HTML provided by JavaScript <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#how-the-browser-renders-html-provided-by-javascript">#</a></h2>
<p>While every navigation request to a page requires some amount of HTML to be provided by the server, some websites will use the SPA pattern. This approach often involves a minimal initial payload of HTML is provided by the server, but then the client will populate the main content area of a page with HTML assembled from data fetched from the server. Subsequent navigations—sometimes referred to as &quot;soft navigations&quot; in this case—are handled entirely by JavaScript to populate the page with new HTML.</p>
<p>Client-side rendering may also occur in non-SPAs in more limited cases where HTML is dynamically added to the DOM through JavaScript.</p>
<p>There are a few common ways of creating HTML or adding to the DOM through JavaScript:</p>
<ol>
<li>The <a href="https://developer.mozilla.org/docs/Web/API/Element/innerHTML" rel="noopener"><code>innerHTML</code> property</a> allows you to set the content on an existing element via a string, which the browser parses into DOM.</li>
<li>The <a href="https://developer.mozilla.org/docs/Web/API/Document/createElement" rel="noopener"><code>document.createElement</code> method</a> allows you to create new elements to be added to the DOM without using any browser HTML parsing.</li>
<li>The <a href="https://developer.mozilla.org/docs/Web/API/Document/write" rel="noopener"><code>document.write</code> method</a> allows you to write HTML to the document (and the browser parses it, just like in approach #1). Due to <a href="https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#document.write()" rel="noopener">a number of reasons</a>, however, <strong>usage of <code>document.write</code> is strongly discouraged.</strong></li>
</ol>
<figure>
  <img alt="A screenshot of parsing of HTML rendered via JavaScript visualized in the performance panel of Chrome DevTools. The work occurs in a single, long task that blocks the main thread." decoding="async" height="141" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format" srcset="https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/jL3OLOhcWUQDnR4XjewLBx4e3PC3/Xam8fQoVZBmDPET1dVQ1.png?auto=format&w=1600 1600w" width="800" />
  <figcaption>
    Parsing and rendering of HTML through JavaScript on the client as visualized in the performance panel of Chrome DevTools. The tasks involved in parsing and rendering it are not chunked up, resulting in a long task that blocks the main thread.
  </figcaption>
</figure>
<p>The consequences of creating HTML/DOM through client-side JavaScript can be significant:</p>
<ul>
<li>Unlike HTML streamed by the server in response to a navigation request, JavaScript tasks on the client are not automatically chunked up, which may result in long tasks that block the main thread. This means that your page's INP can be negatively affected if you're creating too much HTML/DOM at a time on the client.</li>
<li>If HTML is created on the client during startup, resources referenced within it <a href="https://web.dev/preload-scanner/#rendering-markup-with-client-side-javascript">will <em>not</em> be discovered by the browser preload scanner</a>. This will certainly have a negative effect on a page's <a href="https://web.dev/lcp/">Largest Contentful Paint (LCP)</a>. While this is not a runtime performance issue (instead it's an issue of network delay in fetching important resources), you don't want your website's LCP to be affected by sidestepping this fundamental browser performance optimization.</li>
</ul>
<h2 id="what-you-can-do-about-the-performance-impact-of-client-side-rendering">What you can do about the performance impact of client-side rendering <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#what-you-can-do-about-the-performance-impact-of-client-side-rendering">#</a></h2>
<p>If your website depends heavily on client-side rendering and you've observed <a href="https://web.dev/find-slow-interactions-in-the-field/">poor INP values in your field data</a>, you might be wondering if client-side rendering has anything to do with the problem. For example, if your website is an SPA, your field data may reveal interactions responsible for considerable rendering work.</p>
<p>Whatever the cause, here are some potential causes you can explore to help get things back on track.</p>
<h3 id="provide-as-much-html-from-the-server-as-possible">Provide as much HTML from the server as possible <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#provide-as-much-html-from-the-server-as-possible">#</a></h3>
<p>As mentioned earlier, the browser handles HTML from the server in a very performant way by default. It will break up parsing and rendering of HTML in a way that avoids long tasks, and optimizes the amount of total main thread time. This leads to a lower <a href="https://web.dev/tbt/">Total Blocking Time (TBT)</a>, and TBT is <a href="https://almanac.httparchive.org/en/2022/performance#inp-and-tbt" rel="noopener">strongly correlated with INP</a>.</p>
<p>You may be relying on a frontend framework to build your website. If so, you'll want to make sure you're rendering component HTML on the server. This will limit the amount of initial client-side rendering your website will require, and should result in a better experience.</p>
<ul>
<li>For React, you'll want to make use of the <a href="https://react.dev/reference/react-dom/server" rel="noopener">Server DOM API</a> to render HTML on the server. But be aware: the traditional method of server-side rendering uses <a href="https://react.dev/reference/react-dom/server#server-apis-for-non-streaming-environments" rel="noopener">a synchronous approach</a>, which can lead to a longer <a href="https://web.dev/ttfb/">Time to First Byte (TTFB)</a>, as well as subsequent metrics such as <a href="https://web.dev/fcp/">First Contentful Paint (FCP)</a> and LCP. Where possible, make sure you're using the streaming APIs for <a href="https://react.dev/reference/react-dom/server#server-apis-for-nodejs-streams" rel="noopener">Node.js</a> or <a href="https://react.dev/reference/react-dom/server#server-apis-for-web-streams" rel="noopener">other JavaScript runtimes</a> so that the server can begin streaming HTML to the browser as soon as possible. Next.js—a React-based framework—provides many best practices by default. In addition to automatically rendering HTML on the server, it can also statically generate HTML for pages that don't change based on user context (such as authentication).</li>
<li>Vue also performs client-side rendering by default. However, like React, Vue can also <a href="https://vuejs.org/guide/scaling-up/ssr.html" rel="noopener">render your component HTML on the server</a>. Either take advantage of these server-side APIs where possible, or consider a <a href="https://vuejs.org/guide/scaling-up/ssr.html#higher-level-solutions" rel="noopener">higher-level abstraction</a> for your Vue project to make the best practices easier to implement.</li>
<li>Svelte <a href="https://learn.svelte.dev/tutorial/ssr" rel="noopener">renders HTML on the server</a> by default—although if your component code needs access to browser-exclusive namespaces (<code>window</code>, for example), you may not be able to render that component's HTML on the server. Explore alternative approaches wherever possible so that you're not causing unnecessary client-side rendering. <a href="https://kit.svelte.dev/" rel="noopener">SvelteKit</a>—which is to Svelte as Next.js is to React—embeds many best practices into your Svelte projects as possible, so you can avoid potential pitfalls in projects that use Svelte alone.</li>
</ul>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> If your application uses either of these frameworks and requires interactivity on the client, you'll still need to <a href="https://web.dev/rendering-on-the-web/#combining-server-rendering-and-csr-via-rehydration">hydrate your components on the client</a> so that they'll be interactive. For a comprehensive evaluation of the different approaches to rendering HTML, and for some advice on how to handle component hydration on the client with performance in mind, read <a href="https://web.dev/rendering-on-the-web/">Rendering on the web</a>. </div></aside>
<h3 id="limit-the-amount-of-dom-nodes-created-on-the-client">Limit the amount of DOM nodes created on the client <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#limit-the-amount-of-dom-nodes-created-on-the-client">#</a></h3>
<p>When DOMs are large, the amount of processing time required to render them tends to increase. Whether your website is a full-fledged SPA, or is injecting new nodes into an existing DOM as the result of an interaction for an MPA, consider keeping those DOMs as small as possible. This will help reduce the work required during client-side rendering to display that HTML, hopefully helping to keep your website's INP lower.</p>
<aside class="aside flow bg-state-good-bg color-state-good-text"><p class="cluster "><span class="aside__icon box-block "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" height="24" width="24" fill="currentColor" role="img" aria-label="Check">   <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"></path> </svg></span><strong>Objective</strong></p><div class=" flow"> <strong>Read to learn more:</strong> <a href="https://web.dev/dom-size-and-interactivity/">DOM size and interactivity</a>. </div></aside>
<h3 id="consider-a-streaming-service-worker-architecture">Consider a streaming service worker architecture <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#consider-a-streaming-service-worker-architecture">#</a></h3>
<p>This is an advanced technique—one that may not work easily with every use case—but it's one that can turn your MPA into a website that feels like it's loading instantly when users navigate from one page to the next. You can use a service worker to precache the static parts of your website in <a href="https://developer.mozilla.org/docs/Web/API/CacheStorage" rel="noopener"><code>CacheStorage</code></a> while using the <a href="https://developer.mozilla.org/docs/Web/API/ReadableStream" rel="noopener"><code>ReadableStream</code> API</a> to fetch the rest of a page's HTML from the server.</p>
<p>When you use this technique successfully, you aren't creating HTML on the client, but the instant loading of content partials from the cache will give the impression that your site is loading quickly. Websites using this approach can feel almost like an SPA, but without the downfalls of client-side rendering. It also <a href="https://philipwalton.com/articles/smaller-html-payloads-with-service-workers/" rel="noopener">reduces the amount of HTML you're requesting from the server</a>.</p>
<p>In short, a streaming service worker architecture doesn't <em>replace</em> the browser's built-in navigation logic—it <em>adds</em> to it. For more information on how to achieve this with <a href="https://developer.chrome.com/docs/workbox/" rel="noopener">Workbox</a>, read <a href="https://developer.chrome.com/docs/workbox/faster-multipage-applications-with-streams/" rel="noopener">Faster multipage applications with streams</a>.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/client-side-rendering-of-html-and-interactivity/#conclusion">#</a></h2>
<p>How your website receives and renders HTML has an impact on performance. When you rely on the server to send all (or the bulk of) the HTML required for your website to function, you're getting a lot for free: incremental parsing and rendering, and automatic yielding to the main thread to avoid long tasks.</p>
<p>Client-side HTML rendering introduces a number of potential performance issues that can be avoidable in many cases. Due to each individual website's requirements, however, it's not entirely avoidable 100% of the time. To mitigate the potential long tasks that can result from excessive client-site rendering, make sure you're sending as much of your website's HTML from the server whenever possible, keep your DOM sizes as small as possible for HTML that must be rendered on the client, and consider alternative architectures to speed the delivery of HTML to the client while also taking advantage of the incremental parsing and rendering the browser provides for HTML loaded from the server.</p>
<p>If you can get your website's client-side rendering to be as minimal as possible, you'll improve not just your website's INP, but other metrics such as LCP, TBT, and possibly even your TTFB in some cases.</p>
<p><em>Hero image from <a href="https://unsplash.com/" rel="noopener">Unsplash</a>, by <a href="https://unsplash.com/de/fotos/nZcMWOKAJrY" rel="noopener">Maik Jonietz</a>.</em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[使用 Web Vitals 扩展来调试 Core Web Vitals 问题]]></title>
            <link>https://web.dev/debug-cwvs-with-web-vitals-extension/</link>
            <guid>https://web.dev/debug-cwvs-with-web-vitals-extension/</guid>
            <content:encoded><![CDATA[<p>The <a href="https://chrome.google.com/webstore/detail/web-vitals/ahfhijdlegdabablpippeagghigmibma" rel="noopener">Web Vitals extension</a> provides easy access to Core Web Vitals diagnostic information to help developers measure, and address Core Web Vitals issues. It supplements the other tools provided by the Chrome team to aid developers in improving the experiences on their websites.</p>
<p>We have updated the extension to provide additional debug information to developers to make it easier to understand and address their performance problems.</p>
<h2 id="showing-debug-information-in-the-console">Showing debug information in the console <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#showing-debug-information-in-the-console">#</a></h2>
<p>The Web Vitals extension has had a &quot;Console Logging&quot; debug option for some time now. It can be enabled in the Options screen:</p>
<img alt="Web Vitals Extension Options screen" decoding="async" height="434" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/SjuszdY0PADWgETicJNl.png?auto=format&w=1600 1600w" width="800" />
<p>Prior to the this last upgrade, this logged the outputs from the <a href="https://github.com/GoogleChrome/web-vitals" rel="noopener"><code>web-vitals library</code></a> (that underpins the extension) in a JSON object:</p>
<img alt="Web Vitals Extension old console logging" decoding="async" height="458" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/iUoyoe41Ik4zNDNRPHKo.png?auto=format&w=1600 1600w" width="800" />
<p>This object could then be expanded to get the full details, and elements such as the LCP image, could be hovered over to highlight them in the main panel:</p>
<img alt="Web Vitals Extension old console logging with element highlighting" decoding="async" height="514" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/oNVOo321R5U3Lqg1xrH6.png?auto=format&w=1600 1600w" width="800" />
<p>This was helpful, but the output format was not particularly user friendly, and we thought we could provide a better developer experience. So we have improved the extension to make the most important information more visible—while still including the full object for those wanting more details.</p>
<h2 id="new-debug-information-for-each-metric">New debug information for each metric <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#new-debug-information-for-each-metric">#</a></h2>
<p>With the new release, we have added new debug information in a more readable format to help you find and address issues. Different information is provided for each of the metrics, as each one is different.</p>
<h3 id="lcp-debug-information">LCP debug information <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#lcp-debug-information">#</a></h3>
<p>For <a href="https://web.dev/lcp/">Largest Contentful Paint (LCP)</a>, we show both the element, and the breakdown of the 4 phases detailed in our <a href="https://web.dev/optimize-lcp/#lcp-breakdown">Optimize LCP</a> guide:</p>
<img alt="Web Vitals Extension new console logging showing LCP elements and sub-parts" decoding="async" height="535" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/HXzKcJORE2nRUI9Pl8Mw.png?auto=format&w=1600 1600w" width="800" />
<p>The LCP time (2,876 milliseconds—or about 2.9 seconds) is highlighted in amber as it is in the &quot;Needs Improvement&quot; category.</p>
<p>In this example, we see the <code>Resource load time</code> is the longest time, so to improve your LCP time you would look to optimize that - perhaps by avoiding hosting them on a separate domain, or by using smaller images or more efficient formats. In this case it's due to being artificially slowed down to demonstrate the output—web.dev is a fast site 😀</p>
<p>The element can also be hovered over to highlight the image:</p>
<img alt="Web Vitals Extension new console logging retains element highlighting on hover" decoding="async" height="535" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/8H8ZldOw8y953w7vTpuA.png?auto=format&w=1600 1600w" width="800" />
<p>Right clicking on the element also allows you to reveal it in the elements panel.</p>
<p>Here the LCP element is an image, and hovering over that in the console on the right, also highlights that element on the site on the left.</p>
<h3 id="cls-debug-information">CLS debug information <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#cls-debug-information">#</a></h3>
<p>Shifts contributing to <a href="https://web.dev/cls/">Cumulative Layout Shift (CLS)</a> are now also listed, and can be hovered over to highlight the relevant element:</p>
<img alt="Web Vitals Extension new console logging showing each CLS element shift" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/v1kaVvcekk5oLWuGHAkd.png?auto=format&w=1600 1600w" width="800" />
<p>The above screenshot shows 2 shifts, the first made up of two elements (when the banner image is loaded and the content beneath it is shifted downloaded), and the second of 4 elements (when the dynamic ad is loaded and most of the page is shifted downwards).</p>
<p>The <code>h2</code> element is being hovered over in this screenshot in the console on the right, and you can see this highlights the element on the site on the left.</p>
<aside class="aside flow bg-tertiary-box-bg color-tertiary-box-text"><p class="cluster "><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" role="img" aria-label="Lightbulb" fill="currentColor" xmlns="http://www.w3.org/2000/svg">   <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 017 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path> </svg></span><strong>Important</strong></p><div class=" flow"> <p> Note that the shifted elements are not the elements <em>causing</em> the shift, but the ones that were <em>impacted</em> by any shifts. </p> <p> However, as per the above example, this should usually be enough to help you identify the cause of the shift by looking at the element which is either above the first shifted element (for inserted elements) or the first element itself (if this is expanded and so shifts itself). </p> </div></aside>
<h3 id="fid-debug-information">FID debug information <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#fid-debug-information">#</a></h3>
<p>For <a href="https://web.dev/fid/">First Input Delay (FID)</a> we show the affected element (which again, can be hovered over to highlight it on the page) and the interaction type, along with the full JSON object as usual:</p>
<img alt="Web Vitals Extension new console logging showing FID target and type" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/f8JI8akIhiqfA7WHWfRz.png?auto=format&w=1600 1600w" width="800" />
<h3 id="inp-debug-information">INP debug information <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#inp-debug-information">#</a></h3>
<p>For <a href="https://web.dev/inp/">Interaction to Next Paint (INP)</a>, we have added two new logs:</p>
<ul>
<li>INP - the longest interaction</li>
<li>Interactions - all interactions</li>
</ul>
<h4 id="inp-metric">INP metric <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#inp-metric">#</a></h4>
<p>First up, we highlight the INP metric when it changes:</p>
<img alt="Web Vitals Extension new console logging showing INP target, event type, and breakdown" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/kxh8TRS2585OJTZJmWmt.png?auto=format&w=1600 1600w" width="800" />
<p>Similar to LCP, the extension breaks down the INP time to show three phases:</p>
<ol>
<li>Input delay</li>
<li>Processing time</li>
<li>Presentation delay</li>
</ol>
<p>This helps you identify if the event was slow due to being held up by other events (<strong>input delay</strong>), as the event handler itself was slow due to your code (<strong>processing time</strong>), if the post-processing render delay was the reason (<strong>presentation delay</strong>), or a combination of two or more of these.</p>
<h4 id="interactions">Interactions <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#interactions">#</a></h4>
<p>INP can be slow due to previous interactions blocking the main thread, and thus causing a high input delay. For this reason, we list all interactions in a similar format to the INP logging:</p>
<img alt="Web Vitals Extension new console logging showing all interactions" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/k2uHWUQXoq5fWGOQ4yyF.png?auto=format&w=1600 1600w" width="800" />
<p>This allows you to &quot;live trace&quot; a website by interacting with it and seeing in the console which interactions, in which combinations, are likely to cause an INP problem.</p>
<p>This also allows you to identify multiple slow interactions, rather than just the largest INP interaction to help you avoid the feeling of chasing your tail when improving your responsiveness.</p>
<h2 id="filtering-the-console-logs">Filtering the console logs <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#filtering-the-console-logs">#</a></h2>
<p>All this extra information, while useful, can be distracting if you are doing other development unrelated to Core Web Vitals, or are only interested in one particular Core Web Vital at that time.</p>
<p>You can use the <a href="https://developer.chrome.com/docs/devtools/console/reference/#filter" rel="noopener">Console filtering options in DevTools</a> to filter out some or all of the messages:</p>
<img alt="Using console filtering options" decoding="async" height="448" loading="lazy" sizes="(min-width: 800px) 800px, calc(100vw - 48px)" src="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format" srcset="https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=200 200w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=228 228w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=260 260w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=296 296w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=338 338w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=385 385w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=439 439w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=500 500w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=571 571w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=650 650w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=741 741w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=845 845w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=964 964w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=1098 1098w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=1252 1252w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=1428 1428w, https://web-dev.imgix.net/image/W3z1f5ZkBJSgL1V1IfloTIctbIF3/NOA3kNu5rKMzkw7iAyW7.png?auto=format&w=1600 1600w" width="800" />
<ul>
<li>To remove all the extension messages, you can either turn this off in the options or use the <code>-Extension</code> filter.</li>
<li>To look at just LCP you can use the <code>Web Vitals Extension LCP</code> filter.</li>
<li>To look at just INP and interactions you can use the <code>Web Vitals Extension -LCP -CLS -FID</code> filter.</li>
</ul>
<p>We're trying to keep the number of options for this extension down, but do let us know by raising a <a href="https://github.com/GoogleChrome/web-vitals-extension/issues" rel="noopener">GitHub issue</a> if DevTools filtering is not sufficient and you would prefer options here.</p>
<h2 id="conclusion">Conclusion <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#conclusion">#</a></h2>
<p>We hope you find the new debug options in the latest version of the extension useful and that they make it easier to identify and resolve Core Web Vitals issues, improving the  user experiences on your website.</p>
<p>Do remember that your experiences, on your developer computer, may not be representative of what your real users are experiencing. Check out our <a href="https://web.dev/field-data-in-the-web-vitals-extension/">previous blog post on how you can view the CrUX field data for your site in the extension</a> to get a sense of how aligned your experiences are with your users.</p>
<p>We would be grateful to hear any feedback on these improvements, or any other suggestions on our <a href="https://github.com/GoogleChrome/web-vitals-extension/issues" rel="noopener">GitHub issues tracker</a>.</p>
<h2 id="acknowledgements">Acknowledgements <a class="headline-link" href="https://web.dev/debug-cwvs-with-web-vitals-extension/#acknowledgements">#</a></h2>
<p><em>Hero image by <a href="https://unsplash.com/@euwars?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener">Farzad</a> on <a href="https://unsplash.com/photos/p-xSl33Wxyc?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener">Unsplash</a></em></p>
]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[四月网络平台新功能]]></title>
            <link>https://web.dev/web-platform-04-2023/</link>
            <guid>https://web.dev/web-platform-04-2023/</guid>
            <content:encoded><![CDATA[<h2 id="stable-browser-releases">Stable browser releases <a class="headline-link" href="https://web.dev/web-platform-04-2023/#stable-browser-releases">#</a></h2>
<p>In April 2023, <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/112" rel="noopener">Firefox 112</a>, and <a href="https://developer.chrome.com/blog/new-in-chrome-112/" rel="noopener">Chrome 112</a> became stable. Let's take a look at what this means for the web platform.</p>
<aside class="aside flow bg-state-bad-bg color-state-bad-text"><p class="cluster color-state-bad-text"><span class="aside__icon box-block "><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Error sign">   <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z"></path> </svg></span><strong>Caution</strong></p><div class=" flow"> We include browser compatibility data pulled from MDN in these posts which may not have updated for very recent browser releases. The post will show the correct information as soon as it appears in the <a href="https://github.com/mdn/browser-compat-data/releases">browser-compat-data release</a>. </div></aside>
<h3 id="the-inert-attribute">The <code>inert</code> attribute <a class="headline-link" href="https://web.dev/web-platform-04-2023/#the-inert-attribute">#</a></h3>
<p>Firefox 112 includes the <code>inert</code> global attribute. This attribute tells the browser to ignore the element, indicating content that should not be interactive. It:</p>
<ul>
<li>Prevents <code>click</code> events being fired.</li>
<li>Prevents the element from gaining focus.</li>
<li>Excludes the element and its contents from the accessibility tree.</li>
</ul>
<p>This attribute is now interoperable in all three engines.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 102, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      102
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 102, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      102
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari 15.5, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      15.5
    </span>
    </li>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/HTML/Global_attributes/inert#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="the-linear-easing-function">The <code>linear()</code> easing function <a class="headline-link" href="https://web.dev/web-platform-04-2023/#the-linear-easing-function">#</a></h3>
<p>The <code>linear()</code> easing function enables linear interpolation between a number of points. This enables more complex animations such as bounce and elastic effects. This function is in Firefox 112.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="edge">
      <span class="visually-hidden">Edge 113, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      113
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="safari">
      <span class="visually-hidden">Safari, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><p></p>
  </ul>
</div>
<h3 id="css-nesting">CSS nesting <a class="headline-link" href="https://web.dev/web-platform-04-2023/#css-nesting">#</a></h3>
<p>Chrome 112 adds support for <a href="https://developer.chrome.com/articles/css-nesting/" rel="noopener">CSS Nesting</a>, a feature that is highly anticipated by many developers. This introduces a new nesting selector <code>&gt;</code>, used to nest related style rules, in a way that will be familiar to developers who have used pre-processors:</p>
<div><pre class="language-css"><code class="language-css"><span class="token selector">.nesting</span> <span class="token punctuation">{</span><br />  <span class="token property">color</span><span class="token punctuation">:</span> hotpink<span class="token punctuation">;</span><br /><br />  <span class="token selector">> .is</span> <span class="token punctuation">{</span><br />    <span class="token property">color</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span><br /><br />    <span class="token selector">> .awesome</span> <span class="token punctuation">{</span><br />      <span class="token property">color</span><span class="token punctuation">:</span> deeppink<span class="token punctuation">;</span><br />    <span class="token punctuation">}</span><br />  <span class="token punctuation">}</span><br /><span class="token punctuation">}</span></code></pre>
</div><div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox, Not supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="no" title="Not supported" aria-label="Not supported">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 112, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
112
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari preview, Preview</span>
</span>
<span class="wdi-browser-compat__version" data-compat="preview" title="Preview" aria-label="Preview"><p></p>
<p></p></span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/Nesting_selectors#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="css-animation-composition">CSS <code>animation-composition</code> <a class="headline-link" href="https://web.dev/web-platform-04-2023/#css-animation-composition">#</a></h3>
<p>Chrome 112 also includes support for <code>animation-composition</code>. Learn how this property works in <a href="https://developer.chrome.com/articles/css-animation-composition/" rel="noopener">Specify how multiple animation effects should composite with animation-composition</a>.</p>
<div class="wdi-browser-compat">
  <span class="wdi-browser-compat__label">Browser support</span>
  <ul class="wdi-browser-compat__items">
    <li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="chrome">
      <span class="visually-hidden">Chrome 112, Supported</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
      112
    </span>
    </li><li class="wdi-browser-compat__item">
    <span class="wdi-browser-compat__icon" data-browser="firefox">
      <span class="visually-hidden">Firefox 104, Behind a flag</span>
    </span>
    <span class="wdi-browser-compat__version" data-compat="flag" title="Behind a flag" aria-label="Behind a flag">
<p></p></span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="edge">
<span class="visually-hidden">Edge 112, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
112
</span>
</li><li class="wdi-browser-compat__item">
<span class="wdi-browser-compat__icon" data-browser="safari">
<span class="visually-hidden">Safari 16, Supported</span>
</span>
<span class="wdi-browser-compat__version" data-compat="yes" title="Supported" aria-label="Supported">
16
</span>
</li><p></p>
  </ul>
  <a class="wdi-browser-compat__link" href="https://developer.mozilla.org/docs/Web/CSS/animation-composition#browser_compatibility" target="_blank">Source</a>
</div>
<h3 id="new-headless-mode">New headless mode <a class="headline-link" href="https://web.dev/web-platform-04-2023/#new-headless-mode">#</a></h3>
<p>If you use Chrome's Headless mode, for example with Puppeteer, then 112 brings an all new Headless mode. Learn about it in <a href="https://developer.chrome.com/articles/new-headless/" rel="noopener">Chrome's Headless mode gets an upgrade</a>.</p>
<h2 id="beta-browser-releases">Beta browser releases <a class="headline-link" href="https://web.dev/web-platform-04-2023/#beta-browser-releases">#</a></h2>
<p>Beta browser versions give you a preview of things that will be in the next stable version of the browser. It's a great time to test new features, or removals, that could impact your site before the world gets that release. New betas are <a href="https://developer.mozilla.org/docs/Mozilla/Firefox/Releases/113" rel="noopener">Firefox 113</a> and <a href="https://developer.chrome.com/blog/chrome-113-beta/" rel="noopener">Chrome 113</a>, with the <a href="https://developer.apple.com/documentation/safari-release-notes/safari-16_5-release-notes" rel="noopener">Safari 16.5</a> beta still ongoing. These releases bring many great features to the platform. Check out the release notes for all of the details, here are just a few highlights.</p>
<p>Firefox 113 includes the <code>color()</code>, <code>lab()</code>, <code>lch()</code>, <code>oklab()</code>, and <code>oklch()</code> functions. Also included is the <a href="https://developer.chrome.com/blog/css-color-mix/" rel="noopener"><code>color-mix()</code></a> function from CSS Color 5, and the <code>forced-color-adjust</code> property.</p>
<p>Firefox also includes the <a href="https://developer.mozilla.org/docs/Web/CSS/:nth-child#the_of_selector_syntax" rel="noopener"><code>nth-child of &lt;selector&gt;</code></a> syntax, giving finer control of which elements you want to select. Read more in <a href="https://developer.chrome.com/articles/css-nth-child-of-s/" rel="noopener">More control over :nth-child() selections with the of S syntax</a>.</p>
<p>For CSS, Chrome 113 includes the <code>overflow-inline</code>, <code>overflow-block</code>, and <code>update</code> media features. Also included in the <code>linear()</code> easing function, and the unprefixed <code>image-set()</code> type.</p>
<p>Chrome 113 also includes <a href="https://developer.chrome.com/blog/webgpu-release/" rel="noopener">WebGPU</a>, the successor to the WebGL and WebGL 2 graphics APIs for the Web. It provides modern features such as GPU compute, lower overhead access to GPU hardware, the ability to render to multiple canvases from a single graphics device, and better, more predictable performance.</p>
<p><em>Photo by <a href="https://unsplash.com/@moonflowerstudiocreativet" rel="noopener">Karen Ciocca</a>.</em></p>
]]></content:encoded>
        </item>
    </channel>
</rss>